"use strict";var Xf=Object.create;var In=Object.defineProperty;var Jf=Object.getOwnPropertyDescriptor;var ed=Object.getOwnPropertyNames;var td=Object.getPrototypeOf,rd=Object.prototype.hasOwnProperty;var Tr=(r,t)=>()=>(r&&(t=r(r=0)),t);var Q=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Qs=(r,t)=>{for(var o in t)In(r,o,{get:t[o],enumerable:!0})},Zs=(r,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of ed(t))!rd.call(r,a)&&a!==o&&In(r,a,{get:()=>t[a],enumerable:!(i=Jf(t,a))||i.enumerable});return r};var J=(r,t,o)=>(o=r!=null?Xf(td(r)):{},Zs(t||!r||!r.__esModule?In(o,"default",{value:r,enumerable:!0}):o,r)),nd=r=>Zs(In({},"__esModule",{value:!0}),r);var aa=Q((Op,sa)=>{sa.exports=ia;ia.sync=ld;var na=require("fs");function ad(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var i=0;i<o.length;i++){var a=o[i].toLowerCase();if(a&&r.substr(-a.length).toLowerCase()===a)return!0}return!1}function oa(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:ad(t,o)}function ia(r,t,o){na.stat(r,function(i,a){o(i,i?!1:oa(a,r,t))})}function ld(r,t){return oa(na.statSync(r),r,t)}});var da=Q((xp,fa)=>{fa.exports=ua;ua.sync=ud;var la=require("fs");function ua(r,t,o){la.stat(r,function(i,a){o(i,i?!1:ca(a,t))})}function ud(r,t){return ca(la.statSync(r),t)}function ca(r,t){return r.isFile()&&cd(r,t)}function cd(r,t){var o=r.mode,i=r.uid,a=r.gid,l=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),c=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),b=parseInt("100",8),p=parseInt("010",8),m=parseInt("001",8),g=b|p,y=o&m||o&p&&a===c||o&b&&i===l||o&g&&l===0;return y}});var pa=Q((kp,ma)=>{var Lp=require("fs"),On;process.platform==="win32"||global.TESTING_WINDOWS?On=aa():On=da();ma.exports=Uo;Uo.sync=fd;function Uo(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,a){Uo(r,t||{},function(l,c){l?a(l):i(c)})})}On(r,t||{},function(i,a){i&&(i.code==="EACCES"||t&&t.ignoreErrors)&&(i=null,a=!1),o(i,a)})}function fd(r,t){try{return On.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var Ea=Q((Dp,wa)=>{var Jt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",ha=require("path"),dd=Jt?";":":",ba=pa(),ya=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),ga=(r,t)=>{let o=t.colon||dd,i=r.match(/\//)||Jt&&r.match(/\\/)?[""]:[...Jt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],a=Jt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",l=Jt?a.split(o):[""];return Jt&&r.indexOf(".")!==-1&&l[0]!==""&&l.unshift(""),{pathEnv:i,pathExt:l,pathExtExe:a}},Sa=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:i,pathExt:a,pathExtExe:l}=ga(r,t),c=[],b=m=>new Promise((g,y)=>{if(m===i.length)return t.all&&c.length?g(c):y(ya(r));let A=i[m],I=/^".*"$/.test(A)?A.slice(1,-1):A,w=ha.join(I,r),W=!I&&/^\.[\\\/]/.test(r)?r.slice(0,2)+w:w;g(p(W,m,0))}),p=(m,g,y)=>new Promise((A,I)=>{if(y===a.length)return A(b(g+1));let w=a[y];ba(m+w,{pathExt:l},(W,x)=>{if(!W&&x)if(t.all)c.push(m+w);else return A(m+w);return A(p(m,g,y+1))})});return o?b(0).then(m=>o(null,m),o):b(0)},md=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:i,pathExtExe:a}=ga(r,t),l=[];for(let c=0;c<o.length;c++){let b=o[c],p=/^".*"$/.test(b)?b.slice(1,-1):b,m=ha.join(p,r),g=!p&&/^\.[\\\/]/.test(r)?r.slice(0,2)+m:m;for(let y=0;y<i.length;y++){let A=g+i[y];try{if(ba.sync(A,{pathExt:a}))if(t.all)l.push(A);else return A}catch{}}}if(t.all&&l.length)return l;if(t.nothrow)return null;throw ya(r)};wa.exports=Sa;Sa.sync=md});var Ra=Q((Bp,Wo)=>{"use strict";var _a=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};Wo.exports=_a;Wo.exports.default=_a});var Aa=Q((Fp,Ca)=>{"use strict";var Ta=require("path"),pd=Ea(),hd=Ra();function Pa(r,t){let o=r.options.env||process.env,i=process.cwd(),a=r.options.cwd!=null,l=a&&process.chdir!==void 0&&!process.chdir.disabled;if(l)try{process.chdir(r.options.cwd)}catch{}let c;try{c=pd.sync(r.command,{path:o[hd({env:o})],pathExt:t?Ta.delimiter:void 0})}catch{}finally{l&&process.chdir(i)}return c&&(c=Ta.resolve(a?r.options.cwd:"",c)),c}function bd(r){return Pa(r)||Pa(r,!0)}Ca.exports=bd});var Ia=Q((Np,zo)=>{"use strict";var qo=/([()\][%!^"`<>&|;, *?])/g;function yd(r){return r=r.replace(qo,"^$1"),r}function gd(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(qo,"^$1"),t&&(r=r.replace(qo,"^$1")),r}zo.exports.command=yd;zo.exports.argument=gd});var Oa=Q((Mp,va)=>{"use strict";va.exports=/^#!(.*)/});var La=Q((Up,xa)=>{"use strict";var Sd=Oa();xa.exports=(r="")=>{let t=r.match(Sd);if(!t)return null;let[o,i]=t[0].replace(/#! ?/,"").split(" "),a=o.split("/").pop();return a==="env"?i:i?`${a} ${i}`:a}});var Da=Q((Wp,ka)=>{"use strict";var Go=require("fs"),wd=La();function Ed(r){let o=Buffer.alloc(150),i;try{i=Go.openSync(r,"r"),Go.readSync(i,o,0,150,0),Go.closeSync(i)}catch{}return wd(o.toString())}ka.exports=Ed});var Ma=Q((qp,Na)=>{"use strict";var _d=require("path"),Ba=Aa(),Fa=Ia(),Rd=Da(),Td=process.platform==="win32",Pd=/\.(?:com|exe)$/i,Cd=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Ad(r){r.file=Ba(r);let t=r.file&&Rd(r.file);return t?(r.args.unshift(r.file),r.command=t,Ba(r)):r.file}function Id(r){if(!Td)return r;let t=Ad(r),o=!Pd.test(t);if(r.options.forceShell||o){let i=Cd.test(t);r.command=_d.normalize(r.command),r.command=Fa.command(r.command),r.args=r.args.map(l=>Fa.argument(l,i));let a=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${a}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function vd(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let i={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?i:Id(i)}Na.exports=vd});var qa=Q((zp,Wa)=>{"use strict";var Ho=process.platform==="win32";function $o(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function Od(r,t){if(!Ho)return;let o=r.emit;r.emit=function(i,a){if(i==="exit"){let l=Ua(a,t,"spawn");if(l)return o.call(r,"error",l)}return o.apply(r,arguments)}}function Ua(r,t){return Ho&&r===1&&!t.file?$o(t.original,"spawn"):null}function xd(r,t){return Ho&&r===1&&!t.file?$o(t.original,"spawnSync"):null}Wa.exports={hookChildProcess:Od,verifyENOENT:Ua,verifyENOENTSync:xd,notFoundError:$o}});var Ha=Q((Gp,er)=>{"use strict";var za=require("child_process"),Vo=Ma(),jo=qa();function Ga(r,t,o){let i=Vo(r,t,o),a=za.spawn(i.command,i.args,i.options);return jo.hookChildProcess(a,i),a}function Ld(r,t,o){let i=Vo(r,t,o),a=za.spawnSync(i.command,i.args,i.options);return a.error=a.error||jo.verifyENOENTSync(a.status,i),a}er.exports=Ga;er.exports.spawn=Ga;er.exports.sync=Ld;er.exports._parse=Vo;er.exports._enoent=jo});var nl=Q((lh,Dn)=>{Dn.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Dn.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Dn.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var ll=Q((uh,or)=>{var j=global.process,Lt=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Lt(j)?(ol=require("assert"),rr=nl(),il=/^win/i.test(j.platform),Ir=require("events"),typeof Ir!="function"&&(Ir=Ir.EventEmitter),j.__signal_exit_emitter__?ee=j.__signal_exit_emitter__:(ee=j.__signal_exit_emitter__=new Ir,ee.count=0,ee.emitted={}),ee.infinite||(ee.setMaxListeners(1/0),ee.infinite=!0),or.exports=function(r,t){if(!Lt(global.process))return function(){};ol.equal(typeof r,"function","a callback must be provided for exit handler"),nr===!1&&Zo();var o="exit";t&&t.alwaysLast&&(o="afterexit");var i=function(){ee.removeListener(o,r),ee.listeners("exit").length===0&&ee.listeners("afterexit").length===0&&Bn()};return ee.on(o,r),i},Bn=function(){!nr||!Lt(global.process)||(nr=!1,rr.forEach(function(t){try{j.removeListener(t,Fn[t])}catch{}}),j.emit=Nn,j.reallyExit=Xo,ee.count-=1)},or.exports.unload=Bn,kt=function(t,o,i){ee.emitted[t]||(ee.emitted[t]=!0,ee.emit(t,o,i))},Fn={},rr.forEach(function(r){Fn[r]=function(){if(Lt(global.process)){var o=j.listeners(r);o.length===ee.count&&(Bn(),kt("exit",null,r),kt("afterexit",null,r),il&&r==="SIGHUP"&&(r="SIGINT"),j.kill(j.pid,r))}}}),or.exports.signals=function(){return rr},nr=!1,Zo=function(){nr||!Lt(global.process)||(nr=!0,ee.count+=1,rr=rr.filter(function(t){try{return j.on(t,Fn[t]),!0}catch{return!1}}),j.emit=al,j.reallyExit=sl)},or.exports.load=Zo,Xo=j.reallyExit,sl=function(t){Lt(global.process)&&(j.exitCode=t||0,kt("exit",j.exitCode,null),kt("afterexit",j.exitCode,null),Xo.call(j,j.exitCode))},Nn=j.emit,al=function(t,o){if(t==="exit"&&Lt(global.process)){o!==void 0&&(j.exitCode=o);var i=Nn.apply(this,arguments);return kt("exit",j.exitCode,null),kt("afterexit",j.exitCode,null),i}else return Nn.apply(this,arguments)}):or.exports=function(){return function(){}};var ol,rr,il,Ir,ee,Bn,kt,Fn,nr,Zo,Xo,sl,Nn,al});var yl=Q((dh,bl)=>{"use strict";var{PassThrough:rm}=require("stream");bl.exports=r=>{r={...r};let{array:t}=r,{encoding:o}=r,i=o==="buffer",a=!1;t?a=!(o||i):o=o||"utf8",i&&(o=null);let l=new rm({objectMode:a});o&&l.setEncoding(o);let c=0,b=[];return l.on("data",p=>{b.push(p),a?c=b.length:c+=p.length}),l.getBufferedValue=()=>t?b:i?Buffer.concat(b,c):b.join(""),l.getBufferedLength=()=>c,l}});var gl=Q((mh,vr)=>{"use strict";var{constants:nm}=require("buffer"),om=require("stream"),{promisify:im}=require("util"),sm=yl(),am=im(om.pipeline),Mn=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function ei(r,t){if(!r)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,i=sm(t);return await new Promise((a,l)=>{let c=b=>{b&&i.getBufferedLength()<=nm.MAX_LENGTH&&(b.bufferedData=i.getBufferedValue()),l(b)};(async()=>{try{await am(r,i),a()}catch(b){c(b)}})(),i.on("data",()=>{i.getBufferedLength()>o&&c(new Mn)})}),i.getBufferedValue()}vr.exports=ei;vr.exports.buffer=(r,t)=>ei(r,{...t,encoding:"buffer"});vr.exports.array=(r,t)=>ei(r,{...t,array:!0});vr.exports.MaxBufferError=Mn});var wl=Q((ph,Sl)=>{"use strict";var{PassThrough:lm}=require("stream");Sl.exports=function(){var r=[],t=new lm({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=i,t.on("unpipe",a),Array.prototype.slice.call(arguments).forEach(o),t;function o(l){return Array.isArray(l)?(l.forEach(o),this):(r.push(l),l.once("end",a.bind(null,l)),l.once("error",t.emit.bind(t,"error")),l.pipe(t,{end:!1}),this)}function i(){return r.length==0}function a(l){r=r.filter(function(c){return c!==l}),!r.length&&t.readable&&t.end()}}});var Hl=Q((jh,Gl)=>{var Te=require("fs"),Sm=require("util"),sr=require("path"),hi=require("events"),Ul=require("zlib"),zl=require("stream"),E={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSIGFIRST:80,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,MAXFILECOMMENT:65535,ENDL64HDR:20,ENDL64SIG:117853008,ENDL64SIGFIRST:80,ENDL64OFS:8,END64HDR:56,END64SIG:101075792,END64SIGFIRST:80,END64SUB:24,END64TOT:32,END64SIZ:40,END64OFF:48,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FLG_ENTRY_ENC:1,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535},bt=function(r){let t,o,i,a,l,c,p=this,m=r.storeEntries!==!1?{}:null,g=r.file,y=r.nameEncoding?new TextDecoder(r.nameEncoding):null;A();function A(){r.fd?(t=r.fd,I()):Te.open(g,"r",(S,_)=>{if(S)return p.emit("error",S);t=_,I()})}function I(){Te.fstat(t,(S,_)=>{if(S)return p.emit("error",S);o=_.size,i=r.chunkSize||Math.round(o/1e3),i=Math.max(Math.min(i,Math.min(128*1024,o)),Math.min(1024,o)),W()})}function w(S,_){if(S||!_)return p.emit("error",S||new Error("Archive read error"));let P=a.lastPos,T=P-a.win.position,U=a.win.buffer,N=a.minPos;for(;--P>=N&&--T>=0;)if(U.length-T>=4&&U[T]===a.firstByte&&U.readUInt32LE(T)===a.sig){a.lastBufferPosition=T,a.lastBytesRead=_,a.complete();return}if(P===N)return p.emit("error",new Error("Bad archive"));if(a.lastPos=P+1,a.chunkSize*=2,P<=N)return p.emit("error",new Error("Bad archive"));let V=Math.min(a.chunkSize,P-N);a.win.expandLeft(V,w)}function W(){let S=Math.min(E.ENDHDR+E.MAXFILECOMMENT,o);a={win:new qn(t),totalReadLength:S,minPos:o-S,lastPos:o,chunkSize:Math.min(1024,i),firstByte:E.ENDSIGFIRST,sig:E.ENDSIG,complete:x},a.win.read(o-a.chunkSize,a.chunkSize,w)}function x(){let S=a.win.buffer,_=a.lastBufferPosition;try{l=new ui,l.read(S.slice(_,_+E.ENDHDR)),l.headerOffset=a.win.position+_,l.commentLength?p.comment=S.slice(_+E.ENDHDR,_+E.ENDHDR+l.commentLength).toString():p.comment=null,p.entriesCount=l.volumeEntries,p.centralDirectory=l,l.volumeEntries===E.EF_ZIP64_OR_16&&l.totalEntries===E.EF_ZIP64_OR_16||l.size===E.EF_ZIP64_OR_32||l.offset===E.EF_ZIP64_OR_32?D():(a={},k())}catch(P){p.emit("error",P)}}function D(){let S=E.ENDL64HDR;a.lastBufferPosition>S?(a.lastBufferPosition-=S,q()):(a={win:a.win,totalReadLength:S,minPos:a.win.position-S,lastPos:a.win.position,chunkSize:a.chunkSize,firstByte:E.ENDL64SIGFIRST,sig:E.ENDL64SIG,complete:q},a.win.read(a.lastPos-a.chunkSize,a.chunkSize,w))}function q(){let S=a.win.buffer,_=new ci;_.read(S.slice(a.lastBufferPosition,a.lastBufferPosition+E.ENDL64HDR));let P=o-_.headerOffset;a={win:a.win,totalReadLength:P,minPos:_.headerOffset,lastPos:a.lastPos,chunkSize:a.chunkSize,firstByte:E.END64SIGFIRST,sig:E.END64SIG,complete:X},a.win.read(o-a.chunkSize,a.chunkSize,w)}function X(){let S=a.win.buffer,_=new fi;_.read(S.slice(a.lastBufferPosition,a.lastBufferPosition+E.END64HDR)),p.centralDirectory.volumeEntries=_.volumeEntries,p.centralDirectory.totalEntries=_.totalEntries,p.centralDirectory.size=_.size,p.centralDirectory.offset=_.offset,p.entriesCount=_.volumeEntries,a={},k()}function k(){a={win:new qn(t),pos:l.offset,chunkSize:i,entriesLeft:l.volumeEntries},a.win.read(a.pos,Math.min(i,o-a.pos),$)}function $(S,_){if(S||!_)return p.emit("error",S||new Error("Entries read error"));let P=a.pos-a.win.position,T=a.entry,U=a.win.buffer,N=U.length;try{for(;a.entriesLeft>0;){T||(T=new di,T.readHeader(U,P),T.headerOffset=a.win.position+P,a.entry=T,a.pos+=E.CENHDR,P+=E.CENHDR);let V=T.fnameLen+T.extraLen+T.comLen,K=V+(a.entriesLeft>1?E.CENHDR:0);if(N-P<K){a.win.moveRight(i,$,P),a.move=!0;return}T.read(U,P,y),r.skipEntryNameValidation||T.validateName(),m&&(m[T.name]=T),p.emit("entry",T),a.entry=T=null,a.entriesLeft--,a.pos+=V,P+=V}p.emit("ready")}catch(V){p.emit("error",V)}}function B(){if(!m)throw new Error("storeEntries disabled")}Object.defineProperty(this,"ready",{get(){return!1}}),this.entry=function(S){return B(),m[S]},this.entries=function(){return B(),m},this.stream=function(S,_){return this.openEntry(S,(P,T)=>{if(P)return _(P);let U=ue(T),N=new mi(t,U,T.compressedSize);if(T.method!==E.STORED)if(T.method===E.DEFLATED)N=N.pipe(Ul.createInflateRaw());else return _(new Error("Unknown compression method: "+T.method));wt(T)&&(N=N.pipe(new pi(N,T.crc,T.size))),_(null,N)},!1)},this.entryDataSync=function(S){let _=null;if(this.openEntry(S,(T,U)=>{_=T,S=U},!0),_)throw _;let P=Buffer.alloc(S.compressedSize);if(new pt(t,P,0,S.compressedSize,ue(S),T=>{_=T}).read(!0),_)throw _;if(S.method!==E.STORED)if(S.method===E.DEFLATED||S.method===E.ENHANCED_DEFLATED)P=Ul.inflateRawSync(P);else throw new Error("Unknown compression method: "+S.method);if(P.length!==S.size)throw new Error("Invalid size");return wt(S)&&new zn(S.crc,S.size).data(P),P},this.openEntry=function(S,_,P){if(typeof S=="string"&&(B(),S=m[S],!S))return _(new Error("Entry not found"));if(!S.isFile)return _(new Error("Entry is not file"));if(!t)return _(new Error("Archive closed"));let T=Buffer.alloc(E.LOCHDR);new pt(t,T,0,T.length,S.offset,U=>{if(U)return _(U);let N;try{S.readDataHeader(T),S.encrypted&&(N=new Error("Entry encrypted"))}catch(V){N=V}_(N,S)}).read(P)};function ue(S){return S.offset+E.LOCHDR+S.fnameLen+S.extraLen}function wt(S){return(S.flags&8)!==8}function Et(S,_,P){p.stream(S,(T,U)=>{if(T)P(T);else{let N,V;U.on("error",K=>{V=K,N&&(U.unpipe(N),N.close(()=>{P(K)}))}),Te.open(_,"w",(K,ce)=>{if(K)return P(K);if(V){Te.close(t,()=>{P(V)});return}N=Te.createWriteStream(_,{fd:ce}),N.on("finish",()=>{p.emit("extract",S,_),V||P()}),U.pipe(N)})}})}function Wt(S,_,P){if(!_.length)return P();let T=_.shift();T=sr.join(S,sr.join(...T)),Te.mkdir(T,{recursive:!0},U=>{if(U&&U.code!=="EEXIST")return P(U);Wt(S,_,P)})}function _t(S,_,P,T,U){if(!P.length)return T(null,U);let N=P.shift(),V=sr.join(S,N.name.replace(_,""));Et(N,V,K=>{if(K)return T(K,U);_t(S,_,P,T,U+1)})}this.extract=function(S,_,P){let T=S||"";if(typeof S=="string"&&(S=this.entry(S),S?T=S.name:T.length&&T[T.length-1]!=="/"&&(T+="/")),!S||S.isDirectory){let U=[],N=[],V={};for(let K in m)if(Object.prototype.hasOwnProperty.call(m,K)&&K.lastIndexOf(T,0)===0){let ce=K.replace(T,""),mr=m[K];if(mr.isFile&&(U.push(mr),ce=sr.dirname(ce)),ce&&!V[ce]&&ce!=="."){V[ce]=!0;let Fe=ce.split("/").filter(Rt=>Rt);for(Fe.length&&N.push(Fe);Fe.length>1;){Fe=Fe.slice(0,Fe.length-1);let Rt=Fe.join("/");if(V[Rt]||Rt===".")break;V[Rt]=!0,N.push(Fe)}}}N.sort((K,ce)=>K.length-ce.length),N.length?Wt(_,N,K=>{K?P(K):_t(_,T,U,P,0)}):_t(_,T,U,P,0)}else Te.stat(_,(U,N)=>{N&&N.isDirectory()?Et(S,sr.join(_,sr.basename(S.name)),P):Et(S,_,P)})},this.close=function(S){c||!t?(c=!0,S&&S()):(c=!0,Te.close(t,_=>{t=null,S&&S(_)}))};let Zr=hi.EventEmitter.prototype.emit;this.emit=function(...S){if(!c)return Zr.call(this,...S)}};bt.setFs=function(r){Te=r};bt.debugLog=(...r)=>{bt.debug&&console.log(...r)};Sm.inherits(bt,hi.EventEmitter);var mt=Symbol("zip");bt.async=class extends hi.EventEmitter{constructor(t){super();let o=new bt(t);o.on("entry",i=>this.emit("entry",i)),o.on("extract",(i,a)=>this.emit("extract",i,a)),this[mt]=new Promise((i,a)=>{o.on("ready",()=>{o.removeListener("error",a),i(o)}),o.on("error",a)})}get entriesCount(){return this[mt].then(t=>t.entriesCount)}get comment(){return this[mt].then(t=>t.comment)}async entry(t){return(await this[mt]).entry(t)}async entries(){return(await this[mt]).entries()}async stream(t){let o=await this[mt];return new Promise((i,a)=>{o.stream(t,(l,c)=>{l?a(l):i(c)})})}async entryData(t){let o=await this.stream(t);return new Promise((i,a)=>{let l=[];o.on("data",c=>l.push(c)),o.on("end",()=>{i(Buffer.concat(l))}),o.on("error",c=>{o.removeAllListeners("end"),a(c)})})}async extract(t,o){let i=await this[mt];return new Promise((a,l)=>{i.extract(t,o,(c,b)=>{c?l(c):a(b)})})}async close(){let t=await this[mt];return new Promise((o,i)=>{t.close(a=>{a?i(a):o()})})}};var ui=class{read(t){if(t.length!==E.ENDHDR||t.readUInt32LE(0)!==E.ENDSIG)throw new Error("Invalid central directory");this.volumeEntries=t.readUInt16LE(E.ENDSUB),this.totalEntries=t.readUInt16LE(E.ENDTOT),this.size=t.readUInt32LE(E.ENDSIZ),this.offset=t.readUInt32LE(E.ENDOFF),this.commentLength=t.readUInt16LE(E.ENDCOM)}},ci=class{read(t){if(t.length!==E.ENDL64HDR||t.readUInt32LE(0)!==E.ENDL64SIG)throw new Error("Invalid zip64 central directory locator");this.headerOffset=ht(t,E.ENDSUB)}},fi=class{read(t){if(t.length!==E.END64HDR||t.readUInt32LE(0)!==E.END64SIG)throw new Error("Invalid central directory");this.volumeEntries=ht(t,E.END64SUB),this.totalEntries=ht(t,E.END64TOT),this.size=ht(t,E.END64SIZ),this.offset=ht(t,E.END64OFF)}},di=class{readHeader(t,o){if(t.length<o+E.CENHDR||t.readUInt32LE(o)!==E.CENSIG)throw new Error("Invalid entry header");this.verMade=t.readUInt16LE(o+E.CENVEM),this.version=t.readUInt16LE(o+E.CENVER),this.flags=t.readUInt16LE(o+E.CENFLG),this.method=t.readUInt16LE(o+E.CENHOW);let i=t.readUInt16LE(o+E.CENTIM),a=t.readUInt16LE(o+E.CENTIM+2);this.time=Wl(i,a),this.crc=t.readUInt32LE(o+E.CENCRC),this.compressedSize=t.readUInt32LE(o+E.CENSIZ),this.size=t.readUInt32LE(o+E.CENLEN),this.fnameLen=t.readUInt16LE(o+E.CENNAM),this.extraLen=t.readUInt16LE(o+E.CENEXT),this.comLen=t.readUInt16LE(o+E.CENCOM),this.diskStart=t.readUInt16LE(o+E.CENDSK),this.inattr=t.readUInt16LE(o+E.CENATT),this.attr=t.readUInt32LE(o+E.CENATX),this.offset=t.readUInt32LE(o+E.CENOFF)}readDataHeader(t){if(t.readUInt32LE(0)!==E.LOCSIG)throw new Error("Invalid local header");this.version=t.readUInt16LE(E.LOCVER),this.flags=t.readUInt16LE(E.LOCFLG),this.method=t.readUInt16LE(E.LOCHOW);let o=t.readUInt16LE(E.LOCTIM),i=t.readUInt16LE(E.LOCTIM+2);this.time=Wl(o,i),this.crc=t.readUInt32LE(E.LOCCRC)||this.crc;let a=t.readUInt32LE(E.LOCSIZ);a&&a!==E.EF_ZIP64_OR_32&&(this.compressedSize=a);let l=t.readUInt32LE(E.LOCLEN);l&&l!==E.EF_ZIP64_OR_32&&(this.size=l),this.fnameLen=t.readUInt16LE(E.LOCNAM),this.extraLen=t.readUInt16LE(E.LOCEXT)}read(t,o,i){let a=t.slice(o,o+=this.fnameLen);this.name=i?i.decode(new Uint8Array(a)):a.toString("utf8");let l=t[o-1];this.isDirectory=l===47||l===92,this.extraLen&&(this.readExtra(t,o),o+=this.extraLen),this.comment=this.comLen?t.slice(o,o+this.comLen).toString():null}validateName(){if(/\\|^\w+:|^\/|(^|\/)\.\.(\/|$)/.test(this.name))throw new Error("Malicious entry: "+this.name)}readExtra(t,o){let i,a,l=o+this.extraLen;for(;o<l;)i=t.readUInt16LE(o),o+=2,a=t.readUInt16LE(o),o+=2,E.ID_ZIP64===i&&this.parseZip64Extra(t,o,a),o+=a}parseZip64Extra(t,o,i){i>=8&&this.size===E.EF_ZIP64_OR_32&&(this.size=ht(t,o),o+=8,i-=8),i>=8&&this.compressedSize===E.EF_ZIP64_OR_32&&(this.compressedSize=ht(t,o),o+=8,i-=8),i>=8&&this.offset===E.EF_ZIP64_OR_32&&(this.offset=ht(t,o),o+=8,i-=8),i>=4&&this.diskStart===E.EF_ZIP64_OR_16&&(this.diskStart=t.readUInt32LE(o))}get encrypted(){return(this.flags&E.FLG_ENTRY_ENC)===E.FLG_ENTRY_ENC}get isFile(){return!this.isDirectory}},pt=class{constructor(t,o,i,a,l,c){this.fd=t,this.buffer=o,this.offset=i,this.length=a,this.position=l,this.callback=c,this.bytesRead=0,this.waiting=!1}read(t){bt.debugLog("read",this.position,this.bytesRead,this.length,this.offset),this.waiting=!0;let o;if(t){let i=0;try{i=Te.readSync(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead)}catch(a){o=a}this.readCallback(t,o,o?i:null)}else Te.read(this.fd,this.buffer,this.offset+this.bytesRead,this.length-this.bytesRead,this.position+this.bytesRead,this.readCallback.bind(this,t))}readCallback(t,o,i){if(typeof i=="number"&&(this.bytesRead+=i),o||!i||this.bytesRead===this.length)return this.waiting=!1,this.callback(o,this.bytesRead);this.read(t)}},qn=class{constructor(t){this.position=0,this.buffer=Buffer.alloc(0),this.fd=t,this.fsOp=null}checkOp(){if(this.fsOp&&this.fsOp.waiting)throw new Error("Operation in progress")}read(t,o,i){this.checkOp(),this.buffer.length<o&&(this.buffer=Buffer.alloc(o)),this.position=t,this.fsOp=new pt(this.fd,this.buffer,0,o,this.position,i).read()}expandLeft(t,o){this.checkOp(),this.buffer=Buffer.concat([Buffer.alloc(t),this.buffer]),this.position-=t,this.position<0&&(this.position=0),this.fsOp=new pt(this.fd,this.buffer,0,t,this.position,o).read()}expandRight(t,o){this.checkOp();let i=this.buffer.length;this.buffer=Buffer.concat([this.buffer,Buffer.alloc(t)]),this.fsOp=new pt(this.fd,this.buffer,i,t,this.position+i,o).read()}moveRight(t,o,i){this.checkOp(),i?this.buffer.copy(this.buffer,0,i):i=0,this.position+=i,this.fsOp=new pt(this.fd,this.buffer,this.buffer.length-i,i,this.position+this.buffer.length-i,o).read()}},mi=class extends zl.Readable{constructor(t,o,i){super(),this.fd=t,this.offset=o,this.length=i,this.pos=0,this.readCallback=this.readCallback.bind(this)}_read(t){let o=Buffer.alloc(Math.min(t,this.length-this.pos));o.length?Te.read(this.fd,o,0,o.length,this.offset+this.pos,this.readCallback):this.push(null)}readCallback(t,o,i){this.pos+=o,t?(this.emit("error",t),this.push(null)):o?(o!==i.length&&(i=i.slice(0,o)),this.push(i)):this.push(null)}},pi=class extends zl.Transform{constructor(t,o,i){super(),this.verify=new zn(o,i),t.on("error",a=>{this.emit("error",a)})}_transform(t,o,i){let a;try{this.verify.data(t)}catch(l){a=l}i(a,t)}},zn=class r{constructor(t,o){this.crc=t,this.size=o,this.state={crc:-1,size:0}}data(t){let o=r.getCrcTable(),i=this.state.crc,a=0,l=t.length;for(;--l>=0;)i=o[(i^t[a++])&255]^i>>>8;if(this.state.crc=i,this.state.size+=t.length,this.state.size>=this.size){let c=Buffer.alloc(4);if(c.writeInt32LE(~this.state.crc&4294967295,0),i=c.readUInt32LE(0),i!==this.crc)throw new Error("Invalid CRC");if(this.state.size!==this.size)throw new Error("Invalid size")}}static getCrcTable(){let t=r.crcTable;if(!t){r.crcTable=t=[];let o=Buffer.alloc(4);for(let i=0;i<256;i++){let a=i;for(let l=8;--l>=0;)a&1?a=3988292384^a>>>1:a=a>>>1;a<0&&(o.writeInt32LE(a,0),a=o.readUInt32LE(0)),t[i]=a}}return t}};function Wl(r,t){let o=ql(r,16),i=ql(t,16),a={h:parseInt(o.slice(0,5).join(""),2),m:parseInt(o.slice(5,11).join(""),2),s:parseInt(o.slice(11,16).join(""),2)*2,Y:parseInt(i.slice(0,7).join(""),2)+1980,M:parseInt(i.slice(7,11).join(""),2),D:parseInt(i.slice(11,16).join(""),2)},l=[a.Y,a.M,a.D].join("-")+" "+[a.h,a.m,a.s].join(":")+" GMT+0";return new Date(l).getTime()}function ql(r,t){let o=(r>>>0).toString(2);for(;o.length<t;)o="0"+o;return o.split("")}function ht(r,t){return r.readUInt32LE(t+4)*4294967296+r.readUInt32LE(t)}Gl.exports=bt});var ru=Q((Hn,tu)=>{(function(r,t){typeof Hn=="object"&&typeof tu<"u"?t(Hn):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Hn,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(e){return typeof e=="object"&&e!==null||typeof e=="function"}let a=o;function l(e,n){try{Object.defineProperty(e,"name",{value:n,configurable:!0})}catch{}}let c=Promise,b=Promise.prototype.then,p=Promise.reject.bind(c);function m(e){return new c(e)}function g(e){return m(n=>n(e))}function y(e){return p(e)}function A(e,n,s){return b.call(e,n,s)}function I(e,n,s){A(A(e,n,s),void 0,a)}function w(e,n){I(e,n)}function W(e,n){I(e,void 0,n)}function x(e,n,s){return A(e,n,s)}function D(e){A(e,void 0,a)}let q=e=>{if(typeof queueMicrotask=="function")q=queueMicrotask;else{let n=g(void 0);q=s=>A(n,s)}return q(e)};function X(e,n,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,s)}function k(e,n,s){try{return g(X(e,n,s))}catch(u){return y(u)}}let $=16384;class B{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let s=this._back,u=s;s._elements.length===$-1&&(u={_elements:[],_next:void 0}),s._elements.push(n),u!==s&&(this._back=u,s._next=u),++this._size}shift(){let n=this._front,s=n,u=this._cursor,f=u+1,d=n._elements,h=d[u];return f===$&&(s=n._next,f=0),--this._size,this._cursor=f,n!==s&&(this._front=s),d[u]=void 0,h}forEach(n){let s=this._cursor,u=this._front,f=u._elements;for(;(s!==f.length||u._next!==void 0)&&!(s===f.length&&(u=u._next,f=u._elements,s=0,f.length===0));)n(f[s]),++s}peek(){let n=this._front,s=this._cursor;return n._elements[s]}}let ue=t("[[AbortSteps]]"),wt=t("[[ErrorSteps]]"),Et=t("[[CancelSteps]]"),Wt=t("[[PullSteps]]"),_t=t("[[ReleaseSteps]]");function Zr(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?T(e):n._state==="closed"?N(e):U(e,n._storedError)}function S(e,n){let s=e._ownerReadableStream;return Oe(s,n)}function _(e){let n=e._ownerReadableStream;n._state==="readable"?V(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):K(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),n._readableStreamController[_t](),n._reader=void 0,e._ownerReadableStream=void 0}function P(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function T(e){e._closedPromise=m((n,s)=>{e._closedPromise_resolve=n,e._closedPromise_reject=s})}function U(e,n){T(e),V(e,n)}function N(e){T(e),ce(e)}function V(e,n){e._closedPromise_reject!==void 0&&(D(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function K(e,n){U(e,n)}function ce(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let mr=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Fe=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Rt(e){return typeof e=="object"||typeof e=="function"}function Ne(e,n){if(e!==void 0&&!Rt(e))throw new TypeError(`${n} is not an object.`)}function Ee(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function dc(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Ni(e,n){if(!dc(e))throw new TypeError(`${n} is not an object.`)}function qe(e,n,s){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${s}'.`)}function ao(e,n,s){if(e===void 0)throw new TypeError(`${n} is required in '${s}'.`)}function lo(e){return Number(e)}function Mi(e){return e===0?0:e}function mc(e){return Mi(Fe(e))}function uo(e,n){let u=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=Mi(f),!mr(f))throw new TypeError(`${n} is not a finite number`);if(f=mc(f),f<0||f>u)throw new TypeError(`${n} is outside the accepted range of 0 to ${u}, inclusive`);return!mr(f)||f===0?0:f}function co(e,n){if(!st(e))throw new TypeError(`${n} is not a ReadableStream.`)}function qt(e){return new et(e)}function Ui(e,n){e._reader._readRequests.push(n)}function fo(e,n,s){let f=e._reader._readRequests.shift();s?f._closeSteps():f._chunkSteps(n)}function Xr(e){return e._reader._readRequests.length}function Wi(e){let n=e._reader;return!(n===void 0||!tt(n))}class et{constructor(n){if(qe(n,1,"ReadableStreamDefaultReader"),co(n,"First parameter"),at(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");Zr(this,n),this._readRequests=new B}get closed(){return tt(this)?this._closedPromise:y(Jr("closed"))}cancel(n=void 0){return tt(this)?this._ownerReadableStream===void 0?y(P("cancel")):S(this,n):y(Jr("cancel"))}read(){if(!tt(this))return y(Jr("read"));if(this._ownerReadableStream===void 0)return y(P("read from"));let n,s,u=m((d,h)=>{n=d,s=h});return pr(this,{_chunkSteps:d=>n({value:d,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:d=>s(d)}),u}releaseLock(){if(!tt(this))throw Jr("releaseLock");this._ownerReadableStream!==void 0&&pc(this)}}Object.defineProperties(et.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),l(et.prototype.cancel,"cancel"),l(et.prototype.read,"read"),l(et.prototype.releaseLock,"releaseLock"),typeof t.toStringTag=="symbol"&&Object.defineProperty(et.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function tt(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof et}function pr(e,n){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?n._closeSteps():s._state==="errored"?n._errorSteps(s._storedError):s._readableStreamController[Wt](n)}function pc(e){_(e);let n=new TypeError("Reader was released");qi(e,n)}function qi(e,n){let s=e._readRequests;e._readRequests=new B,s.forEach(u=>{u._errorSteps(n)})}function Jr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let zi=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Gi{constructor(n,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=s}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?x(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let s=()=>this._returnSteps(n);return this._ongoingPromise?x(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader,s,u,f=m((h,R)=>{s=h,u=R});return pr(n,{_chunkSteps:h=>{this._ongoingPromise=void 0,q(()=>s({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,_(n),s({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,_(n),u(h)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let s=this._reader;if(!this._preventCancel){let u=S(s,n);return _(s),x(u,()=>({value:n,done:!0}))}return _(s),g({value:n,done:!0})}}let Hi={next(){return $i(this)?this._asyncIteratorImpl.next():y(Vi("next"))},return(e){return $i(this)?this._asyncIteratorImpl.return(e):y(Vi("return"))}};zi!==void 0&&Object.setPrototypeOf(Hi,zi);function hc(e,n){let s=qt(e),u=new Gi(s,n),f=Object.create(Hi);return f._asyncIteratorImpl=u,f}function $i(e){if(!i(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Gi}catch{return!1}}function Vi(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let ji=Number.isNaN||function(e){return e!==e};function hr(e){return e.slice()}function Yi(e,n,s,u,f){new Uint8Array(e).set(new Uint8Array(s,u,f),n)}let ze=e=>(typeof e.transfer=="function"?ze=n=>n.transfer():typeof structuredClone=="function"?ze=n=>structuredClone(n,{transfer:[n]}):ze=n=>n,ze(e)),rt=e=>(typeof e.detached=="boolean"?rt=n=>n.detached:rt=n=>n.byteLength===0,rt(e));function Ki(e,n,s){if(e.slice)return e.slice(n,s);let u=s-n,f=new ArrayBuffer(u);return Yi(f,0,e,n,u),f}function en(e,n){let s=e[n];if(s!=null){if(typeof s!="function")throw new TypeError(`${String(n)} is not a function`);return s}}function bc(e){let n={[t.iterator]:()=>e.iterator},s=async function*(){return yield*n}(),u=s.next;return{iterator:s,nextMethod:u,done:!1}}function Qi(e,n="sync",s){if(s===void 0)if(n==="async"){if(s=en(e,t.asyncIterator),s===void 0){let d=en(e,t.iterator),h=Qi(e,"sync",d);return bc(h)}}else s=en(e,t.iterator);if(s===void 0)throw new TypeError("The object is not iterable");let u=X(s,e,[]);if(!i(u))throw new TypeError("The iterator method must return an object");let f=u.next;return{iterator:u,nextMethod:f,done:!1}}function yc(e){let n=X(e.nextMethod,e.iterator,[]);if(!i(n))throw new TypeError("The iterator.next() method must return an object");return n}function gc(e){return!!e.done}function Sc(e){return e.value}function wc(e){return!(typeof e!="number"||ji(e)||e<0)}function Zi(e){let n=Ki(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function mo(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function po(e,n,s){if(!wc(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:s}),e._queueTotalSize+=s}function Ec(e){return e._queue.peek().value}function nt(e){e._queue=new B,e._queueTotalSize=0}function Xi(e){return e===DataView}function _c(e){return Xi(e.constructor)}function Rc(e){return Xi(e)?1:e.BYTES_PER_ELEMENT}class Tt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!ho(this))throw wo("view");return this._view}respond(n){if(!ho(this))throw wo("respond");if(qe(n,1,"respond"),n=uo(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(rt(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");on(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!ho(this))throw wo("respondWithNewView");if(qe(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(rt(n.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");sn(this._associatedReadableByteStreamController,n)}}Object.defineProperties(Tt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),l(Tt.prototype.respond,"respond"),l(Tt.prototype.respondWithNewView,"respondWithNewView"),typeof t.toStringTag=="symbol"&&Object.defineProperty(Tt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Ge{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Pt(this))throw yr("byobRequest");return So(this)}get desiredSize(){if(!Pt(this))throw yr("desiredSize");return ls(this)}close(){if(!Pt(this))throw yr("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);br(this)}enqueue(n){if(!Pt(this))throw yr("enqueue");if(qe(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);nn(this,n)}error(n=void 0){if(!Pt(this))throw yr("error");_e(this,n)}[Et](n){Ji(this),nt(this);let s=this._cancelAlgorithm(n);return rn(this),s}[Wt](n){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){as(this,n);return}let u=this._autoAllocateChunkSize;if(u!==void 0){let f;try{f=new ArrayBuffer(u)}catch(h){n._errorSteps(h);return}let d={buffer:f,bufferByteLength:u,byteOffset:0,byteLength:u,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}Ui(s,n),Ct(this)}[_t](){if(this._pendingPullIntos.length>0){let n=this._pendingPullIntos.peek();n.readerType="none",this._pendingPullIntos=new B,this._pendingPullIntos.push(n)}}}Object.defineProperties(Ge.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),l(Ge.prototype.close,"close"),l(Ge.prototype.enqueue,"enqueue"),l(Ge.prototype.error,"error"),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ge.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Pt(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Ge}function ho(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Tt}function Ct(e){if(!Ic(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();I(s,()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ct(e)),null),u=>(_e(e,u),null))}function Ji(e){yo(e),e._pendingPullIntos=new B}function bo(e,n){let s=!1;e._state==="closed"&&(s=!0);let u=es(n);n.readerType==="default"?fo(e,u,s):Dc(e,u,s)}function es(e){let n=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/s)}function tn(e,n,s,u){e._queue.push({buffer:n,byteOffset:s,byteLength:u}),e._queueTotalSize+=u}function ts(e,n,s,u){let f;try{f=Ki(n,s,s+u)}catch(d){throw _e(e,d),d}tn(e,f,0,u)}function rs(e,n){n.bytesFilled>0&&ts(e,n.buffer,n.byteOffset,n.bytesFilled),zt(e)}function ns(e,n){let s=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),u=n.bytesFilled+s,f=s,d=!1,h=u%n.elementSize,R=u-h;R>=n.minimumFill&&(f=R-n.bytesFilled,d=!0);let O=e._queue;for(;f>0;){let C=O.peek(),L=Math.min(f,C.byteLength),F=n.byteOffset+n.bytesFilled;Yi(n.buffer,F,C.buffer,C.byteOffset,L),C.byteLength===L?O.shift():(C.byteOffset+=L,C.byteLength-=L),e._queueTotalSize-=L,os(e,L,n),f-=L}return d}function os(e,n,s){s.bytesFilled+=n}function is(e){e._queueTotalSize===0&&e._closeRequested?(rn(e),Rr(e._controlledReadableByteStream)):Ct(e)}function yo(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function go(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();ns(e,n)&&(zt(e),bo(e._controlledReadableByteStream,n))}}function Tc(e){let n=e._controlledReadableByteStream._reader;for(;n._readRequests.length>0;){if(e._queueTotalSize===0)return;let s=n._readRequests.shift();as(e,s)}}function Pc(e,n,s,u){let f=e._controlledReadableByteStream,d=n.constructor,h=Rc(d),{byteOffset:R,byteLength:O}=n,C=s*h,L;try{L=ze(n.buffer)}catch(z){u._errorSteps(z);return}let F={buffer:L,bufferByteLength:L.byteLength,byteOffset:R,byteLength:O,bytesFilled:0,minimumFill:C,elementSize:h,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(F),fs(f,u);return}if(f._state==="closed"){let z=new d(F.buffer,F.byteOffset,0);u._closeSteps(z);return}if(e._queueTotalSize>0){if(ns(e,F)){let z=es(F);is(e),u._chunkSteps(z);return}if(e._closeRequested){let z=new TypeError("Insufficient bytes to fill elements in the given buffer");_e(e,z),u._errorSteps(z);return}}e._pendingPullIntos.push(F),fs(f,u),Ct(e)}function Cc(e,n){n.readerType==="none"&&zt(e);let s=e._controlledReadableByteStream;if(Eo(s))for(;ds(s)>0;){let u=zt(e);bo(s,u)}}function Ac(e,n,s){if(os(e,n,s),s.readerType==="none"){rs(e,s),go(e);return}if(s.bytesFilled<s.minimumFill)return;zt(e);let u=s.bytesFilled%s.elementSize;if(u>0){let f=s.byteOffset+s.bytesFilled;ts(e,s.buffer,f-u,u)}s.bytesFilled-=u,bo(e._controlledReadableByteStream,s),go(e)}function ss(e,n){let s=e._pendingPullIntos.peek();yo(e),e._controlledReadableByteStream._state==="closed"?Cc(e,s):Ac(e,n,s),Ct(e)}function zt(e){return e._pendingPullIntos.shift()}function Ic(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(Wi(n)&&Xr(n)>0||Eo(n)&&ds(n)>0||ls(e)>0)}function rn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function br(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){let s=e._pendingPullIntos.peek();if(s.bytesFilled%s.elementSize!==0){let u=new TypeError("Insufficient bytes to fill elements in the given buffer");throw _e(e,u),u}}rn(e),Rr(n)}}function nn(e,n){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let{buffer:u,byteOffset:f,byteLength:d}=n;if(rt(u))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let h=ze(u);if(e._pendingPullIntos.length>0){let R=e._pendingPullIntos.peek();if(rt(R.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");yo(e),R.buffer=ze(R.buffer),R.readerType==="none"&&rs(e,R)}if(Wi(s))if(Tc(e),Xr(s)===0)tn(e,h,f,d);else{e._pendingPullIntos.length>0&&zt(e);let R=new Uint8Array(h,f,d);fo(s,R,!1)}else Eo(s)?(tn(e,h,f,d),go(e)):tn(e,h,f,d);Ct(e)}function _e(e,n){let s=e._controlledReadableByteStream;s._state==="readable"&&(Ji(e),nt(e),rn(e),Fs(s,n))}function as(e,n){let s=e._queue.shift();e._queueTotalSize-=s.byteLength,is(e);let u=new Uint8Array(s.buffer,s.byteOffset,s.byteLength);n._chunkSteps(u)}function So(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),s=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),u=Object.create(Tt.prototype);Oc(u,e,s),e._byobRequest=u}return e._byobRequest}function ls(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function on(e,n){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+n>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=ze(s.buffer),ss(e,n)}function sn(e,n){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+n.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=n.byteLength;s.buffer=ze(n.buffer),ss(e,f)}function us(e,n,s,u,f,d,h){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,nt(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=d,n._pullAlgorithm=u,n._cancelAlgorithm=f,n._autoAllocateChunkSize=h,n._pendingPullIntos=new B,e._readableStreamController=n;let R=s();I(g(R),()=>(n._started=!0,Ct(n),null),O=>(_e(n,O),null))}function vc(e,n,s){let u=Object.create(Ge.prototype),f,d,h;n.start!==void 0?f=()=>n.start(u):f=()=>{},n.pull!==void 0?d=()=>n.pull(u):d=()=>g(void 0),n.cancel!==void 0?h=O=>n.cancel(O):h=()=>g(void 0);let R=n.autoAllocateChunkSize;if(R===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");us(e,u,f,d,h,s,R)}function Oc(e,n,s){e._associatedReadableByteStreamController=n,e._view=s}function wo(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function yr(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function xc(e,n){Ne(e,n);let s=e?.mode;return{mode:s===void 0?void 0:Lc(s,`${n} has member 'mode' that`)}}function Lc(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function kc(e,n){var s;Ne(e,n);let u=(s=e?.min)!==null&&s!==void 0?s:1;return{min:uo(u,`${n} has member 'min' that`)}}function cs(e){return new ot(e)}function fs(e,n){e._reader._readIntoRequests.push(n)}function Dc(e,n,s){let f=e._reader._readIntoRequests.shift();s?f._closeSteps(n):f._chunkSteps(n)}function ds(e){return e._reader._readIntoRequests.length}function Eo(e){let n=e._reader;return!(n===void 0||!At(n))}class ot{constructor(n){if(qe(n,1,"ReadableStreamBYOBReader"),co(n,"First parameter"),at(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Pt(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");Zr(this,n),this._readIntoRequests=new B}get closed(){return At(this)?this._closedPromise:y(an("closed"))}cancel(n=void 0){return At(this)?this._ownerReadableStream===void 0?y(P("cancel")):S(this,n):y(an("cancel"))}read(n,s={}){if(!At(this))return y(an("read"));if(!ArrayBuffer.isView(n))return y(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return y(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return y(new TypeError("view's buffer must have non-zero byteLength"));if(rt(n.buffer))return y(new TypeError("view's buffer has been detached"));let u;try{u=kc(s,"options")}catch(C){return y(C)}let f=u.min;if(f===0)return y(new TypeError("options.min must be greater than 0"));if(_c(n)){if(f>n.byteLength)return y(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(f>n.length)return y(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return y(P("read from"));let d,h,R=m((C,L)=>{d=C,h=L});return ms(this,n,f,{_chunkSteps:C=>d({value:C,done:!1}),_closeSteps:C=>d({value:C,done:!0}),_errorSteps:C=>h(C)}),R}releaseLock(){if(!At(this))throw an("releaseLock");this._ownerReadableStream!==void 0&&Bc(this)}}Object.defineProperties(ot.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),l(ot.prototype.cancel,"cancel"),l(ot.prototype.read,"read"),l(ot.prototype.releaseLock,"releaseLock"),typeof t.toStringTag=="symbol"&&Object.defineProperty(ot.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function At(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof ot}function ms(e,n,s,u){let f=e._ownerReadableStream;f._disturbed=!0,f._state==="errored"?u._errorSteps(f._storedError):Pc(f._readableStreamController,n,s,u)}function Bc(e){_(e);let n=new TypeError("Reader was released");ps(e,n)}function ps(e,n){let s=e._readIntoRequests;e._readIntoRequests=new B,s.forEach(u=>{u._errorSteps(n)})}function an(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function gr(e,n){let{highWaterMark:s}=e;if(s===void 0)return n;if(ji(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function ln(e){let{size:n}=e;return n||(()=>1)}function un(e,n){Ne(e,n);let s=e?.highWaterMark,u=e?.size;return{highWaterMark:s===void 0?void 0:lo(s),size:u===void 0?void 0:Fc(u,`${n} has member 'size' that`)}}function Fc(e,n){return Ee(e,n),s=>lo(e(s))}function Nc(e,n){Ne(e,n);let s=e?.abort,u=e?.close,f=e?.start,d=e?.type,h=e?.write;return{abort:s===void 0?void 0:Mc(s,e,`${n} has member 'abort' that`),close:u===void 0?void 0:Uc(u,e,`${n} has member 'close' that`),start:f===void 0?void 0:Wc(f,e,`${n} has member 'start' that`),write:h===void 0?void 0:qc(h,e,`${n} has member 'write' that`),type:d}}function Mc(e,n,s){return Ee(e,s),u=>k(e,n,[u])}function Uc(e,n,s){return Ee(e,s),()=>k(e,n,[])}function Wc(e,n,s){return Ee(e,s),u=>X(e,n,[u])}function qc(e,n,s){return Ee(e,s),(u,f)=>k(e,n,[u,f])}function hs(e,n){if(!Gt(e))throw new TypeError(`${n} is not a WritableStream.`)}function zc(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let Gc=typeof AbortController=="function";function Hc(){if(Gc)return new AbortController}class it{constructor(n={},s={}){n===void 0?n=null:Ni(n,"First parameter");let u=un(s,"Second parameter"),f=Nc(n,"First parameter");if(ys(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let h=ln(u),R=gr(u,1);of(this,f,R,h)}get locked(){if(!Gt(this))throw pn("locked");return Ht(this)}abort(n=void 0){return Gt(this)?Ht(this)?y(new TypeError("Cannot abort a stream that already has a writer")):cn(this,n):y(pn("abort"))}close(){return Gt(this)?Ht(this)?y(new TypeError("Cannot close a stream that already has a writer")):Me(this)?y(new TypeError("Cannot close an already-closing stream")):gs(this):y(pn("close"))}getWriter(){if(!Gt(this))throw pn("getWriter");return bs(this)}}Object.defineProperties(it.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),l(it.prototype.abort,"abort"),l(it.prototype.close,"close"),l(it.prototype.getWriter,"getWriter"),typeof t.toStringTag=="symbol"&&Object.defineProperty(it.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function bs(e){return new He(e)}function $c(e,n,s,u,f=1,d=()=>1){let h=Object.create(it.prototype);ys(h);let R=Object.create($t.prototype);return Ts(h,R,e,n,s,u,f,d),h}function ys(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new B,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Gt(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof it}function Ht(e){return e._writer!==void 0}function cn(e,n){var s;if(e._state==="closed"||e._state==="errored")return g(void 0);e._writableStreamController._abortReason=n,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort(n);let u=e._state;if(u==="closed"||u==="errored")return g(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;u==="erroring"&&(f=!0,n=void 0);let d=m((h,R)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:R,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=d,f||Ro(e,n),d}function gs(e){let n=e._state;if(n==="closed"||n==="errored")return y(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let s=m((f,d)=>{let h={_resolve:f,_reject:d};e._closeRequest=h}),u=e._writer;return u!==void 0&&e._backpressure&&n==="writable"&&xo(u),sf(e._writableStreamController),s}function Vc(e){return m((s,u)=>{let f={_resolve:s,_reject:u};e._writeRequests.push(f)})}function _o(e,n){if(e._state==="writable"){Ro(e,n);return}To(e)}function Ro(e,n){let s=e._writableStreamController;e._state="erroring",e._storedError=n;let u=e._writer;u!==void 0&&ws(u,n),!Zc(e)&&s._started&&To(e)}function To(e){e._state="errored",e._writableStreamController[wt]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new B,e._pendingAbortRequest===void 0){fn(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(n),fn(e);return}let u=e._writableStreamController[ue](s._reason);I(u,()=>(s._resolve(),fn(e),null),f=>(s._reject(f),fn(e),null))}function jc(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Yc(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,_o(e,n)}function Kc(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&Is(s)}function Qc(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),_o(e,n)}function Me(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Zc(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Xc(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Jc(e){e._inFlightWriteRequest=e._writeRequests.shift()}function fn(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&vo(n,e._storedError)}function Po(e,n){let s=e._writer;s!==void 0&&n!==e._backpressure&&(n?mf(s):xo(s)),e._backpressure=n}class He{constructor(n){if(qe(n,1,"WritableStreamDefaultWriter"),hs(n,"First parameter"),Ht(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let s=n._state;if(s==="writable")!Me(n)&&n._backpressure?bn(this):vs(this),hn(this);else if(s==="erroring")Oo(this,n._storedError),hn(this);else if(s==="closed")vs(this),ff(this);else{let u=n._storedError;Oo(this,u),As(this,u)}}get closed(){return It(this)?this._closedPromise:y(vt("closed"))}get desiredSize(){if(!It(this))throw vt("desiredSize");if(this._ownerWritableStream===void 0)throw wr("desiredSize");return nf(this)}get ready(){return It(this)?this._readyPromise:y(vt("ready"))}abort(n=void 0){return It(this)?this._ownerWritableStream===void 0?y(wr("abort")):ef(this,n):y(vt("abort"))}close(){if(!It(this))return y(vt("close"));let n=this._ownerWritableStream;return n===void 0?y(wr("close")):Me(n)?y(new TypeError("Cannot close an already-closing stream")):Ss(this)}releaseLock(){if(!It(this))throw vt("releaseLock");this._ownerWritableStream!==void 0&&Es(this)}write(n=void 0){return It(this)?this._ownerWritableStream===void 0?y(wr("write to")):_s(this,n):y(vt("write"))}}Object.defineProperties(He.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),l(He.prototype.abort,"abort"),l(He.prototype.close,"close"),l(He.prototype.releaseLock,"releaseLock"),l(He.prototype.write,"write"),typeof t.toStringTag=="symbol"&&Object.defineProperty(He.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function It(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof He}function ef(e,n){let s=e._ownerWritableStream;return cn(s,n)}function Ss(e){let n=e._ownerWritableStream;return gs(n)}function tf(e){let n=e._ownerWritableStream,s=n._state;return Me(n)||s==="closed"?g(void 0):s==="errored"?y(n._storedError):Ss(e)}function rf(e,n){e._closedPromiseState==="pending"?vo(e,n):df(e,n)}function ws(e,n){e._readyPromiseState==="pending"?Os(e,n):pf(e,n)}function nf(e){let n=e._ownerWritableStream,s=n._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:Ps(n._writableStreamController)}function Es(e){let n=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ws(e,s),rf(e,s),n._writer=void 0,e._ownerWritableStream=void 0}function _s(e,n){let s=e._ownerWritableStream,u=s._writableStreamController,f=af(u,n);if(s!==e._ownerWritableStream)return y(wr("write to"));let d=s._state;if(d==="errored")return y(s._storedError);if(Me(s)||d==="closed")return y(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return y(s._storedError);let h=Vc(s);return lf(u,n,f),h}let Rs={};class $t{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Co(this))throw Io("abortReason");return this._abortReason}get signal(){if(!Co(this))throw Io("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!Co(this))throw Io("error");this._controlledWritableStream._state==="writable"&&Cs(this,n)}[ue](n){let s=this._abortAlgorithm(n);return dn(this),s}[wt](){nt(this)}}Object.defineProperties($t.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty($t.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Co(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof $t}function Ts(e,n,s,u,f,d,h,R){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,nt(n),n._abortReason=void 0,n._abortController=Hc(),n._started=!1,n._strategySizeAlgorithm=R,n._strategyHWM=h,n._writeAlgorithm=u,n._closeAlgorithm=f,n._abortAlgorithm=d;let O=Ao(n);Po(e,O);let C=s(),L=g(C);I(L,()=>(n._started=!0,mn(n),null),F=>(n._started=!0,_o(e,F),null))}function of(e,n,s,u){let f=Object.create($t.prototype),d,h,R,O;n.start!==void 0?d=()=>n.start(f):d=()=>{},n.write!==void 0?h=C=>n.write(C,f):h=()=>g(void 0),n.close!==void 0?R=()=>n.close():R=()=>g(void 0),n.abort!==void 0?O=C=>n.abort(C):O=()=>g(void 0),Ts(e,f,d,h,R,O,s,u)}function dn(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function sf(e){po(e,Rs,0),mn(e)}function af(e,n){try{return e._strategySizeAlgorithm(n)}catch(s){return Sr(e,s),1}}function Ps(e){return e._strategyHWM-e._queueTotalSize}function lf(e,n,s){try{po(e,n,s)}catch(f){Sr(e,f);return}let u=e._controlledWritableStream;if(!Me(u)&&u._state==="writable"){let f=Ao(e);Po(u,f)}mn(e)}function mn(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){To(n);return}if(e._queue.length===0)return;let u=Ec(e);u===Rs?uf(e):cf(e,u)}function Sr(e,n){e._controlledWritableStream._state==="writable"&&Cs(e,n)}function uf(e){let n=e._controlledWritableStream;Xc(n),mo(e);let s=e._closeAlgorithm();dn(e),I(s,()=>(Kc(n),null),u=>(Qc(n,u),null))}function cf(e,n){let s=e._controlledWritableStream;Jc(s);let u=e._writeAlgorithm(n);I(u,()=>{jc(s);let f=s._state;if(mo(e),!Me(s)&&f==="writable"){let d=Ao(e);Po(s,d)}return mn(e),null},f=>(s._state==="writable"&&dn(e),Yc(s,f),null))}function Ao(e){return Ps(e)<=0}function Cs(e,n){let s=e._controlledWritableStream;dn(e),Ro(s,n)}function pn(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Io(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function vt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function wr(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function hn(e){e._closedPromise=m((n,s)=>{e._closedPromise_resolve=n,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function As(e,n){hn(e),vo(e,n)}function ff(e){hn(e),Is(e)}function vo(e,n){e._closedPromise_reject!==void 0&&(D(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function df(e,n){As(e,n)}function Is(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function bn(e){e._readyPromise=m((n,s)=>{e._readyPromise_resolve=n,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function Oo(e,n){bn(e),Os(e,n)}function vs(e){bn(e),xo(e)}function Os(e,n){e._readyPromise_reject!==void 0&&(D(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function mf(e){bn(e)}function pf(e,n){Oo(e,n)}function xo(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}function hf(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let Lo=hf();function bf(e){if(!(typeof e=="function"||typeof e=="object")||e.name!=="DOMException")return!1;try{return new e,!0}catch{return!1}}function yf(){let e=Lo?.DOMException;return bf(e)?e:void 0}function gf(){let e=function(s,u){this.message=s||"",this.name=u||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return l(e,"DOMException"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Sf=yf()||gf();function xs(e,n,s,u,f,d){let h=qt(e),R=bs(n);e._disturbed=!0;let O=!1,C=g(void 0);return m((L,F)=>{let z;if(d!==void 0){if(z=()=>{let v=d.reason!==void 0?d.reason:new Sf("Aborted","AbortError"),M=[];u||M.push(()=>n._state==="writable"?cn(n,v):g(void 0)),f||M.push(()=>e._state==="readable"?Oe(e,v):g(void 0)),fe(()=>Promise.all(M.map(G=>G())),!0,v)},d.aborted){z();return}d.addEventListener("abort",z)}function xe(){return m((v,M)=>{function G(ye){ye?v():A(Kt(),G,M)}G(!1)})}function Kt(){return O?g(!0):A(R._readyPromise,()=>m((v,M)=>{pr(h,{_chunkSteps:G=>{C=A(_s(R,G),void 0,o),v(!1)},_closeSteps:()=>v(!0),_errorSteps:M})}))}if(Ve(e,h._closedPromise,v=>(u?Re(!0,v):fe(()=>cn(n,v),!0,v),null)),Ve(n,R._closedPromise,v=>(f?Re(!0,v):fe(()=>Oe(e,v),!0,v),null)),ae(e,h._closedPromise,()=>(s?Re():fe(()=>tf(R)),null)),Me(n)||n._state==="closed"){let v=new TypeError("the destination writable stream closed before all data could be piped to it");f?Re(!0,v):fe(()=>Oe(e,v),!0,v)}D(xe());function ut(){let v=C;return A(C,()=>v!==C?ut():void 0)}function Ve(v,M,G){v._state==="errored"?G(v._storedError):W(M,G)}function ae(v,M,G){v._state==="closed"?G():w(M,G)}function fe(v,M,G){if(O)return;O=!0,n._state==="writable"&&!Me(n)?w(ut(),ye):ye();function ye(){return I(v(),()=>je(M,G),Qt=>je(!0,Qt)),null}}function Re(v,M){O||(O=!0,n._state==="writable"&&!Me(n)?w(ut(),()=>je(v,M)):je(v,M))}function je(v,M){return Es(R),_(h),d!==void 0&&d.removeEventListener("abort",z),v?F(M):L(void 0),null}})}class $e{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!yn(this))throw Sn("desiredSize");return ko(this)}close(){if(!yn(this))throw Sn("close");if(!jt(this))throw new TypeError("The stream is not in a state that permits close");Ot(this)}enqueue(n=void 0){if(!yn(this))throw Sn("enqueue");if(!jt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Vt(this,n)}error(n=void 0){if(!yn(this))throw Sn("error");ve(this,n)}[Et](n){nt(this);let s=this._cancelAlgorithm(n);return gn(this),s}[Wt](n){let s=this._controlledReadableStream;if(this._queue.length>0){let u=mo(this);this._closeRequested&&this._queue.length===0?(gn(this),Rr(s)):Er(this),n._chunkSteps(u)}else Ui(s,n),Er(this)}[_t](){}}Object.defineProperties($e.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),l($e.prototype.close,"close"),l($e.prototype.enqueue,"enqueue"),l($e.prototype.error,"error"),typeof t.toStringTag=="symbol"&&Object.defineProperty($e.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function yn(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof $e}function Er(e){if(!Ls(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();I(s,()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Er(e)),null),u=>(ve(e,u),null))}function Ls(e){let n=e._controlledReadableStream;return!jt(e)||!e._started?!1:!!(at(n)&&Xr(n)>0||ko(e)>0)}function gn(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ot(e){if(!jt(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(gn(e),Rr(n))}function Vt(e,n){if(!jt(e))return;let s=e._controlledReadableStream;if(at(s)&&Xr(s)>0)fo(s,n,!1);else{let u;try{u=e._strategySizeAlgorithm(n)}catch(f){throw ve(e,f),f}try{po(e,n,u)}catch(f){throw ve(e,f),f}}Er(e)}function ve(e,n){let s=e._controlledReadableStream;s._state==="readable"&&(nt(e),gn(e),Fs(s,n))}function ko(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function wf(e){return!Ls(e)}function jt(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function ks(e,n,s,u,f,d,h){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,nt(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=h,n._strategyHWM=d,n._pullAlgorithm=u,n._cancelAlgorithm=f,e._readableStreamController=n;let R=s();I(g(R),()=>(n._started=!0,Er(n),null),O=>(ve(n,O),null))}function Ef(e,n,s,u){let f=Object.create($e.prototype),d,h,R;n.start!==void 0?d=()=>n.start(f):d=()=>{},n.pull!==void 0?h=()=>n.pull(f):h=()=>g(void 0),n.cancel!==void 0?R=O=>n.cancel(O):R=()=>g(void 0),ks(e,f,d,h,R,s,u)}function Sn(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function _f(e,n){return Pt(e._readableStreamController)?Tf(e):Rf(e)}function Rf(e,n){let s=qt(e),u=!1,f=!1,d=!1,h=!1,R,O,C,L,F,z=m(ae=>{F=ae});function xe(){return u?(f=!0,g(void 0)):(u=!0,pr(s,{_chunkSteps:fe=>{q(()=>{f=!1;let Re=fe,je=fe;d||Vt(C._readableStreamController,Re),h||Vt(L._readableStreamController,je),u=!1,f&&xe()})},_closeSteps:()=>{u=!1,d||Ot(C._readableStreamController),h||Ot(L._readableStreamController),(!d||!h)&&F(void 0)},_errorSteps:()=>{u=!1}}),g(void 0))}function Kt(ae){if(d=!0,R=ae,h){let fe=hr([R,O]),Re=Oe(e,fe);F(Re)}return z}function ut(ae){if(h=!0,O=ae,d){let fe=hr([R,O]),Re=Oe(e,fe);F(Re)}return z}function Ve(){}return C=_r(Ve,xe,Kt),L=_r(Ve,xe,ut),W(s._closedPromise,ae=>(ve(C._readableStreamController,ae),ve(L._readableStreamController,ae),(!d||!h)&&F(void 0),null)),[C,L]}function Tf(e){let n=qt(e),s=!1,u=!1,f=!1,d=!1,h=!1,R,O,C,L,F,z=m(v=>{F=v});function xe(v){W(v._closedPromise,M=>(v!==n||(_e(C._readableStreamController,M),_e(L._readableStreamController,M),(!d||!h)&&F(void 0)),null))}function Kt(){At(n)&&(_(n),n=qt(e),xe(n)),pr(n,{_chunkSteps:M=>{q(()=>{u=!1,f=!1;let G=M,ye=M;if(!d&&!h)try{ye=Zi(M)}catch(Qt){_e(C._readableStreamController,Qt),_e(L._readableStreamController,Qt),F(Oe(e,Qt));return}d||nn(C._readableStreamController,G),h||nn(L._readableStreamController,ye),s=!1,u?Ve():f&&ae()})},_closeSteps:()=>{s=!1,d||br(C._readableStreamController),h||br(L._readableStreamController),C._readableStreamController._pendingPullIntos.length>0&&on(C._readableStreamController,0),L._readableStreamController._pendingPullIntos.length>0&&on(L._readableStreamController,0),(!d||!h)&&F(void 0)},_errorSteps:()=>{s=!1}})}function ut(v,M){tt(n)&&(_(n),n=cs(e),xe(n));let G=M?L:C,ye=M?C:L;ms(n,v,1,{_chunkSteps:Zt=>{q(()=>{u=!1,f=!1;let Xt=M?h:d;if(M?d:h)Xt||sn(G._readableStreamController,Zt);else{let Ks;try{Ks=Zi(Zt)}catch(Mo){_e(G._readableStreamController,Mo),_e(ye._readableStreamController,Mo),F(Oe(e,Mo));return}Xt||sn(G._readableStreamController,Zt),nn(ye._readableStreamController,Ks)}s=!1,u?Ve():f&&ae()})},_closeSteps:Zt=>{s=!1;let Xt=M?h:d,An=M?d:h;Xt||br(G._readableStreamController),An||br(ye._readableStreamController),Zt!==void 0&&(Xt||sn(G._readableStreamController,Zt),!An&&ye._readableStreamController._pendingPullIntos.length>0&&on(ye._readableStreamController,0)),(!Xt||!An)&&F(void 0)},_errorSteps:()=>{s=!1}})}function Ve(){if(s)return u=!0,g(void 0);s=!0;let v=So(C._readableStreamController);return v===null?Kt():ut(v._view,!1),g(void 0)}function ae(){if(s)return f=!0,g(void 0);s=!0;let v=So(L._readableStreamController);return v===null?Kt():ut(v._view,!0),g(void 0)}function fe(v){if(d=!0,R=v,h){let M=hr([R,O]),G=Oe(e,M);F(G)}return z}function Re(v){if(h=!0,O=v,d){let M=hr([R,O]),G=Oe(e,M);F(G)}return z}function je(){}return C=Bs(je,Ve,fe),L=Bs(je,ae,Re),xe(n),[C,L]}function Pf(e){return i(e)&&typeof e.getReader<"u"}function Cf(e){return Pf(e)?If(e.getReader()):Af(e)}function Af(e){let n,s=Qi(e,"async"),u=o;function f(){let h;try{h=yc(s)}catch(O){return y(O)}let R=g(h);return x(R,O=>{if(!i(O))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(gc(O))Ot(n._readableStreamController);else{let L=Sc(O);Vt(n._readableStreamController,L)}})}function d(h){let R=s.iterator,O;try{O=en(R,"return")}catch(F){return y(F)}if(O===void 0)return g(void 0);let C;try{C=X(O,R,[h])}catch(F){return y(F)}let L=g(C);return x(L,F=>{if(!i(F))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return n=_r(u,f,d,0),n}function If(e){let n,s=o;function u(){let d;try{d=e.read()}catch(h){return y(h)}return x(d,h=>{if(!i(h))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(h.done)Ot(n._readableStreamController);else{let R=h.value;Vt(n._readableStreamController,R)}})}function f(d){try{return g(e.cancel(d))}catch(h){return y(h)}}return n=_r(s,u,f,0),n}function vf(e,n){Ne(e,n);let s=e,u=s?.autoAllocateChunkSize,f=s?.cancel,d=s?.pull,h=s?.start,R=s?.type;return{autoAllocateChunkSize:u===void 0?void 0:uo(u,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:Of(f,s,`${n} has member 'cancel' that`),pull:d===void 0?void 0:xf(d,s,`${n} has member 'pull' that`),start:h===void 0?void 0:Lf(h,s,`${n} has member 'start' that`),type:R===void 0?void 0:kf(R,`${n} has member 'type' that`)}}function Of(e,n,s){return Ee(e,s),u=>k(e,n,[u])}function xf(e,n,s){return Ee(e,s),u=>k(e,n,[u])}function Lf(e,n,s){return Ee(e,s),u=>X(e,n,[u])}function kf(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Df(e,n){return Ne(e,n),{preventCancel:!!e?.preventCancel}}function Ds(e,n){Ne(e,n);let s=e?.preventAbort,u=e?.preventCancel,f=e?.preventClose,d=e?.signal;return d!==void 0&&Bf(d,`${n} has member 'signal' that`),{preventAbort:!!s,preventCancel:!!u,preventClose:!!f,signal:d}}function Bf(e,n){if(!zc(e))throw new TypeError(`${n} is not an AbortSignal.`)}function Ff(e,n){Ne(e,n);let s=e?.readable;ao(s,"readable","ReadableWritablePair"),co(s,`${n} has member 'readable' that`);let u=e?.writable;return ao(u,"writable","ReadableWritablePair"),hs(u,`${n} has member 'writable' that`),{readable:s,writable:u}}class se{constructor(n={},s={}){n===void 0?n=null:Ni(n,"First parameter");let u=un(s,"Second parameter"),f=vf(n,"First parameter");if(Do(this),f.type==="bytes"){if(u.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=gr(u,0);vc(this,f,d)}else{let d=ln(u),h=gr(u,1);Ef(this,f,h,d)}}get locked(){if(!st(this))throw xt("locked");return at(this)}cancel(n=void 0){return st(this)?at(this)?y(new TypeError("Cannot cancel a stream that already has a reader")):Oe(this,n):y(xt("cancel"))}getReader(n=void 0){if(!st(this))throw xt("getReader");return xc(n,"First parameter").mode===void 0?qt(this):cs(this)}pipeThrough(n,s={}){if(!st(this))throw xt("pipeThrough");qe(n,1,"pipeThrough");let u=Ff(n,"First parameter"),f=Ds(s,"Second parameter");if(at(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Ht(u.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=xs(this,u.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return D(d),u.readable}pipeTo(n,s={}){if(!st(this))return y(xt("pipeTo"));if(n===void 0)return y("Parameter 1 is required in 'pipeTo'.");if(!Gt(n))return y(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let u;try{u=Ds(s,"Second parameter")}catch(f){return y(f)}return at(this)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Ht(n)?y(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):xs(this,n,u.preventClose,u.preventAbort,u.preventCancel,u.signal)}tee(){if(!st(this))throw xt("tee");let n=_f(this);return hr(n)}values(n=void 0){if(!st(this))throw xt("values");let s=Df(n,"First parameter");return hc(this,s.preventCancel)}static from(n){return Cf(n)}}Object.defineProperties(se,{from:{enumerable:!0}}),Object.defineProperties(se.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),l(se.from,"from"),l(se.prototype.cancel,"cancel"),l(se.prototype.getReader,"getReader"),l(se.prototype.pipeThrough,"pipeThrough"),l(se.prototype.pipeTo,"pipeTo"),l(se.prototype.tee,"tee"),l(se.prototype.values,"values"),typeof t.toStringTag=="symbol"&&Object.defineProperty(se.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(se.prototype,t.asyncIterator,{value:se.prototype.values,writable:!0,configurable:!0});function _r(e,n,s,u=1,f=()=>1){let d=Object.create(se.prototype);Do(d);let h=Object.create($e.prototype);return ks(d,h,e,n,s,u,f),d}function Bs(e,n,s){let u=Object.create(se.prototype);Do(u);let f=Object.create(Ge.prototype);return us(u,f,e,n,s,0,void 0),u}function Do(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function st(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof se}function at(e){return e._reader!==void 0}function Oe(e,n){if(e._disturbed=!0,e._state==="closed")return g(void 0);if(e._state==="errored")return y(e._storedError);Rr(e);let s=e._reader;if(s!==void 0&&At(s)){let f=s._readIntoRequests;s._readIntoRequests=new B,f.forEach(d=>{d._closeSteps(void 0)})}let u=e._readableStreamController[Et](n);return x(u,o)}function Rr(e){e._state="closed";let n=e._reader;if(n!==void 0&&(ce(n),tt(n))){let s=n._readRequests;n._readRequests=new B,s.forEach(u=>{u._closeSteps()})}}function Fs(e,n){e._state="errored",e._storedError=n;let s=e._reader;s!==void 0&&(V(s,n),tt(s)?qi(s,n):ps(s,n))}function xt(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Ns(e,n){Ne(e,n);let s=e?.highWaterMark;return ao(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:lo(s)}}let Ms=e=>e.byteLength;l(Ms,"size");class wn{constructor(n){qe(n,1,"ByteLengthQueuingStrategy"),n=Ns(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ws(this))throw Us("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ws(this))throw Us("size");return Ms}}Object.defineProperties(wn.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(wn.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Us(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ws(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof wn}let qs=()=>1;l(qs,"size");class En{constructor(n){qe(n,1,"CountQueuingStrategy"),n=Ns(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Gs(this))throw zs("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Gs(this))throw zs("size");return qs}}Object.defineProperties(En.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(En.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function zs(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Gs(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof En}function Nf(e,n){Ne(e,n);let s=e?.cancel,u=e?.flush,f=e?.readableType,d=e?.start,h=e?.transform,R=e?.writableType;return{cancel:s===void 0?void 0:qf(s,e,`${n} has member 'cancel' that`),flush:u===void 0?void 0:Mf(u,e,`${n} has member 'flush' that`),readableType:f,start:d===void 0?void 0:Uf(d,e,`${n} has member 'start' that`),transform:h===void 0?void 0:Wf(h,e,`${n} has member 'transform' that`),writableType:R}}function Mf(e,n,s){return Ee(e,s),u=>k(e,n,[u])}function Uf(e,n,s){return Ee(e,s),u=>X(e,n,[u])}function Wf(e,n,s){return Ee(e,s),(u,f)=>k(e,n,[u,f])}function qf(e,n,s){return Ee(e,s),u=>k(e,n,[u])}class _n{constructor(n={},s={},u={}){n===void 0&&(n=null);let f=un(s,"Second parameter"),d=un(u,"Third parameter"),h=Nf(n,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let R=gr(d,0),O=ln(d),C=gr(f,1),L=ln(f),F,z=m(xe=>{F=xe});zf(this,z,C,L,R,O),Hf(this,h),h.start!==void 0?F(h.start(this._transformStreamController)):F(void 0)}get readable(){if(!Hs(this))throw Ys("readable");return this._readable}get writable(){if(!Hs(this))throw Ys("writable");return this._writable}}Object.defineProperties(_n.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(_n.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function zf(e,n,s,u,f,d){function h(){return n}function R(z){return jf(e,z)}function O(z){return Yf(e,z)}function C(){return Kf(e)}e._writable=$c(h,R,C,O,s,u);function L(){return Qf(e)}function F(z){return Zf(e,z)}e._readable=_r(h,L,F,f,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Rn(e,!0),e._transformStreamController=void 0}function Hs(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof _n}function $s(e,n){ve(e._readable._readableStreamController,n),Bo(e,n)}function Bo(e,n){Pn(e._transformStreamController),Sr(e._writable._writableStreamController,n),Fo(e)}function Fo(e){e._backpressure&&Rn(e,!1)}function Rn(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=m(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=n}class lt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Tn(this))throw Cn("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return ko(n)}enqueue(n=void 0){if(!Tn(this))throw Cn("enqueue");Vs(this,n)}error(n=void 0){if(!Tn(this))throw Cn("error");$f(this,n)}terminate(){if(!Tn(this))throw Cn("terminate");Vf(this)}}Object.defineProperties(lt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),l(lt.prototype.enqueue,"enqueue"),l(lt.prototype.error,"error"),l(lt.prototype.terminate,"terminate"),typeof t.toStringTag=="symbol"&&Object.defineProperty(lt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Tn(e){return!i(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof lt}function Gf(e,n,s,u,f){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=s,n._flushAlgorithm=u,n._cancelAlgorithm=f,n._finishPromise=void 0,n._finishPromise_resolve=void 0,n._finishPromise_reject=void 0}function Hf(e,n){let s=Object.create(lt.prototype),u,f,d;n.transform!==void 0?u=h=>n.transform(h,s):u=h=>{try{return Vs(s,h),g(void 0)}catch(R){return y(R)}},n.flush!==void 0?f=()=>n.flush(s):f=()=>g(void 0),n.cancel!==void 0?d=h=>n.cancel(h):d=()=>g(void 0),Gf(e,s,u,f,d)}function Pn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function Vs(e,n){let s=e._controlledTransformStream,u=s._readable._readableStreamController;if(!jt(u))throw new TypeError("Readable side is not in a state that permits enqueue");try{Vt(u,n)}catch(d){throw Bo(s,d),s._readable._storedError}wf(u)!==s._backpressure&&Rn(s,!0)}function $f(e,n){$s(e._controlledTransformStream,n)}function js(e,n){let s=e._transformAlgorithm(n);return x(s,void 0,u=>{throw $s(e._controlledTransformStream,u),u})}function Vf(e){let n=e._controlledTransformStream,s=n._readable._readableStreamController;Ot(s);let u=new TypeError("TransformStream terminated");Bo(n,u)}function jf(e,n){let s=e._transformStreamController;if(e._backpressure){let u=e._backpressureChangePromise;return x(u,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return js(s,n)})}return js(s,n)}function Yf(e,n){let s=e._transformStreamController;if(s._finishPromise!==void 0)return s._finishPromise;let u=e._readable;s._finishPromise=m((d,h)=>{s._finishPromise_resolve=d,s._finishPromise_reject=h});let f=s._cancelAlgorithm(n);return Pn(s),I(f,()=>(u._state==="errored"?Yt(s,u._storedError):(ve(u._readableStreamController,n),No(s)),null),d=>(ve(u._readableStreamController,d),Yt(s,d),null)),s._finishPromise}function Kf(e){let n=e._transformStreamController;if(n._finishPromise!==void 0)return n._finishPromise;let s=e._readable;n._finishPromise=m((f,d)=>{n._finishPromise_resolve=f,n._finishPromise_reject=d});let u=n._flushAlgorithm();return Pn(n),I(u,()=>(s._state==="errored"?Yt(n,s._storedError):(Ot(s._readableStreamController),No(n)),null),f=>(ve(s._readableStreamController,f),Yt(n,f),null)),n._finishPromise}function Qf(e){return Rn(e,!1),e._backpressureChangePromise}function Zf(e,n){let s=e._transformStreamController;if(s._finishPromise!==void 0)return s._finishPromise;let u=e._writable;s._finishPromise=m((d,h)=>{s._finishPromise_resolve=d,s._finishPromise_reject=h});let f=s._cancelAlgorithm(n);return Pn(s),I(f,()=>(u._state==="errored"?Yt(s,u._storedError):(Sr(u._writableStreamController,n),Fo(e),No(s)),null),d=>(Sr(u._writableStreamController,d),Fo(e),Yt(s,d),null)),s._finishPromise}function Cn(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function No(e){e._finishPromise_resolve!==void 0&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function Yt(e,n){e._finishPromise_reject!==void 0&&(D(e._finishPromise),e._finishPromise_reject(n),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function Ys(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=wn,r.CountQueuingStrategy=En,r.ReadableByteStreamController=Ge,r.ReadableStream=se,r.ReadableStreamBYOBReader=ot,r.ReadableStreamBYOBRequest=Tt,r.ReadableStreamDefaultController=$e,r.ReadableStreamDefaultReader=et,r.TransformStream=_n,r.TransformStreamDefaultController=lt,r.WritableStream=it,r.WritableStreamDefaultController=$t,r.WritableStreamDefaultWriter=He})});var nu=Q(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,ru())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let i=0,a=this;return new ReadableStream({type:"bytes",async pull(l){let b=await a.slice(i,Math.min(a.size,i+65536)).arrayBuffer();i+=b.byteLength,l.enqueue(new Uint8Array(b)),i===a.size&&l.close()}})})}catch{}});async function*bi(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let i=o.byteOffset,a=o.byteOffset+o.byteLength;for(;i!==a;){let l=Math.min(a-i,ou),c=o.buffer.slice(i,i+l);i+=c.byteLength,yield new Uint8Array(c)}}else yield o;else{let i=0,a=o;for(;i!==a.size;){let c=await a.slice(i,Math.min(a.size,i+ou)).arrayBuffer();i+=c.byteLength,yield new Uint8Array(c)}}}var eb,ou,iu,Em,Ke,Fr=Tr(()=>{eb=J(nu(),1);ou=65536;iu=class yi{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let l of t){let c;ArrayBuffer.isView(l)?c=new Uint8Array(l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)):l instanceof ArrayBuffer?c=new Uint8Array(l.slice(0)):l instanceof yi?c=l:c=i.encode(`${l}`),this.#r+=ArrayBuffer.isView(c)?c.byteLength:c.size,this.#e.push(c)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let a=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(a)?a:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let i of bi(this.#e,!1))o+=t.decode(i,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let i of bi(this.#e,!1))t.set(i,o),o+=i.length;return t.buffer}stream(){let t=bi(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await t.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,i=""){let{size:a}=this,l=t<0?Math.max(a+t,0):Math.min(t,a),c=o<0?Math.max(a+o,0):Math.min(o,a),b=Math.max(c-l,0),p=this.#e,m=[],g=0;for(let A of p){if(g>=b)break;let I=ArrayBuffer.isView(A)?A.byteLength:A.size;if(l&&I<=l)l-=I,c-=I;else{let w;ArrayBuffer.isView(A)?(w=A.subarray(l,Math.min(I,c)),g+=w.byteLength):(w=A.slice(l,Math.min(I,c)),g+=w.size),c-=I,m.push(w),l=0}}let y=new yi([],{type:String(i).toLowerCase()});return y.#r=b,y.#e=m,y}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(iu.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Em=iu,Ke=Em});var _m,Rm,ar,gi=Tr(()=>{Fr();_m=class extends Ke{#e=0;#t="";constructor(t,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let a=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(a)||(this.#e=a),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Ke&&/^(File)$/.test(t[Symbol.toStringTag])}},Rm=_m,ar=Rm});function lu(r,t=Ke){var o=`${su()}${su()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],a=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((l,c)=>typeof l=="string"?i.push(a+Si(c)+`"\r
\r
${l.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(a+Si(c)+`"; filename="${Si(l.name,1)}"\r
Content-Type: ${l.type||"application/octet-stream"}\r
\r
`,l,`\r
`)),i.push(`--${o}--`),new t(i,{type:"multipart/form-data; boundary="+o})}var Nr,Tm,Pm,su,Cm,au,Si,Dt,Bt,$n=Tr(()=>{Fr();gi();({toStringTag:Nr,iterator:Tm,hasInstance:Pm}=Symbol),su=Math.random,Cm="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),au=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[Nr])?[(o=o!==void 0?o+"":t[Nr]=="File"?t.name:"blob",r),t.name!==o||t[Nr]=="blob"?new ar([t],o,t):t]:[r,t+""]),Si=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Dt=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Bt=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Nr](){return"FormData"}[Tm](){return this.entries()}static[Pm](t){return t&&typeof t=="object"&&t[Nr]==="FormData"&&!Cm.some(o=>typeof t[o]!="function")}append(...t){Dt("append",arguments,2),this.#e.push(au(...t))}delete(t){Dt("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Dt("get",arguments,1),t+="";for(var o=this.#e,i=o.length,a=0;a<i;a++)if(o[a][0]===t)return o[a][1];return null}getAll(t,o){return Dt("getAll",arguments,1),o=[],t+="",this.#e.forEach(i=>i[0]===t&&o.push(i[1])),o}has(t){return Dt("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Dt("forEach",arguments,1);for(var[i,a]of this)t.call(o,a,i,this)}set(...t){Dt("set",arguments,2);var o=[],i=!0;t=au(...t),this.#e.forEach(a=>{a[0]===t[0]?i&&(i=!o.push(t)):o.push(a)}),i&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var mu=Q((mb,du)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}du.exports=globalThis.DOMException});var jn,Am,bb,Ei=Tr(()=>{jn=require("node:fs"),Am=J(mu(),1);gi();Fr();({stat:bb}=jn.promises)});var hu={};Qs(hu,{toFormData:()=>Dm});function km(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(a,l)=>String.fromCharCode(l)),i}async function Dm(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new _i(o[1]||o[2]),a,l,c,b,p,m,g=[],y=new Bt,A=D=>{c+=x.decode(D,{stream:!0})},I=D=>{g.push(D)},w=()=>{let D=new ar(g,m,{type:p});y.append(b,D)},W=()=>{y.append(b,c)},x=new TextDecoder("utf-8");x.decode(),i.onPartBegin=function(){i.onPartData=A,i.onPartEnd=W,a="",l="",c="",b="",p="",m=null,g.length=0},i.onHeaderField=function(D){a+=x.decode(D,{stream:!0})},i.onHeaderValue=function(D){l+=x.decode(D,{stream:!0})},i.onHeaderEnd=function(){if(l+=x.decode(),a=a.toLowerCase(),a==="content-disposition"){let D=l.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);D&&(b=D[2]||D[3]||""),m=km(l),m&&(i.onPartData=I,i.onPartEnd=w)}else a==="content-type"&&(p=l);l="",a=""};for await(let D of r)i.write(D);return i.end(),y}var Ue,H,pu,gt,Yn,Kn,Im,Ur,vm,Om,xm,Lm,Ft,_i,bu=Tr(()=>{Ei();$n();Ue=0,H={START_BOUNDARY:Ue++,HEADER_FIELD_START:Ue++,HEADER_FIELD:Ue++,HEADER_VALUE_START:Ue++,HEADER_VALUE:Ue++,HEADER_VALUE_ALMOST_DONE:Ue++,HEADERS_ALMOST_DONE:Ue++,PART_DATA_START:Ue++,PART_DATA:Ue++,END:Ue++},pu=1,gt={PART_BOUNDARY:pu,LAST_BOUNDARY:pu*=2},Yn=10,Kn=13,Im=32,Ur=45,vm=58,Om=97,xm=122,Lm=r=>r|32,Ft=()=>{},_i=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Ft,this.onHeaderField=Ft,this.onHeadersEnd=Ft,this.onHeaderValue=Ft,this.onPartBegin=Ft,this.onPartData=Ft,this.onPartEnd=Ft,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=H.START_BOUNDARY}write(t){let o=0,i=t.length,a=this.index,{lookbehind:l,boundary:c,boundaryChars:b,index:p,state:m,flags:g}=this,y=this.boundary.length,A=y-1,I=t.length,w,W,x=k=>{this[k+"Mark"]=o},D=k=>{delete this[k+"Mark"]},q=(k,$,B,ue)=>{($===void 0||$!==B)&&this[k](ue&&ue.subarray($,B))},X=(k,$)=>{let B=k+"Mark";B in this&&($?(q(k,this[B],o,t),delete this[B]):(q(k,this[B],t.length,t),this[B]=0))};for(o=0;o<i;o++)switch(w=t[o],m){case H.START_BOUNDARY:if(p===c.length-2){if(w===Ur)g|=gt.LAST_BOUNDARY;else if(w!==Kn)return;p++;break}else if(p-1===c.length-2){if(g&gt.LAST_BOUNDARY&&w===Ur)m=H.END,g=0;else if(!(g&gt.LAST_BOUNDARY)&&w===Yn)p=0,q("onPartBegin"),m=H.HEADER_FIELD_START;else return;break}w!==c[p+2]&&(p=-2),w===c[p+2]&&p++;break;case H.HEADER_FIELD_START:m=H.HEADER_FIELD,x("onHeaderField"),p=0;case H.HEADER_FIELD:if(w===Kn){D("onHeaderField"),m=H.HEADERS_ALMOST_DONE;break}if(p++,w===Ur)break;if(w===vm){if(p===1)return;X("onHeaderField",!0),m=H.HEADER_VALUE_START;break}if(W=Lm(w),W<Om||W>xm)return;break;case H.HEADER_VALUE_START:if(w===Im)break;x("onHeaderValue"),m=H.HEADER_VALUE;case H.HEADER_VALUE:w===Kn&&(X("onHeaderValue",!0),q("onHeaderEnd"),m=H.HEADER_VALUE_ALMOST_DONE);break;case H.HEADER_VALUE_ALMOST_DONE:if(w!==Yn)return;m=H.HEADER_FIELD_START;break;case H.HEADERS_ALMOST_DONE:if(w!==Yn)return;q("onHeadersEnd"),m=H.PART_DATA_START;break;case H.PART_DATA_START:m=H.PART_DATA,x("onPartData");case H.PART_DATA:if(a=p,p===0){for(o+=A;o<I&&!(t[o]in b);)o+=y;o-=A,w=t[o]}if(p<c.length)c[p]===w?(p===0&&X("onPartData",!0),p++):p=0;else if(p===c.length)p++,w===Kn?g|=gt.PART_BOUNDARY:w===Ur?g|=gt.LAST_BOUNDARY:p=0;else if(p-1===c.length)if(g&gt.PART_BOUNDARY){if(p=0,w===Yn){g&=~gt.PART_BOUNDARY,q("onPartEnd"),q("onPartBegin"),m=H.HEADER_FIELD_START;break}}else g&gt.LAST_BOUNDARY&&w===Ur?(q("onPartEnd"),m=H.END,g=0):p=0;if(p>0)l[p-1]=w;else if(a>0){let k=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);q("onPartData",0,a,k),a=0,x("onPartData"),o--}break;case H.END:break;default:throw new Error(`Unexpected state entered: ${m}`)}X("onHeaderField"),X("onHeaderValue"),X("onPartData"),this.index=p,this.state=m,this.flags=g}end(){if(this.state===H.HEADER_FIELD_START&&this.index===0||this.state===H.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==H.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Sp={};Qs(Sp,{default:()=>gp});module.exports=nd(Sp);var Je=require("@raycast/api");var vn=(r,t=!1)=>{let o=r.charAt(0).toUpperCase(),i=t?r.slice(1).toLowerCase():r.slice(1);return o+i};var Ye=require("@raycast/api"),Js=require("react");var Pr=require("@raycast/api");var Xs="https://bitwarden.com";var re={PASSWORD_OPTIONS:"bw-generate-password-options",PASSWORD_ONE_TIME_WARNING:"bw-generate-password-warning-accepted",SESSION_TOKEN:"sessionToken",REPROMPT_HASH:"sessionRepromptHash",SERVER_URL:"cliServer",LAST_ACTIVITY_TIME:"lastActivityTime",VAULT_LOCK_REASON:"vaultLockReason",VAULT_FAVORITE_ORDER:"vaultFavoriteOrder"};var Pp={1:Pr.Icon.Globe,3:Pr.Icon.CreditCard,4:Pr.Icon.Person,2:Pr.Icon.Document};var id=()=>{let r=()=>(0,Ye.popToRoot)({clearSearchBar:!1}),t=()=>Ye.LocalStorage.setItem(re.PASSWORD_ONE_TIME_WARNING,!0),o=async()=>{await Ye.LocalStorage.getItem(re.PASSWORD_ONE_TIME_WARNING)||await(0,Ye.confirmAlert)({title:"Warning",message:"Password history is not available yet, so make sure to store the password after generating it!",icon:Ye.Icon.ExclamationMark,dismissAction:{title:"Go back",onAction:r},primaryAction:{title:"I understand",onAction:t}})};(0,Js.useEffect)(()=>{o()},[])},ea=id;var ic=require("@raycast/api"),so=require("react");var ta=require("react");function sd(){let r=(0,ta.useRef)(new AbortController);return{abortControllerRef:r,renew:()=>{r.current.signal.aborted&&(r.current=new AbortController)},abort:()=>{r.current?.abort()}}}var ra=sd;var Xe=require("react");var Y=require("@raycast/api");var Il=require("node:buffer"),vl=J(require("node:path"),1),Un=J(require("node:child_process"),1),Or=J(require("node:process"),1),Ol=J(Ha(),1);function Yo(r){let t=typeof r=="string"?`
`:10,o=typeof r=="string"?"\r":13;return r[r.length-1]===t&&(r=r.slice(0,-1)),r[r.length-1]===o&&(r=r.slice(0,-1)),r}var Cr=J(require("node:process"),1),tr=J(require("node:path"),1),$a=J(require("node:url"),1);function xn(r={}){let{env:t=process.env,platform:o=process.platform}=r;return o!=="win32"?"PATH":Object.keys(t).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"}function kd(r={}){let{cwd:t=Cr.default.cwd(),path:o=Cr.default.env[xn()],execPath:i=Cr.default.execPath}=r,a,l=t instanceof URL?$a.default.fileURLToPath(t):t,c=tr.default.resolve(l),b=[];for(;a!==c;)b.push(tr.default.join(c,"node_modules/.bin")),a=c,c=tr.default.resolve(c,"..");return b.push(tr.default.resolve(l,i,"..")),[...b,o].join(tr.default.delimiter)}function Va({env:r=Cr.default.env,...t}={}){r={...r};let o=xn({env:r});return t.path=r[o],r[o]=kd(t),r}var Dd=(r,t,o,i)=>{if(o==="length"||o==="prototype"||o==="arguments"||o==="caller")return;let a=Object.getOwnPropertyDescriptor(r,o),l=Object.getOwnPropertyDescriptor(t,o);!Bd(a,l)&&i||Object.defineProperty(r,o,l)},Bd=function(r,t){return r===void 0||r.configurable||r.writable===t.writable&&r.enumerable===t.enumerable&&r.configurable===t.configurable&&(r.writable||r.value===t.value)},Fd=(r,t)=>{let o=Object.getPrototypeOf(t);o!==Object.getPrototypeOf(r)&&Object.setPrototypeOf(r,o)},Nd=(r,t)=>`/* Wrapped ${r}*/
${t}`,Md=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Ud=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Wd=(r,t,o)=>{let i=o===""?"":`with ${o.trim()}() `,a=Nd.bind(null,i,t.toString());Object.defineProperty(a,"name",Ud),Object.defineProperty(r,"toString",{...Md,value:a})};function Ko(r,t,{ignoreNonConfigurable:o=!1}={}){let{name:i}=r;for(let a of Reflect.ownKeys(t))Dd(r,t,a,o);return Fd(r,t),Wd(r,t,i),r}var Ln=new WeakMap,ja=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,i=0,a=r.displayName||r.name||"<anonymous>",l=function(...c){if(Ln.set(l,++i),i===1)o=r.apply(this,c),r=null;else if(t.throw===!0)throw new Error(`Function \`${a}\` can only be called once`);return o};return Ko(l,r),Ln.set(l,i),l};ja.callCount=r=>{if(!Ln.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return Ln.get(r)};var Ya=ja;var el=require("node:os");var Ka=function(){let r=Za-Qa+1;return Array.from({length:r},qd)},qd=function(r,t){return{name:`SIGRT${t+1}`,number:Qa+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Qa=34,Za=64;var Ja=require("node:os");var Xa=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];var Qo=function(){let r=Ka();return[...Xa,...r].map(zd)},zd=function({name:r,number:t,description:o,action:i,forced:a=!1,standard:l}){let{signals:{[r]:c}}=Ja.constants,b=c!==void 0;return{name:r,number:b?c:t,description:o,supported:b,action:i,forced:a,standard:l}};var Gd=function(){let r=Qo();return Object.fromEntries(r.map(Hd))},Hd=function({name:r,number:t,description:o,supported:i,action:a,forced:l,standard:c}){return[r,{name:r,number:t,description:o,supported:i,action:a,forced:l,standard:c}]},tl=Gd(),$d=function(){let r=Qo(),t=65,o=Array.from({length:t},(i,a)=>Vd(a,r));return Object.assign({},...o)},Vd=function(r,t){let o=jd(r,t);if(o===void 0)return{};let{name:i,description:a,supported:l,action:c,forced:b,standard:p}=o;return{[r]:{name:i,number:r,description:a,supported:l,action:c,forced:b,standard:p}}},jd=function(r,t){let o=t.find(({name:i})=>el.constants.signals[i]===r);return o!==void 0?o:t.find(i=>i.number===r)},nh=$d();var Yd=({timedOut:r,timeout:t,errorCode:o,signal:i,signalDescription:a,exitCode:l,isCanceled:c})=>r?`timed out after ${t} milliseconds`:c?"was canceled":o!==void 0?`failed with ${o}`:i!==void 0?`was killed with ${i} (${a})`:l!==void 0?`failed with exit code ${l}`:"failed",Ar=({stdout:r,stderr:t,all:o,error:i,signal:a,exitCode:l,command:c,escapedCommand:b,timedOut:p,isCanceled:m,killed:g,parsed:{options:{timeout:y}}})=>{l=l===null?void 0:l,a=a===null?void 0:a;let A=a===void 0?void 0:tl[a].description,I=i&&i.code,W=`Command ${Yd({timedOut:p,timeout:y,errorCode:I,signal:a,signalDescription:A,exitCode:l,isCanceled:m})}: ${c}`,x=Object.prototype.toString.call(i)==="[object Error]",D=x?`${W}
${i.message}`:W,q=[D,t,r].filter(Boolean).join(`
`);return x?(i.originalMessage=i.message,i.message=q):i=new Error(q),i.shortMessage=D,i.command=c,i.escapedCommand=b,i.exitCode=l,i.signal=a,i.signalDescription=A,i.stdout=r,i.stderr=t,o!==void 0&&(i.all=o),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=!!p,i.isCanceled=m,i.killed=g&&!p,i};var kn=["stdin","stdout","stderr"],Kd=r=>kn.some(t=>r[t]!==void 0),rl=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return kn.map(i=>r[i]);if(Kd(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${kn.map(i=>`\`${i}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,kn.length);return Array.from({length:o},(i,a)=>t[a])};var ul=J(require("node:os"),1),cl=J(ll(),1),Qd=1e3*5,fl=(r,t="SIGTERM",o={})=>{let i=r(t);return Zd(r,t,o,i),i},Zd=(r,t,o,i)=>{if(!Xd(t,o,i))return;let a=em(o),l=setTimeout(()=>{r("SIGKILL")},a);l.unref&&l.unref()},Xd=(r,{forceKillAfterTimeout:t},o)=>Jd(r)&&t!==!1&&o,Jd=r=>r===ul.default.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",em=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return Qd;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},dl=(r,t)=>{r.kill()&&(t.isCanceled=!0)},tm=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},ml=(r,{timeout:t,killSignal:o="SIGTERM"},i)=>{if(t===0||t===void 0)return i;let a,l=new Promise((b,p)=>{a=setTimeout(()=>{tm(r,o,p)},t)}),c=i.finally(()=>{clearTimeout(a)});return Promise.race([l,c])},pl=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},hl=async(r,{cleanup:t,detached:o},i)=>{if(!t||o)return i;let a=(0,cl.default)(()=>{r.kill()});return i.finally(()=>{a()})};function Jo(r){return r!==null&&typeof r=="object"&&typeof r.pipe=="function"}var ni=J(gl(),1),El=J(wl(),1),_l=(r,t)=>{t!==void 0&&(Jo(t)?t.pipe(r.stdin):r.stdin.end(t))},Rl=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=(0,El.default)();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},ti=async(r,t)=>{if(!(!r||t===void 0)){r.destroy();try{return await t}catch(o){return o.bufferedData}}},ri=(r,{encoding:t,buffer:o,maxBuffer:i})=>{if(!(!r||!o))return t?(0,ni.default)(r,{encoding:t,maxBuffer:i}):ni.default.buffer(r,{maxBuffer:i})},Tl=async({stdout:r,stderr:t,all:o},{encoding:i,buffer:a,maxBuffer:l},c)=>{let b=ri(r,{encoding:i,buffer:a,maxBuffer:l}),p=ri(t,{encoding:i,buffer:a,maxBuffer:l}),m=ri(o,{encoding:i,buffer:a,maxBuffer:l*2});try{return await Promise.all([c,b,p,m])}catch(g){return Promise.all([{error:g,signal:g.signal,timedOut:g.timedOut},ti(r,b),ti(t,p),ti(o,m)])}},Pl=({input:r})=>{if(Jo(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};var um=(async()=>{})().constructor.prototype,cm=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(um,r)]),oi=(r,t)=>{for(let[o,i]of cm){let a=typeof t=="function"?(...l)=>Reflect.apply(i.value,t(),l):i.value.bind(t);Reflect.defineProperty(r,o,{...i,value:a})}return r},Cl=r=>new Promise((t,o)=>{r.on("exit",(i,a)=>{t({exitCode:i,signal:a})}),r.on("error",i=>{o(i)}),r.stdin&&r.stdin.on("error",i=>{o(i)})});var Al=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],fm=/^[\w.-]+$/,dm=/"/g,mm=r=>typeof r!="string"||fm.test(r)?r:`"${r.replace(dm,'\\"')}"`,ii=(r,t)=>Al(r,t).join(" "),si=(r,t)=>Al(r,t).map(o=>mm(o)).join(" ");var pm=1e3*1e3*100,hm=({env:r,extendEnv:t,preferLocal:o,localDir:i,execPath:a})=>{let l=t?{...Or.default.env,...r}:r;return o?Va({env:l,cwd:i,execPath:a}):l},xl=(r,t,o={})=>{let i=Ol.default._parse(r,t,o);return r=i.command,t=i.args,o=i.options,o={maxBuffer:pm,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||Or.default.cwd(),execPath:Or.default.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=hm(o),o.stdio=rl(o),Or.default.platform==="win32"&&vl.default.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:i}},xr=(r,t,o)=>typeof t!="string"&&!Il.Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?Yo(t):t;function Ll(r,t,o){let i=xl(r,t,o),a=ii(r,t),l=si(r,t);pl(i.options);let c;try{c=Un.default.spawn(i.file,i.args,i.options)}catch(I){let w=new Un.default.ChildProcess,W=Promise.reject(Ar({error:I,stdout:"",stderr:"",all:"",command:a,escapedCommand:l,parsed:i,timedOut:!1,isCanceled:!1,killed:!1}));return oi(w,W)}let b=Cl(c),p=ml(c,i.options,b),m=hl(c,i.options,p),g={isCanceled:!1};c.kill=fl.bind(null,c.kill.bind(c)),c.cancel=dl.bind(null,c,g);let A=Ya(async()=>{let[{error:I,exitCode:w,signal:W,timedOut:x},D,q,X]=await Tl(c,i.options,m),k=xr(i.options,D),$=xr(i.options,q),B=xr(i.options,X);if(I||w!==0||W!==null){let ue=Ar({error:I,exitCode:w,signal:W,stdout:k,stderr:$,all:B,command:a,escapedCommand:l,parsed:i,timedOut:x,isCanceled:g.isCanceled||(i.options.signal?i.options.signal.aborted:!1),killed:c.killed});if(!i.options.reject)return ue;throw ue}return{command:a,escapedCommand:l,exitCode:0,stdout:k,stderr:$,all:B,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return _l(c,i.options.input),c.all=Rl(c,i.options),oi(c,A)}function kl(r,t,o){let i=xl(r,t,o),a=ii(r,t),l=si(r,t);Pl(i.options);let c;try{c=Un.default.spawnSync(i.file,i.args,i.options)}catch(m){throw Ar({error:m,stdout:"",stderr:"",all:"",command:a,escapedCommand:l,parsed:i,timedOut:!1,isCanceled:!1,killed:!1})}let b=xr(i.options,c.stdout,c.error),p=xr(i.options,c.stderr,c.error);if(c.error||c.status!==0||c.signal!==null){let m=Ar({stdout:b,stderr:p,error:c.error,signal:c.signal,exitCode:c.status,command:a,escapedCommand:l,parsed:i,timedOut:c.error&&c.error.code==="ETIMEDOUT",isCanceled:!1,killed:c.signal!==null});if(!i.options.reject)return m;throw m}return{command:a,escapedCommand:l,exitCode:0,stdout:b,stderr:p,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}var pe=require("fs"),Mu=require("path/posix");var Bl=require("@raycast/api");var Dl={lowercase:!0,uppercase:!0,number:!1,special:!1,passphrase:!1,length:14,words:3,separator:"-",capitalize:!1,includeNumber:!1},ai={password:{length:{label:"Length of the password",hint:"5 - 128",type:"number",errorMessage:"Number between 5 and 128"},uppercase:{label:"Uppercase characters",hint:"ABCDEFGHIJLMNOPQRSTUVWXYZ",type:"boolean"},lowercase:{label:"Lowercase characters",hint:"abcdefghijklmnopqrstuvwxyz",type:"boolean"},number:{label:"Numeric characters",hint:"0123456789",type:"boolean"},special:{label:"Special characters",hint:"!@#$%^&*()_+-=[]{}|;:,./<>?",type:"boolean"}},passphrase:{words:{label:"Number of words",hint:"3 - 20",type:"number",errorMessage:"Number between 3 and 20"},separator:{label:"Word separator",hint:"this-is-a-passphrase",type:"string",errorMessage:"Must be a single character"},capitalize:{label:"Capitalise",hint:"This-Is-A-Passphrase",type:"boolean"},includeNumber:{label:"Include number",hint:"This2-Is-A-Passphrase",type:"boolean"}}};function Fl(r){return Object.entries(r).flatMap(([t,o])=>o?[`--${t}`,o]:[])}async function Nl(){let r=await Bl.LocalStorage.getItem(re.PASSWORD_OPTIONS);return{...Dl,...r?JSON.parse(r):{}}}var Lr=require("@raycast/api");var bm={IMMEDIATELY:"0",ONE_MINUTE:"60000",FIVE_MINUTES:"300000",FIFTEEN_MINUTES:"900000",THIRTY_MINUTES:"1800000",ONE_HOUR:"3600000",FOUR_HOURS:"14400000",EIGHT_HOURS:"28800000",ONE_DAY:"86400000",NEVER:"-1",SYSTEM_LOCK:"-2",SYSTEM_SLEEP:"-3"},Le=Object.entries(bm).reduce((r,[t,o])=>(r[t]=parseInt(o),r),{});var ym={[Le.IMMEDIATELY]:"Immediately",[Le.ONE_MINUTE]:"1 Minute",[Le.FIVE_MINUTES]:"5 Minutes",[Le.FIFTEEN_MINUTES]:"15 Minutes",[Le.THIRTY_MINUTES]:"30 Minutes",[Le.ONE_HOUR]:"1 Hour",[Le.FOUR_HOURS]:"4 Hours",[Le.EIGHT_HOURS]:"8 Hours",[Le.ONE_DAY]:"1 Day"};var qh={1:"Login",3:"Card",4:"Identity",2:"Secure Note"};function li(){let{serverUrl:r}=(0,Lr.getPreferenceValues)();return r===""||r==="bitwarden.com"||r==="https://bitwarden.com"?"":r}var gm={search:"transientCopySearch","generate-password":"transientCopyGeneratePassword","generate-password-quick":"transientCopyGeneratePasswordQuick"};function Ml(r){let t=gm[Lr.environment.commandName],o=(0,Lr.getPreferenceValues)()[t];return o==="never"?!1:o==="always"?!0:o==="passwords"?r==="password":!0}var ir=class extends Error{constructor(t,o){super(t),this.stack=o}},kr=class extends ir{constructor(t,o){super(t,o)}};var ct=class extends kr{constructor(t,o){super(t??"Bitwarden CLI not found",o),this.name="InstalledCLINotFoundError",this.stack=o}};var Dr=class extends kr{constructor(t,o){super(t??"Vault is locked",o),this.name="VaultIsLockedError"}},Br=class extends ir{constructor(t,o){super(t??"Not logged in",o),this.name="NotLoggedInError"}},ft=class extends kr{constructor(t,o){super(t??"Failed do download Bitwarden CLI",o),this.name="EnsureCliBinError"}};function dt(r,t){try{return r()}catch{return t}}var Wn=r=>{if(r){if(typeof r=="string")return r;if(r instanceof Error){let{message:t,name:o}=r;return r.stack?r.stack:`${o}: ${t}`}return String(r)}};var Gr=require("path"),fr=require("fs/promises");var yt=require("fs"),Gn=require("fs/promises"),$l=require("path"),Vl=J(Hl());function jl(r){return new Promise(t=>{let o=setInterval(()=>{dt(()=>{}),(0,yt.statSync)(r).isFile()&&(clearInterval(o),t())},300)})}async function Yl(r,t){let o=new Vl.default.async({file:r});(0,yt.existsSync)(t)||(0,yt.mkdirSync)(t,{recursive:!0}),await o.extract(null,t),await o.close()}async function Kl(r,t){let o=!1;try{let i=await(0,Gn.readdir)(t);for await(let a of i)a.startsWith(r)&&await dt(async()=>{await(0,Gn.unlink)((0,$l.join)(t,a)),o=!0})}catch{return!1}return o}function Ql(...r){for(let t of r)dt(()=>(0,yt.unlinkSync)(t))}var Zl=require("fs"),Xl=require("crypto");function Jl(r){try{return(0,Xl.createHash)("sha256").update((0,Zl.readFileSync)(r)).digest("hex")}catch{return null}}var Du=require("fs"),Bu=require("fs/promises"),Fu=require("url");var xu=J(require("node:http"),1),Lu=J(require("node:https"),1),Mt=J(require("node:zlib"),1),we=J(require("node:stream"),1),zr=require("node:buffer");function wm(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),i="",a=!1,l=o[0]||"text/plain",c=l;for(let g=1;g<o.length;g++)o[g]==="base64"?a=!0:o[g]&&(c+=`;${o[g]}`,o[g].indexOf("charset=")===0&&(i=o[g].substring(8)));!o[0]&&!i.length&&(c+=";charset=US-ASCII",i="US-ASCII");let b=a?"base64":"ascii",p=unescape(r.substring(t+1)),m=Buffer.from(p,b);return m.type=l,m.typeFull=c,m.charset=i,m}var eu=wm;var Pe=J(require("node:stream"),1),Ze=require("node:util"),ge=require("node:buffer");Fr();$n();var Qe=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var de=class extends Qe{constructor(t,o,i){super(t,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Vn=Symbol.toStringTag,wi=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Vn]==="URLSearchParams",Mr=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Vn]),uu=r=>typeof r=="object"&&(r[Vn]==="AbortSignal"||r[Vn]==="EventTarget"),cu=(r,t)=>{let o=new URL(t).hostname,i=new URL(r).hostname;return o===i||o.endsWith(`.${i}`)},fu=(r,t)=>{let o=new URL(t).protocol,i=new URL(r).protocol;return o===i};var Bm=(0,Ze.promisify)(Pe.default.pipeline),me=Symbol("Body internals"),We=class{constructor(t,{size:o=0}={}){let i=null;t===null?t=null:wi(t)?t=ge.Buffer.from(t.toString()):Mr(t)||ge.Buffer.isBuffer(t)||(Ze.types.isAnyArrayBuffer(t)?t=ge.Buffer.from(t):ArrayBuffer.isView(t)?t=ge.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof Pe.default||(t instanceof Bt?(t=lu(t),i=t.type.split("=")[1]):t=ge.Buffer.from(String(t))));let a=t;ge.Buffer.isBuffer(t)?a=Pe.default.Readable.from(t):Mr(t)&&(a=Pe.default.Readable.from(t.stream())),this[me]={body:t,stream:a,boundary:i,disturbed:!1,error:null},this.size=o,t instanceof Pe.default&&t.on("error",l=>{let c=l instanceof Qe?l:new de(`Invalid response body while trying to fetch ${this.url}: ${l.message}`,"system",l);this[me].error=c})}get body(){return this[me].stream}get bodyUsed(){return this[me].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:i}=await Ri(this);return t.slice(o,o+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new Bt,a=new URLSearchParams(await this.text());for(let[l,c]of a)i.append(l,c);return i}let{toFormData:o}=await Promise.resolve().then(()=>(bu(),hu));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[me].body&&this[me].body.type||"",o=await this.arrayBuffer();return new Ke([o],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await Ri(this);return new TextDecoder().decode(t)}buffer(){return Ri(this)}};We.prototype.buffer=(0,Ze.deprecate)(We.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(We.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ze.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Ri(r){if(r[me].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[me].disturbed=!0,r[me].error)throw r[me].error;let{body:t}=r;if(t===null)return ge.Buffer.alloc(0);if(!(t instanceof Pe.default))return ge.Buffer.alloc(0);let o=[],i=0;try{for await(let a of t){if(r.size>0&&i+a.length>r.size){let l=new de(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(l),l}i+=a.length,o.push(a)}}catch(a){throw a instanceof Qe?a:new de(`Invalid response body while trying to fetch ${r.url}: ${a.message}`,"system",a)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(a=>typeof a=="string")?ge.Buffer.from(o.join("")):ge.Buffer.concat(o,i)}catch(a){throw new de(`Could not create Buffer from response body for ${r.url}: ${a.message}`,"system",a)}else throw new de(`Premature close of server response while trying to fetch ${r.url}`)}var lr=(r,t)=>{let o,i,{body:a}=r[me];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof Pe.default&&typeof a.getBoundary!="function"&&(o=new Pe.PassThrough({highWaterMark:t}),i=new Pe.PassThrough({highWaterMark:t}),a.pipe(o),a.pipe(i),r[me].stream=o,a=i),a},Fm=(0,Ze.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Qn=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":wi(r)?"application/x-www-form-urlencoded;charset=UTF-8":Mr(r)?r.type||null:ge.Buffer.isBuffer(r)||Ze.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Bt?`multipart/form-data; boundary=${t[me].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${Fm(r)}`:r instanceof Pe.default?null:"text/plain;charset=UTF-8",yu=r=>{let{body:t}=r[me];return t===null?0:Mr(t)?t.size:ge.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},gu=async(r,{body:t})=>{t===null?r.end():await Bm(t,r)};var Ti=require("node:util"),Wr=J(require("node:http"),1),Zn=typeof Wr.default.validateHeaderName=="function"?Wr.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Pi=typeof Wr.default.validateHeaderValue=="function"?Wr.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},Se=class r extends URLSearchParams{constructor(t){let o=[];if(t instanceof r){let i=t.raw();for(let[a,l]of Object.entries(i))o.push(...l.map(c=>[a,c]))}else if(t!=null)if(typeof t=="object"&&!Ti.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)o.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(a=>{if(typeof a!="object"||Ti.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,a])=>(Zn(i),Pi(i,String(a)),[String(i).toLowerCase(),String(a)])):void 0,super(o),new Proxy(this,{get(i,a,l){switch(a){case"append":case"set":return(c,b)=>(Zn(c),Pi(c,String(b)),URLSearchParams.prototype[a].call(i,String(c).toLowerCase(),String(b)));case"delete":case"has":case"getAll":return c=>(Zn(c),URLSearchParams.prototype[a].call(i,String(c).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,a,l)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,o=void 0){for(let i of this.keys())Reflect.apply(t,o,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let i=this.getAll(o);return o==="host"?t[o]=i[0]:t[o]=i.length>1?i:i[0],t},{})}};Object.defineProperties(Se.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function Su(r=[]){return new Se(r.reduce((t,o,i,a)=>(i%2===0&&t.push(a.slice(i,i+2)),t),[]).filter(([t,o])=>{try{return Zn(t),Pi(t,String(o)),!0}catch{return!1}}))}var Nm=new Set([301,302,303,307,308]),Xn=r=>Nm.has(r);var ke=Symbol("Response internals"),Ce=class r extends We{constructor(t=null,o={}){super(t,o);let i=o.status!=null?o.status:200,a=new Se(o.headers);if(t!==null&&!a.has("Content-Type")){let l=Qn(t,this);l&&a.append("Content-Type",l)}this[ke]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:a,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[ke].type}get url(){return this[ke].url||""}get status(){return this[ke].status}get ok(){return this[ke].status>=200&&this[ke].status<300}get redirected(){return this[ke].counter>0}get statusText(){return this[ke].statusText}get headers(){return this[ke].headers}get highWaterMark(){return this[ke].highWaterMark}clone(){return new r(lr(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!Xn(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new r(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new r(null,{status:0,statusText:""});return t[ke].type="error",t}static json(t=void 0,o={}){let i=JSON.stringify(t);if(i===void 0)throw new TypeError("data is not JSON serializable");let a=new Se(o&&o.headers);return a.has("content-type")||a.set("content-type","application/json"),new r(i,{...o,headers:a})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Ce.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Iu=require("node:url"),vu=require("node:util");var wu=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var _u=require("node:net");function Eu(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var Ru=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Tu="strict-origin-when-cross-origin";function Pu(r){if(!Ru.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function Mm(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,_u.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:r.host==="localhost"||r.host.endsWith(".localhost")?!1:r.protocol==="file:"}function ur(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:Mm(r)}function Cu(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let i=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let a=r.referrer,l=Eu(a),c=Eu(a,!0);l.toString().length>4096&&(l=c),t&&(l=t(l)),o&&(c=o(c));let b=new URL(r.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return c;case"unsafe-url":return l;case"strict-origin":return ur(l)&&!ur(b)?"no-referrer":c.toString();case"strict-origin-when-cross-origin":return l.origin===b.origin?l:ur(l)&&!ur(b)?"no-referrer":c;case"same-origin":return l.origin===b.origin?l:"no-referrer";case"origin-when-cross-origin":return l.origin===b.origin?l:c;case"no-referrer-when-downgrade":return ur(l)&&!ur(b)?"no-referrer":l;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function Au(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of t)i&&Ru.has(i)&&(o=i);return o}var te=Symbol("Request internals"),qr=r=>typeof r=="object"&&typeof r[te]=="object",Um=(0,vu.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Nt=class r extends We{constructor(t,o={}){let i;if(qr(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentials.`);let a=o.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!qr(o)&&"data"in o&&Um(),(o.body!=null||qr(t)&&t.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let l=o.body?o.body:qr(t)&&t.body!==null?lr(t):null;super(l,{size:o.size||t.size||0});let c=new Se(o.headers||t.headers||{});if(l!==null&&!c.has("Content-Type")){let m=Qn(l,this);m&&c.set("Content-Type",m)}let b=qr(t)?t.signal:null;if("signal"in o&&(b=o.signal),b!=null&&!uu(b))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let p=o.referrer==null?t.referrer:o.referrer;if(p==="")p="no-referrer";else if(p){let m=new URL(p);p=/^about:(\/\/)?client$/.test(m)?"client":m}else p=void 0;this[te]={method:a,redirect:o.redirect||t.redirect||"follow",headers:c,parsedURL:i,signal:b,referrer:p},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[te].method}get url(){return(0,Iu.format)(this[te].parsedURL)}get headers(){return this[te].headers}get redirect(){return this[te].redirect}get signal(){return this[te].signal}get referrer(){if(this[te].referrer==="no-referrer")return"";if(this[te].referrer==="client")return"about:client";if(this[te].referrer)return this[te].referrer.toString()}get referrerPolicy(){return this[te].referrerPolicy}set referrerPolicy(t){this[te].referrerPolicy=Pu(t)}clone(){return new r(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Nt.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Ou=r=>{let{parsedURL:t}=r[te],o=new Se(r[te].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(i="0"),r.body!==null){let b=yu(r);typeof b=="number"&&!Number.isNaN(b)&&(i=String(b))}i&&o.set("Content-Length",i),r.referrerPolicy===""&&(r.referrerPolicy=Tu),r.referrer&&r.referrer!=="no-referrer"?r[te].referrer=Cu(r):r[te].referrer="no-referrer",r[te].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip, deflate, br");let{agent:a}=r;typeof a=="function"&&(a=a(t));let l=wu(t),c={path:t.pathname+l,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:a};return{parsedURL:t,options:c}};var Jn=class extends Qe{constructor(t,o="aborted"){super(t,o)}};$n();Ei();var Wm=new Set(["data:","http:","https:"]);async function eo(r,t){return new Promise((o,i)=>{let a=new Nt(r,t),{parsedURL:l,options:c}=Ou(a);if(!Wm.has(l.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${l.protocol.replace(/:$/,"")}" is not supported.`);if(l.protocol==="data:"){let w=eu(a.url),W=new Ce(w,{headers:{"Content-Type":w.typeFull}});o(W);return}let b=(l.protocol==="https:"?Lu.default:xu.default).request,{signal:p}=a,m=null,g=()=>{let w=new Jn("The operation was aborted.");i(w),a.body&&a.body instanceof we.default.Readable&&a.body.destroy(w),!(!m||!m.body)&&m.body.emit("error",w)};if(p&&p.aborted){g();return}let y=()=>{g(),I()},A=b(l.toString(),c);p&&p.addEventListener("abort",y);let I=()=>{A.abort(),p&&p.removeEventListener("abort",y)};A.on("error",w=>{i(new de(`request to ${a.url} failed, reason: ${w.message}`,"system",w)),I()}),qm(A,w=>{m&&m.body&&m.body.destroy(w)}),process.version<"v14"&&A.on("socket",w=>{let W;w.prependListener("end",()=>{W=w._eventsCount}),w.prependListener("close",x=>{if(m&&W<w._eventsCount&&!x){let D=new Error("Premature close");D.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",D)}})}),A.on("response",w=>{A.setTimeout(0);let W=Su(w.rawHeaders);if(Xn(w.statusCode)){let k=W.get("Location"),$=null;try{$=k===null?null:new URL(k,a.url)}catch{if(a.redirect!=="manual"){i(new de(`uri requested responds with an invalid redirect URL: ${k}`,"invalid-redirect")),I();return}}switch(a.redirect){case"error":i(new de(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),I();return;case"manual":break;case"follow":{if($===null)break;if(a.counter>=a.follow){i(new de(`maximum redirect reached at: ${a.url}`,"max-redirect")),I();return}let B={headers:new Se(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:lr(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!cu(a.url,$)||!fu(a.url,$))for(let wt of["authorization","www-authenticate","cookie","cookie2"])B.headers.delete(wt);if(w.statusCode!==303&&a.body&&t.body instanceof we.default.Readable){i(new de("Cannot follow redirect with body being a readable stream","unsupported-redirect")),I();return}(w.statusCode===303||(w.statusCode===301||w.statusCode===302)&&a.method==="POST")&&(B.method="GET",B.body=void 0,B.headers.delete("content-length"));let ue=Au(W);ue&&(B.referrerPolicy=ue),o(eo(new Nt($,B))),I();return}default:return i(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}p&&w.once("end",()=>{p.removeEventListener("abort",y)});let x=(0,we.pipeline)(w,new we.PassThrough,k=>{k&&i(k)});process.version<"v12.10"&&w.on("aborted",y);let D={url:a.url,status:w.statusCode,statusText:w.statusMessage,headers:W,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},q=W.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||q===null||w.statusCode===204||w.statusCode===304){m=new Ce(x,D),o(m);return}let X={flush:Mt.default.Z_SYNC_FLUSH,finishFlush:Mt.default.Z_SYNC_FLUSH};if(q==="gzip"||q==="x-gzip"){x=(0,we.pipeline)(x,Mt.default.createGunzip(X),k=>{k&&i(k)}),m=new Ce(x,D),o(m);return}if(q==="deflate"||q==="x-deflate"){let k=(0,we.pipeline)(w,new we.PassThrough,$=>{$&&i($)});k.once("data",$=>{($[0]&15)===8?x=(0,we.pipeline)(x,Mt.default.createInflate(),B=>{B&&i(B)}):x=(0,we.pipeline)(x,Mt.default.createInflateRaw(),B=>{B&&i(B)}),m=new Ce(x,D),o(m)}),k.once("end",()=>{m||(m=new Ce(x,D),o(m))});return}if(q==="br"){x=(0,we.pipeline)(x,Mt.default.createBrotliDecompress(),k=>{k&&i(k)}),m=new Ce(x,D),o(m);return}m=new Ce(x,D),o(m)}),gu(A,a).catch(i)})}function qm(r,t){let o=zr.Buffer.from(`0\r
\r
`),i=!1,a=!1,l;r.on("response",c=>{let{headers:b}=c;i=b["transfer-encoding"]==="chunked"&&!b["content-length"]}),r.on("socket",c=>{let b=()=>{if(i&&!a){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",t(m)}},p=m=>{a=zr.Buffer.compare(m.slice(-5),o)===0,!a&&l&&(a=zr.Buffer.compare(l.slice(-3),o.slice(0,3))===0&&zr.Buffer.compare(m.slice(-2),o.slice(3))===0),l=m};c.prependListener("close",b),c.on("data",p),r.on("close",()=>{c.removeListener("close",b),c.removeListener("data",p)})})}var ku=require("@raycast/api");var zm={logs:new Map,set:(r,t)=>{cr.logs.set(new Date,{message:r,error:t})},clear:()=>cr.logs.clear(),toString:()=>{let r="";return cr.logs.forEach((t,o)=>{r.length>0&&(r+=`

`),r+=`[${o.toISOString()}] ${t.message}`,t.error&&(r+=`: ${Wn(t.error)}`)}),r}},cr=Object.freeze(zm),Z=(r,t)=>{cr.set(r,t),ku.environment.isDevelopment&&console.error(r,t)};function Nu(r,t,o){return new Promise((i,a)=>{let l=(0,Fu.parse)(r);eo(l.href).then(c=>{if(!c.ok)throw new Error(`Response status ${c.status}: ${c.statusText}`);if(!c.body)throw new Error("No response body");let b=(0,Du.createWriteStream)(t),p=parseInt(c.headers.get("content-length")||"0",10);if(p===0)throw new Error("Invalid file size");let m=0;c.body.on("data",g=>{b.write(g),m+=g.length,o?.(Math.floor(m/p*100))}),c.body.on("end",()=>{b.on("finish",i),b.end()}),c.body.on("error",async g=>{b.close(),await(0,Bu.unlink)(t),Z(`Failed to download file ${r}`,g),a(g)})}).catch(a)})}var{supportPath:Ut}=Y.environment,Gm="2",to=(()=>{let r=(0,Gr.join)(Ut,`bw-bin-download-error-${Gm}.log`);return{logError:t=>dt(()=>(0,pe.writeFileSync)(r,t?.message??"Unexpected error")),clearError:()=>dt(()=>(0,pe.unlinkSync)(r)),hasError:()=>dt(()=>(0,pe.existsSync)(r),!1)}})(),De={version:"2024.2.0",sha256:"fd80ffefd4686e677d7c8720258b3c92559b65b890519b1327cd4bb45887dde8",downloadPage:"https://github.com/bitwarden/clients/releases",path:{arm64:"/opt/homebrew/bin/bw",x64:"/usr/local/bin/bw",get downloadedBin(){return(0,Gr.join)(Ut,De.binFilename)},get installedBin(){return process.arch==="arm64"?this.arm64:this.x64},get bin(){if(process.arch==="arm64"){let r=new Y.Cache;try{if(!(0,pe.existsSync)(this.downloadedBin))throw new Error("No downloaded bin");return r.get("downloadedBinWorks")==="true"?this.downloadedBin:(kl(this.downloadedBin,["--version"]),r.set("downloadedBinWorks","true"),this.downloadedBin)}catch{return r.set("downloadedBinWorks","false"),this.installedBin}}return to.hasError()?this.installedBin:this.downloadedBin}},get binFilename(){return`bw-${this.version}`},get downloadUrl(){return`${this.downloadPage}/download/cli-v${this.version}/bw-macos-${this.version}.zip`},checkHashMatchesFile:function(r){return Jl(r)===this.sha256}},ro=class{constructor(t){this.callbacks={};this.preferences=(0,Y.getPreferenceValues)();this.wasCliUpdated=!1;this.showToast=async t=>{if(this.toastInstance){let o={message:this.toastInstance.message,title:this.toastInstance.title,primaryAction:this.toastInstance.primaryAction,secondaryAction:this.toastInstance.secondaryAction};return t.style&&(this.toastInstance.style=t.style),this.toastInstance.message=t.message,this.toastInstance.title=t.title,this.toastInstance.primaryAction=t.primaryAction,this.toastInstance.secondaryAction=t.secondaryAction,await this.toastInstance.show(),Object.assign(this.toastInstance,{restore:async()=>{await this.showToast(o)}})}else{let o=await(0,Y.showToast)(t);return Object.assign(o,{restore:()=>o.hide()})}};let{cliPath:o,clientId:i,clientSecret:a,serverCertsPath:l}=this.preferences,c=li();this.toastInstance=t,this.cliPath=o||De.path.bin,this.env={BITWARDENCLI_APPDATA_DIR:Ut,BW_CLIENTSECRET:a.trim(),BW_CLIENTID:i.trim(),PATH:(0,Mu.dirname)(process.execPath),...c&&l?{NODE_EXTRA_CA_CERTS:l}:{}},this.initPromise=(async()=>{await this.ensureCliBinary(),await this.checkServerUrl(c),this.lockReason=await Y.LocalStorage.getItem(re.VAULT_LOCK_REASON)})()}async ensureCliBinary(){if(this.checkCliBinIsReady(this.cliPath))return;if(this.cliPath===this.preferences.cliPath||this.cliPath===De.path.installedBin)throw new ct(`Bitwarden CLI not found at ${this.cliPath}`);to.hasError()&&to.clearError();let t=await Kl("bw-",Ut),o=await this.showToast({title:`${t?"Updating":"Initializing"} Bitwarden CLI`,style:Y.Toast.Style.Animated,primaryAction:{title:"Open Download Page",onAction:()=>(0,Y.open)(De.downloadPage)}}),a=(0,Gr.join)(Ut,"bw.zip");try{try{if(o.message="Downloading...",await Nu(De.downloadUrl,a,l=>o.message=`Downloading ${l}%`),!De.checkHashMatchesFile(a))throw new ft("Binary hash does not match")}catch(l){throw o.title="Failed to download Bitwarden CLI",l}try{o.message="Extracting...",await Yl(a,Ut);let l=(0,Gr.join)(Ut,"bw");await jl(l),await(0,fr.rename)(l,this.cliPath),await(0,fr.chmod)(this.cliPath,"755"),await(0,fr.rm)(a,{force:!0}),this.wasCliUpdated=!0}catch(l){throw o.title="Failed to extract Bitwarden CLI",l}await o.hide()}catch(l){throw o.message=l instanceof ft?l.message:"Please try again",o.style=Y.Toast.Style.Failure,Ql(a,this.cliPath),to.logError(l),l instanceof Error?new ft(`${l.name}: ${l.message}`,l.stack):l}finally{await o.restore()}}checkCliBinIsReady(t){try{return(0,pe.existsSync)(this.cliPath)?((0,pe.accessSync)(t,pe.constants.X_OK),!0):!1}catch{return(0,pe.chmodSync)(t,"755"),!0}}setActionCallback(t,o){return this.callbacks[t]=o,this}setSessionToken(t){this.env={...this.env,BW_SESSION:t}}clearSessionToken(){delete this.env.BW_SESSION}withSession(t){return this.tempSessionToken=t,this}async initialize(){return await this.initPromise,this}async checkServerUrl(t){if((await Y.LocalStorage.getItem(re.SERVER_URL)||"")===t)return;let i=await this.showToast({style:Y.Toast.Style.Animated,title:"Switching server...",message:"Bitwarden server preference changed"});try{try{await this.logout()}catch{}await this.exec(["config","server",t||Xs],{resetVaultTimeout:!1}),await Y.LocalStorage.setItem(re.SERVER_URL,t),i.style=Y.Toast.Style.Success,i.title="Success",i.message="Bitwarden server changed"}catch(a){i.style=Y.Toast.Style.Failure,i.title="Failed to switch server",a instanceof Error?i.message=a.message:i.message="Unknown error occurred"}finally{await i.restore()}}async setLockReason(t){this.lockReason=t,await Y.LocalStorage.setItem(re.VAULT_LOCK_REASON,t)}async clearLockReason(){this.lockReason&&(await Y.LocalStorage.removeItem(re.VAULT_LOCK_REASON),this.lockReason=void 0)}async exec(t,o){let{abortController:i,input:a="",resetVaultTimeout:l}=o??{},c=this.env;this.tempSessionToken&&(c={...c,BW_SESSION:this.tempSessionToken},this.tempSessionToken=void 0);let b=await Ll(this.cliPath,t,{input:a,env:c,signal:i?.signal});if(this.isPromptWaitingForMasterPassword(b))throw await this.lock(),new Dr;return l&&await Y.LocalStorage.setItem(re.LAST_ACTIVITY_TIME,new Date().toISOString()),b}async login(){try{return await this.exec(["login","--apikey"],{resetVaultTimeout:!0}),await this.clearLockReason(),await this.callbacks.login?.(),{result:void 0}}catch(t){Z("Failed to login",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async logout(t){try{return t&&await this.setLockReason(t),await this.exec(["logout"],{resetVaultTimeout:!1}),await this.handlePostLogout(),{result:void 0}}catch(o){Z("Failed to logout",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async lock(t,o){try{if(o){let{error:i,result:a}=await this.status();if(i)throw i;if(a.status!=="unauthenticated")return{error:new Br("Not logged in")}}return t&&await this.setLockReason(t),await this.exec(["lock"],{resetVaultTimeout:!1}),await this.callbacks.lock?.(t),{result:void 0}}catch(i){Z("Failed to lock vault",i);let{error:a}=await this.handleCommonErrors(i);if(!a)throw i;return{error:a}}}async unlock(t){try{let{stdout:o}=await this.exec(["unlock",t,"--raw"],{resetVaultTimeout:!0});return this.setSessionToken(o),await this.clearLockReason(),await this.callbacks.unlock?.(t,o),{result:o}}catch(o){Z("Failed to unlock vault",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async sync(){try{return await this.exec(["sync"],{resetVaultTimeout:!0}),{result:void 0}}catch(t){Z("Failed to sync vault",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async getItem(t){try{let{stdout:o}=await this.exec(["get","item",t],{resetVaultTimeout:!0});return{result:JSON.parse(o)}}catch(o){Z("Failed to get item",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async listItems(){try{let{stdout:t}=await this.exec(["list","items"],{resetVaultTimeout:!0});return{result:JSON.parse(t).filter(i=>!!i.name)}}catch(t){Z("Failed to list items",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async listFolders(){try{let{stdout:t}=await this.exec(["list","folders"],{resetVaultTimeout:!0});return{result:JSON.parse(t)}}catch(t){Z("Failed to list folder",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async createFolder(t){try{let o=await this.getTemplate("folder");o.name=t;let i=await this.encode(JSON.stringify(o));return await this.exec(["create","folder",i],{resetVaultTimeout:!0}),{result:void 0}}catch(o){Z("Failed to create folder",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async getTotp(t){try{let{stdout:o}=await this.exec(["get","totp",t],{resetVaultTimeout:!0});return{result:o}}catch(o){Z("Failed to get TOTP",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async status(){try{let{stdout:t}=await this.exec(["status"],{resetVaultTimeout:!1});return{result:JSON.parse(t)}}catch(t){Z("Failed to get status",t);let{error:o}=await this.handleCommonErrors(t);if(!o)throw t;return{error:o}}}async checkLockStatus(){try{return await this.exec(["unlock","--check"],{resetVaultTimeout:!1}),"unlocked"}catch(t){return Z("Failed to check lock status",t),t.stderr==="Vault is locked."?"locked":"unauthenticated"}}async getTemplate(t){try{let{stdout:o}=await this.exec(["get","template",t],{resetVaultTimeout:!0});return JSON.parse(o)}catch(o){Z("Failed to get template",o);let{error:i}=await this.handleCommonErrors(o);if(!i)throw o;return{error:i}}}async encode(t){let{stdout:o}=await this.exec(["encode"],{input:t,resetVaultTimeout:!1});return o}async generatePassword(t,o){let i=t?Fl(t):[],{stdout:a}=await this.exec(["generate",...i],{abortController:o,resetVaultTimeout:!1});return a}isPromptWaitingForMasterPassword(t){return!!(t.stderr&&t.stderr.includes("Master password"))}async handlePostLogout(){this.clearSessionToken(),await this.callbacks.logout?.()}async handleCommonErrors(t){let o=t.stderr;return o?/not logged in/i.test(o)?(await this.handlePostLogout(),{error:new Br("Not logged in")}):{}:{}}};var Uu=require("@raycast/api"),qu=require("react/jsx-runtime"),Wu=()=>(0,qu.jsx)(Uu.Form,{isLoading:!0});var Ie=require("@raycast/api");var Qm=require("@raycast/api");var Ci=require("react"),Py=(0,Ci.createContext)(null);var vi=require("@raycast/api");var Ai=require("@raycast/api"),zu=require("react/jsx-runtime");var oo=require("react");var St=require("@raycast/api"),$u=require("react");function Gu(r){return Object.entries(r)}var Hr=require("@raycast/api"),Hu=require("react");var Ii=require("react/jsx-runtime");var Hm=require("@raycast/api"),$m=require("react/jsx-runtime");var Vm=require("react");var Vu=require("@raycast/api");var ju=require("child_process"),Yu=require("util");var Xy=(0,Yu.promisify)(ju.exec);var no=require("@raycast/api"),jm=new no.Cache({namespace:no.environment.commandName});var Ku=require("react");var Ym=require("react/jsx-runtime"),Eg=(0,oo.createContext)(null);var Km=require("react/jsx-runtime");var Zm=require("react/jsx-runtime");var ne=require("@raycast/api");var Qu=require("child_process"),Zu=require("util");var Oi=require("fs"),Xu=require("path"),Ju=require("react/jsx-runtime"),Xm=(0,Zu.promisify)(Qu.exec),Jm=()=>{let{clientId:r,clientSecret:t,fetchFavicons:o,generatePasswordQuickAction:i,repromptIgnoreDuration:a,serverCertsPath:l,serverUrl:c,shouldCacheVaultItems:b,transientCopyGeneratePassword:p,transientCopyGeneratePasswordQuick:m,transientCopySearch:g,windowActionOnCopy:y}=(0,ne.getPreferenceValues)();return{has_clientId:!!r,has_clientSecret:!!t,fetchFavicons:o,generatePasswordQuickAction:i,repromptIgnoreDuration:a,has_serverCertsPath:!!l,has_serverUrl:!!c,shouldCacheVaultItems:b,transientCopyGeneratePassword:p,transientCopyGeneratePasswordQuick:m,transientCopySearch:g,windowActionOnCopy:y}},he="N/A",Vr=async(r,t=!0)=>{try{let{stdout:o}=await Xm(`PATH="$PATH:${(0,Xu.dirname)(process.execPath)}" ${r}`),i=o.trim();return t?i.replace(/\n|\r/g,""):i}catch(o){return Z(`Failed to execute command: ${r}`,o),he}},ep=()=>{try{let r=(0,ne.getPreferenceValues)().cliPath;return r?{type:"custom",path:r}:De.path.bin===De.path.downloadedBin?{type:"downloaded",path:De.path.downloadedBin}:{type:"installed",path:De.path.installedBin}}catch{return{type:he,path:he}}},tp=async()=>{try{let r="/opt/homebrew/bin/brew";if((0,Oi.existsSync)(r)||(r="/usr/local/bin/brew"),!(0,Oi.existsSync)(r))return{arch:he,version:he};let t=await Vr(`${r} config`,!1);if(t===he)return{arch:he,version:he};let o=/HOMEBREW_PREFIX: (.+)/.exec(t)?.[1]||he,i=/HOMEBREW_VERSION: (.+)/.exec(t)?.[1]||he;return{arch:o!==he?o.includes("/opt/homebrew")?"arm64":"x86_64":he,version:i}}catch{return{arch:he,version:he}}};function rp(){let r=async()=>{let t=await(0,ne.showToast)(ne.Toast.Style.Animated,"Collecting data...");try{let o=Jm(),i=ep(),[a,l,c,b,p]=await Promise.all([Vr("uname -m"),Vr("sw_vers -productVersion"),Vr("sw_vers -buildVersion"),Vr(`"${i.path}" --version`),tp()]),m={raycast:{version:ne.environment.raycastVersion},system:{arch:a,version:l,buildVersion:c},homebrew:{arch:p.arch,version:p.version},node:{arch:process.arch,version:process.version},cli:{type:i.type,version:b},preferences:o};await ne.Clipboard.copy(JSON.stringify(m,null,2)),t.style=ne.Toast.Style.Success,t.title="Data copied to clipboard"}catch(o){t.style=ne.Toast.Style.Failure,t.title="Failed to collect bug report data",Z("Failed to collect bug report data",o)}};return(0,Ju.jsx)(ne.Action,{title:"Collect Bug Report Data",icon:ne.Icon.Bug,onAction:r})}var jr=rp;var ec=require("@raycast/api"),tc=require("react/jsx-runtime"),xi="https://github.com/raycast/extensions/issues/new?assignees=&labels=extension%2Cbug&template=extension_bug_report.yml&title=%5BBitwarden%5D+...";function np(){return(0,tc.jsx)(ec.Action.OpenInBrowser,{title:"Open Bug Report",url:xi})}var Yr=np;var oe=require("@raycast/api");var rc=require("react/jsx-runtime");function op(){return(0,rc.jsx)(oe.Action,{onAction:async()=>{let t=cr.toString();if(t.length===0)return(0,oe.showToast)(oe.Toast.Style.Success,"No errors to copy");await oe.Clipboard.copy(t),await(0,oe.showToast)(oe.Toast.Style.Success,"Errors copied to clipboard"),await(0,oe.confirmAlert)({title:"Be careful with this information",message:"Please be mindful of where you share this error log, as it may contain sensitive information. Always analyze it before sharing.",primaryAction:{title:"Got it",style:oe.Alert.ActionStyle.Default}})},title:"Copy Last Errors",icon:oe.Icon.CopyClipboard,style:oe.Action.Style.Regular})}var Li=op;var Ae=require("react/jsx-runtime"),ip=`

`,ki="https://bitwarden.com/help/cli/#download-and-install",sp=r=>`\`\`\`
${r}
\`\`\``,ap=({error:r})=>{let t=Wn(r),o=(0,Ie.getPreferenceValues)().cliPath,i=r instanceof ft,a=o||r instanceof ct,l=[];if(a&&!i?l.push("# \u26A0\uFE0F Bitwarden CLI not found"):l.push("# \u{1F4A5} Whoops! Something went wrong"),i)l.push(`We couldn't download the [Bitwarden CLI](${ki}), you can always install it on your machine.`);else if(a){let c=o?` (${o})`:"";l.push(`We couldn't find the [Bitwarden CLI](${ki}) installed on your machine${c}.`)}else l.push(`The \`${Ie.environment.commandName}\` command crashed when we were not expecting it to.`);if(l.push("> Please read the `Setup` section in the [extension's description](https://www.raycast.com/jomifepe/bitwarden) to ensure that everything is properly configured."),l.push(`**Try restarting the command. If the issue persists, consider [reporting a bug on GitHub](${xi}) to help us fix it.**`),t){let c=/incompatible architecture/gi.test(t);l.push(">## Technical details \u{1F913}",c&&"\u26A0\uFE0F We suspect that your Bitwarden CLI was installed using a version of NodeJS that's incompatible with your system architecture (e.g. x64 NodeJS on a M1/Apple Silicon Mac). Please make sure your have the correct versions of your software installed (Homebrew \u2192 NodeJS \u2192 Bitwarden CLI).",sp(t))}return(0,Ae.jsx)(Ie.Detail,{markdown:l.filter(Boolean).join(ip),actions:(0,Ae.jsxs)(Ie.ActionPanel,{children:[(0,Ae.jsxs)(Ie.ActionPanel.Section,{title:"Bug Report",children:[(0,Ae.jsx)(Yr,{}),(0,Ae.jsx)(jr,{})]}),a&&(0,Ae.jsxs)(Ae.Fragment,{children:[(0,Ae.jsx)(Ie.Action.CopyToClipboard,{title:"Copy Homebrew Installation Command",content:"brew install bitwarden-cli"}),(0,Ae.jsx)(Ie.Action.OpenInBrowser,{title:"Open Installation Guide",url:ki})]})]})})},Kr=ap;var io=require("react/jsx-runtime"),nc=(0,Xe.createContext)(null),oc=({children:r,loadingFallback:t=(0,io.jsx)(Wu,{})})=>{let[o,i]=(0,Xe.useState)(),[a,l]=(0,Xe.useState)();(0,Xe.useEffect)(()=>{new ro().initialize().then(i).catch(c)},[]);function c(b){if(b instanceof ct)l(b);else throw b}return a?(0,io.jsx)(Kr,{error:a}):o?(0,io.jsx)(nc.Provider,{value:o,children:r}):t},$r=()=>{let r=(0,Xe.useContext)(nc);if(r==null)throw new Error("useBitwarden must be used within a BitwardenProvider");return r};var lp={options:void 0,password:void 0,isGenerating:!0},up=(r,t)=>{switch(t.type){case"generate":return{...r,isGenerating:!0};case"setPassword":return{...r,password:t.password,isGenerating:!1};case"setOptions":return{...r,options:t.options};case"cancelGenerate":return{...r,isGenerating:!1};case"clearPassword":return{...r,isGenerating:!1,password:void 0}}};function cp(){let r=$r(),[{options:t,...o},i]=(0,so.useReducer)(up,lp),{abortControllerRef:a,renew:l,abort:c}=ra(),b=async(y=t)=>{try{l(),i({type:"generate"});let A=await r.generatePassword(y,a?.current);i({type:"setPassword",password:A})}catch{a?.current.signal.aborted&&i({type:"cancelGenerate"})}},p=async()=>{o.isGenerating||await b()},m=async(y,A)=>{if(!t||t[y]===A)return;o.isGenerating&&c();let I={...t,[y]:A};i({type:"setOptions",options:I}),await Promise.all([ic.LocalStorage.setItem(re.PASSWORD_OPTIONS,JSON.stringify(I)),b(I)])},g=async()=>{let y=await Nl();i({type:"setOptions",options:y}),await b(y)};return(0,so.useEffect)(()=>{g()},[]),{...o,regeneratePassword:p,options:t,setOption:m}}var sc=cp;var ie=require("@raycast/api");var Be=require("@raycast/api");async function ac(r,t){let o=(0,Be.getPreferenceValues)().windowActionOnCopy,i=vn(r,!0);o==="keepOpen"?await(0,Be.showToast)({title:i,message:t,style:Be.Toast.Style.Success}):o==="closeAndPopToRoot"?(await(0,Be.showHUD)(i),await(0,Be.popToRoot)()):await(0,Be.showHUD)(i)}var be=require("react/jsx-runtime"),fp=r=>{let{password:t,regeneratePassword:o}=r,i=a=>async()=>{await ie.Clipboard.copy(a,{transient:Ml("password")}),await ac("Copied password to clipboard")};return(0,be.jsxs)(ie.ActionPanel,{children:[!!t&&(0,be.jsxs)(be.Fragment,{children:[(0,be.jsx)(ie.Action,{title:"Copy Password",icon:ie.Icon.Clipboard,onAction:i(t),shortcut:{key:"enter",modifiers:["cmd"]}}),(0,be.jsx)(ie.Action.Paste,{title:"Paste Password to Active App",icon:ie.Icon.Text,content:t,shortcut:{key:"enter",modifiers:["cmd","shift"]}})]}),(0,be.jsx)(ie.Action,{title:"Regenerate Password",icon:ie.Icon.ArrowClockwise,onAction:o,shortcut:{key:"backspace",modifiers:["cmd"]}}),(0,be.jsxs)(ie.ActionPanel.Section,{title:"Debugging & Bug Reporting",children:[(0,be.jsx)(Li,{}),(0,be.jsx)(Yr,{}),(0,be.jsx)(jr,{})]}),process.env.NODE_ENV==="development"&&(0,be.jsx)(ie.Action,{title:"Clear storage",icon:ie.Icon.Trash,onAction:dp})]})};async function dp(){for(let r of Object.values(re))await ie.LocalStorage.removeItem(r)}var lc=fp;var dr=require("@raycast/api"),uc=require("react");var Di=require("react/jsx-runtime"),Qr=class extends uc.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}async componentDidCatch(t,o){t instanceof ir?(this.setState(i=>({...i,hasError:!0,error:t.message})),await(0,dr.showToast)(dr.Toast.Style.Failure,t.message)):(dr.environment.isDevelopment&&this.setState(i=>({...i,hasError:!0,error:t.message})),console.error("Error:",t,o))}render(){try{return this.state.hasError?(0,Di.jsx)(Kr,{error:this.state.error}):this.props.children}catch{return(0,Di.jsx)(Kr,{})}}};var Bi=require("@raycast/api"),cc=require("react"),Fi=require("react/jsx-runtime");function mp({option:r,defaultValue:t="",onChange:o,errorMessage:i,field:a}){let{hint:l="",label:c,type:b}=a,[p,m]=(0,cc.useState)(),g=async y=>{pp(r,y)?(await o(y),m(void 0)):m(i)};return b==="boolean"?(0,Fi.jsx)(Bi.Form.Checkbox,{id:r,title:c,label:l,defaultValue:!!t,onChange:o},r):(0,Fi.jsx)(Bi.Form.TextField,{id:r,title:c,placeholder:l,defaultValue:String(t),onChange:g,error:p},r)}function pp(r,t){return r==="length"?!isNaN(Number(t))&&Number(t)>=5&&Number(t)<=128:r==="separator"?t.length===1:r==="words"?!isNaN(Number(t))&&Number(t)>=3&&Number(t)<=20:!0}var fc=mp;var le=require("react/jsx-runtime"),hp=()=>(0,le.jsx)(Je.Form.Description,{text:""}),bp=()=>(0,le.jsx)(Qr,{children:(0,le.jsx)(oc,{children:(0,le.jsx)(yp,{})})});function yp(){let{password:r,regeneratePassword:t,isGenerating:o,options:i,setOption:a}=sc();if(ea(),!i)return(0,le.jsx)(Je.Detail,{isLoading:!0});let l=p=>a("passphrase",p==="passphrase"),c=p=>m=>a(p,m),b=i?.passphrase?"passphrase":"password";return(0,le.jsxs)(Je.Form,{isLoading:o,actions:(0,le.jsx)(lc,{password:r,regeneratePassword:t}),children:[(0,le.jsx)(Je.Form.Description,{title:"\u{1F511}  Password",text:r??"Generating..."}),(0,le.jsx)(hp,{}),(0,le.jsx)(Je.Form.Separator,{}),(0,le.jsx)(Je.Form.Dropdown,{id:"type",title:"Type",value:b,onChange:l,autoFocus:!0,children:Object.keys(ai).map(p=>(0,le.jsx)(Je.Form.Dropdown.Item,{value:p,title:vn(p)},p))}),Gu(ai[b]).map(([p,m])=>(0,le.jsx)(fc,{option:p,field:m,defaultValue:i[p],errorMessage:m.errorMessage,onChange:c(p)},p))]})}var gp=bp;
/*! Bundled license information:

node-stream-zip/node_stream_zip.js:
  (**
   * @license node-stream-zip | (c) 2020 Antelle | https://github.com/antelle/node-stream-zip/blob/master/LICENSE
   * Portions copyright https://github.com/cthackers/adm-zip | https://raw.githubusercontent.com/cthackers/adm-zip/master/LICENSE
   *)

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.2
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
