"use strict";var qi=Object.create;var me=Object.defineProperty;var vi=Object.getOwnPropertyDescriptor;var Ai=Object.getOwnPropertyNames;var Ri=Object.getPrototypeOf,Fi=Object.prototype.hasOwnProperty;var l=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ni=(e,t)=>{for(var n in t)me(e,n,{get:t[n],enumerable:!0})},wt=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ai(t))!Fi.call(e,i)&&i!==n&&me(e,i,{get:()=>t[i],enumerable:!(r=vi(t,i))||r.enumerable});return e};var $=(e,t,n)=>(n=e!=null?qi(Ri(e)):{},wt(t||!e||!e.__esModule?me(n,"default",{value:e,enumerable:!0}):n,e)),Ti=e=>wt(me({},"__esModule",{value:!0}),e);var N=l((xa,yt)=>{yt.exports=Object.assign(process.env,{LANG:"en_US.UTF-8",LC_ALL:"en_US.UTF-8",LC_MESSAGES:"en_US.UTF-8"})});var we=l(he=>{var B={},I=2412;for(let e=1;e<15;e++)B[e]=I.toString(),I=I+5;I=5180;for(let e=36;e<=64;e+=2)B[e]=I.toString(),I+=10;I=5500;for(let e=100;e<=144;e+=2)B[e]=I.toString(),I+=10;I=5745;for(let e=149;e<=161;e+=2)B[e]=I.toString(),I+=10;I=5825;for(let e=165;e<=173;e+=4)B[e]=I.toString(),I+=20;function _i(e){return B[parseInt(e)]}function Oi(e){return parseFloat(e)/2-100}function Li(e){return 2*(parseFloat(e)+100)}he.frequencyFromChannel=_i;he.dBFromQuality=Oi;he.qualityFromDB=Li});var Le=l((Ea,xt)=>{var ki=require("child_process").execFile,gt=we(),Gi=N();function St(e,t){try{ki("netsh",["wlan","show","networks","mode=Bssid"],{env:Gi},(n,r)=>{if(n){t&&t(n);return}r=r.toString("utf8").split("\r").join("").split(`
`).slice(4,r.length);let i=-1,s=0,o,c=[],u,d=[],a;for(a=0;a<r.length;a++)r[a]===""&&(i++,o=r.slice(s,a),c.push(o),s=a+1);for(a=0;a<i;a++)c[a]&&c[a].length>0&&(u=Di(c[a]),d.push(u));t&&t(null,d)})}catch(n){t&&t(n)}}function Di(e){let t={};return t.mac=e[4]?e[4].match(/.*?:\s(.*)/)[1]:"",t.bssid=t.mac,t.ssid=e[0]?e[0].match(/.*?:\s(.*)/)[1]:"",t.channel=e[7]?parseInt(e[7].match(/.*?:\s(.*)/)[1]):-1,t.frequency=t.channel?parseInt(gt.frequencyFromChannel(t.channel)):0,t.signal_level=e[5]?gt.dBFromQuality(e[5].match(/.*?:\s(.*)/)[1]):Number.MIN_VALUE,t.quality=e[5]?parseFloat(e[5].match(/.*?:\s(.*)/)[1]):0,t.security=e[2]?e[2].match(/.*?:\s(.*)/)[1]:"",t.security_flags=e[3]?e[3].match(/.*?:\s(.*)/)[1]:"",t.mode="Unknown",t}xt.exports=e=>t=>{if(t)St(e,t);else return new Promise((n,r)=>{St(e,(i,s)=>{i?r(i):n(s)})})}});var Pt=l((Ia,bt)=>{var Mi=require("fs"),Et=require("child_process").execFile,It=N(),$i=Le(),Bi=require("path"),Ui=require("os"),ke=Bi.join(Ui.tmpdir(),"nodeWifiConnect.xml");function Ge(e,t){return new Promise((n,r)=>{Et(e,t,{env:It,shell:!0},(i,s,o)=>{i?(i.stdout=s,i.stderr=o,r(i)):n(s)})})}function Ct(e,t,n){$i(e)().then(r=>{let i=r.find(s=>s.ssid===t.ssid);if(i===void 0)throw"SSID not found";Mi.writeFileSync(ke,Hi(i,t.password))}).then(()=>Ge("netsh",["wlan","add","profile",`filename=${ke}`])).then(()=>{let r="netsh",i=["wlan","connect",`ssid="${t.ssid}"`,`name="${t.ssid}"`];return e.iface&&i.push(`interface="${e.iface}"`),Ge(r,i)}).then(()=>Ge(`del ${ke}`)).then(()=>{n&&n()}).catch(r=>{Et("netsh",["wlan","delete",`profile "${t.ssid}"`],{env:It},()=>{n&&n(r)})})}function ji(e){let t,n,r,i;for(i="",t=n=0,r=e.length-1;r>=0?n<=r:n>=r;t=r>=0?++n:--n)i+=e.charCodeAt(t).toString(16);return i}function Hi(e,t){let n=`<?xml version="1.0"?> <WLANProfile xmlns="http://www.microsoft.com/networking/WLAN/profile/v1"> <name>${e.ssid}</name> <SSIDConfig> <SSID> <hex>${ji(e.ssid)}</hex> <name>${e.ssid}</name> </SSID> </SSIDConfig>`;return e.security.includes("WPA2")?n+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>WPA2PSK</authentication> <encryption>AES</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>passPhrase</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:e.security.includes("WPA")?n+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>WPAPSK</authentication> <encryption>TKIP</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>passPhrase</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:e.security_flags.includes("WEP")?n+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>open</authentication> <encryption>WEP</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>networkKey</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:n+="<connectionType>ESS</connectionType> <connectionMode>manual</connectionMode> <MSM> <security> <authEncryption> <authentication>open</authentication> <encryption>none</encryption> <useOneX>false</useOneX> </authEncryption> </security> </MSM>",n+="</WLANProfile>",n}bt.exports=e=>(t,n)=>{if(n)Ct(e,t,n);else return new Promise((r,i)=>{Ct(e,t,s=>{s?i(s):r()})})}});var vt=l((ba,qt)=>{var Xi=require("child_process").execFile,Ki=N();function Wt(e,t){let n="netsh",r=["wlan","disconnect"];e.iface&&r.push(`interface="${e.iface}"`),Xi(n,r,{env:Ki},i=>{t&&t(i)})}qt.exports=e=>t=>{if(t)Wt(e,t);else return new Promise((n,r)=>{Wt(e,i=>{i?r(i):n()})})}});var Nt=l((Pa,Ft)=>{var zi=require("child_process").execFile,Vi=N(),At=we();function Zi(e){let t=e.split(`\r
`),n=[],r=3;for(;t.length>r+18;){let i={},s=["name","description","guid","mac","state","ssid","bssid","mode","radio","authentication","encryption","connection","channel","reception","transmission","signal","profil"];for(let o=0;o<s.length;o++){let c=t[r+o];i[s[o]]=c.match(/.*: (.*)/)[1]}n.push({iface:i.name,ssid:i.ssid,bssid:i.bssid,mac:i.bssid,mode:i.mode,channel:parseInt(i.channel),frequency:parseInt(At.frequencyFromChannel(parseInt(i.channel))),signal_level:At.dBFromQuality(i.signal),quality:parseFloat(i.signal),security:i.authentication,security_flags:i.encryption}),r=r+18}return n}function Rt(e,t){zi("netsh",["wlan","show","interfaces"],{env:Vi},(r,i)=>{if(r)t&&t(r);else try{let s=Zi(i,e);t&&t(null,s)}catch(s){t&&t(s)}})}Ft.exports=e=>t=>{if(t)Rt(e,t);else return new Promise((n,r)=>{Rt(e,(i,s)=>{i?r(i):n(s)})})}});var Ot=l((Wa,_t)=>{var Qi=require("child_process").execFile,Ji=N();function Tt(e,t,n){let r=[];r.push("-w"),r.push("10"),r.push("device"),r.push("wifi"),r.push("connect"),r.push(t.ssid),r.push("password"),r.push(t.password),e.iface&&(r.push("ifname"),r.push(e.iface)),Qi("nmcli",r,{env:Ji},(i,s)=>{s.includes("Error: ")&&(i=new Error(s.replace("Error: ",""))),n&&n(i)})}_t.exports=e=>(t,n)=>{if(n)Tt(e,t,n);else return new Promise((r,i)=>{Tt(e,t,s=>{s?i(s):r()})})}});var Gt=l((qa,kt)=>{var Yi=require("child_process").execFile,es=N();function Lt(e,t){let n=[];n.push("device"),n.push("disconnect"),e.iface&&n.push(e.iface),Yi("nmcli",n,{env:es},r=>{t&&t(r)})}kt.exports=e=>t=>{if(t)Lt(e,t);else return new Promise((n,r)=>{Lt(e,i=>{i?r(i):n()})})}});var $t=l((va,Mt)=>{var ts=require("child_process").execFile,ns=N();function Dt(e,t,n){let r=[];r.push("connection"),r.push("delete"),r.push("id"),r.push(t.ssid),ts("nmcli",r,ns,i=>{n&&n(i)})}Mt.exports=e=>(t,n)=>{if(n)Dt(e,t,n);else return new Promise((r,i)=>{Dt(e,t,s=>{s?i(s):r()})})}});var jt=l((Aa,Ut)=>{var rs=require("child_process").execFile,is=we(),ss=N();function Bt(e,t){let n=[];n.push("--terse"),n.push("--fields"),n.push("active,ssid,bssid,mode,chan,freq,signal,security,wpa-flags,rsn-flags,device"),n.push("device"),n.push("wifi"),e.iface&&(n.push("list"),n.push("ifname"),n.push(e.iface)),rs("nmcli",n,{env:ss},(r,i)=>{if(r){t&&t(r);return}let s=i.split(`
`),o=[];for(let c=0;c<s.length;c++)if(s[c]!=""){let u=s[c].replace(/\\:/g,"&&").split(":");u[0]=="yes"&&o.push({iface:u[10].replace(/&&/g,":"),ssid:u[1].replace(/&&/g,":"),bssid:u[2].replace(/&&/g,":"),mac:u[2].replace(/&&/g,":"),mode:u[3].replace(/&&/g,":"),channel:parseInt(u[4].replace(/&&/g,":")),frequency:parseInt(u[5].replace(/&&/g,":")),signal_level:is.dBFromQuality(u[6].replace(/&&/g,":")),quality:parseFloat(u[6].replace(/&&/g,":")),security:u[7].replace(/&&/g,":"),security_flags:{wpa:u[8].replace(/&&/g,":"),rsn:u[9].replace(/&&/g,":")}})}t&&t(null,o)})}Ut.exports=e=>t=>{if(t)Bt(e,t);else return new Promise((n,r)=>{Bt(e,(i,s)=>{i?r(i):n(s)})})}});var U=l((Ra,Ht)=>{var{execFile:os}=require("child_process"),cs=N();Ht.exports=({cmd:e,args:t})=>new Promise((n,r)=>{os(e,t,{env:cs},(i,s)=>{i?r(i):n(s)})})});var j=l((Fa,Xt)=>{var as=e=>{let t=e.length-1;return t>=0&&typeof e[t]=="function"?{callback:e[t],args:e.slice(0,t)}:{callback:null,args:e}};Xt.exports=e=>t=>(...n)=>{let{args:r,callback:i}=as(n);if(typeof i=="function")e(t,...r).then(s=>{i(null,s)}).catch(s=>{i(s)});else return e(t,...r)}});var zt=l((Na,Kt)=>{var us=e=>{let t=["--terse","--fields","active,ssid,bssid,mode,chan,freq,signal,security,wpa-flags,rsn-flags","device","wifi","list"];return e.iface&&(t.push("ifname"),t.push(e.iface)),{cmd:"nmcli",args:t}};Kt.exports=us});var ye=l((Ta,Vt)=>{var ls=e=>2*(parseFloat(e)+100),fs=e=>parseFloat(e)/2-100;Vt.exports={percentageFromDB:ls,dBFromPercentage:fs}});var Jt=l((_a,Qt)=>{var{dBFromPercentage:ds}=ye(),Zt=e=>e.match(/[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}/),ps=e=>e.split(`
`).filter(t=>t!==""&&t.includes(":")).filter(t=>Zt(t)).map(t=>{let n=Zt(t),r=n[0].replace(/\\:/g,":"),i=t.replace(n[0]).split(":"),[s,o,c,u,d,a,m,p,g,S]=i;return{ssid:o,bssid:r,mac:r,mode:u,channel:parseInt(d),frequency:parseInt(a),signal_level:ds(m),quality:parseInt(m),security:p!=="(none)"?p:"none",security_flags:{wpa:g,rsn:S}}});Qt.exports=ps});var en=l((Oa,Yt)=>{var ms=U(),hs=j(),ws=zt(),ys=Jt(),gs=e=>ms(ws(e)).then(t=>ys(t));Yt.exports=hs(gs)});var nn=l((La,tn)=>{var Ss=(e,t)=>{let n=["-setairportnetwork"];return n.push(e.iface||"en0"),n.push(t.ssid),n.push(t.password),{cmd:"/usr/sbin/networksetup",args:n}};tn.exports=Ss});var sn=l((ka,rn)=>{var xs=U(),Cs=j(),Es=nn(),Is=(e,t)=>xs(Es(e,t));rn.exports=Cs(Is)});var cn=l((Ga,on)=>{var bs=()=>({cmd:"/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport",args:["--scan"]});on.exports=bs});var De=l((Da,an)=>{var H={},b=2412;for(let e=1;e<15;e++)H[e]=b,b=b+5;b=5180;for(let e=36;e<=64;e+=2)H[e]=b,b+=10;b=5500;for(let e=100;e<=144;e+=2)H[e]=b,b+=10;b=5745;for(let e=149;e<=161;e+=2)H[e]=b,b+=10;b=5825;for(let e=165;e<=173;e+=4)H[e]=b,b+=20;an.exports=e=>H[parseInt(e)]});var ln=l((Ma,un)=>{var{percentageFromDB:Ps}=ye(),Ws=De(),qs=e=>e.trim()!=="",vs=e=>{let t=e==="NONE"?[{protocole:"NONE",flag:""}]:e.split(" ").map(n=>n.match(/(.*)\((.*)\)/)).filter(Boolean).map(([,n,r])=>({protocole:n,flag:r}));return{security:t.map(n=>n.protocole).join(" "),security_flags:t.filter(n=>n.flag).map(n=>`(${n.flag})`)}},As=e=>{let t=e.split(`
`),[,...n]=t;return n.filter(qs).map(i=>i.trim()).map(i=>{let s=i.match(/(.*)\s+([a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}|)\s+(-[0-9]+)\s+([0-9]+).*\s+([A-Z]+)\s+([a-zA-Z-]+)\s+([A-Z0-9(,)\s/]+)/);if(s){let[,o,c,u,d,a,m,p]=s,g=parseInt(d);return{mac:c,bssid:c,ssid:o.trim(),channel:g,frequency:Ws(g),signal_level:u,quality:Ps(u),...vs(p)}}return!1}).filter(Boolean)};un.exports=As});var dn=l(($a,fn)=>{var Rs=U(),Fs=j(),Ns=cn(),Ts=ln(),_s=e=>Rs(Ns(e)).then(t=>Ts(t));fn.exports=Fs(_s)});var mn=l((Ba,pn)=>{var Os=(e,t)=>{let n=["-removepreferredwirelessnetwork"];return n.push(e.iface||"en0"),n.push(t.ssid),{cmd:"/usr/sbin/networksetup",args:n}};pn.exports=Os});var wn=l((Ua,hn)=>{var Ls=e=>{if(e&&e.includes("was not found in the preferred networks list"))throw new Error(e.trim())};hn.exports=Ls});var gn=l((ja,yn)=>{var ks=U(),Gs=j(),Ds=mn(),Ms=wn(),$s=(e,t)=>ks(Ds(e,t)).then(n=>Ms(n));yn.exports=Gs($s)});var xn=l((Ha,Sn)=>{var Bs=()=>({cmd:"/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport",args:["--getinfo"]});Sn.exports=Bs});var En=l((Xa,Cn)=>{var{percentageFromDB:Us}=ye(),js=De(),Hs=/[ ]*agrCtlRSSI: (.*)/,Xs=/[ ]*BSSID: ([0-9A-Fa-f:]*)/,Ks=/[ ]*SSID: (.*)/,zs=/[ ]*link auth: (.*)/,Vs=/[ ]*channel: (.*)/,Zs=e=>e.split(":").map(t=>t.length===1?`0${t}`:t).join(":"),Qs=e=>{let t=e.split(`
`),n=[],r={};return t.forEach(i=>{let s=i.match(Hs);if(s){r.signal_level=parseInt(s[1]),r.quality=Us(r.signal_level);return}let o=i.match(Xs);if(o){r.bssid=Zs(o[1]),r.mac=r.bssid;return}let c=i.match(Ks);if(c){r.ssid=c[1];return}let u=i.match(zs);if(u){r.security=u[1],r.security_flags=[];return}let d=i.match(Vs);d&&(r.channel=d[1],r.frequency=js(r.channel),n.push(r),r={})}),n};Cn.exports=Qs});var bn=l((Ka,In)=>{var Js=U(),Ys=j(),eo=xn(),to=En(),no=e=>Js(eo(e)).then(t=>to(t));In.exports=Ys(no)});var ge=l(A=>{var ro=Pt(),io=Le(),so=vt(),oo=Nt(),co=Ot(),ao=Gt(),uo=$t(),lo=jt(),fo=en(),po=sn(),mo=dn(),ho=gn(),wo=bn(),P={debug:!1,iface:null};function yo(e){e&&e.debug&&(P.debug=e.debug),e&&e.iface&&(P.iface=e.iface);let t=()=>{throw new Error("ERROR : not available for this OS")},n=()=>{throw new Error("ERROR : not available for this OS")},r=()=>{throw new Error("ERROR : not available for this OS")},i=()=>{throw new Error("ERROR : not available for this OS")},s=()=>{throw new Error("ERROR : not available for this OS")};switch(process.platform){case"linux":n=co(P),t=fo(P),r=ao(P),i=uo(P),s=lo(P);break;case"darwin":n=po(P),t=mo(P),i=ho(P),s=wo(P);break;case"win32":n=ro(P),t=io(P),r=so(P),s=oo(P);break;default:throw new Error("ERROR : UNRECOGNIZED OS")}A.scan=t,A.connect=n,A.disconnect=r,A.deleteConnection=i,A.getCurrentConnections=s}A.init=yo;A.scan=()=>{throw new Error("ERROR : use init before")};A.connect=()=>{throw new Error("ERROR : use init before")};A.disconnect=()=>{throw new Error("ERROR : use init before")};A.getCurrentConnections=()=>{throw new Error("ERROR : use init before")};A.deleteConnection=()=>{throw new Error("ERROR : use init before")}});var An=l((Za,vn)=>{vn.exports=qn;qn.sync=So;var Pn=require("fs");function go(e,t){var n=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}function Wn(e,t,n){return!e.isSymbolicLink()&&!e.isFile()?!1:go(t,n)}function qn(e,t,n){Pn.stat(e,function(r,i){n(r,r?!1:Wn(i,e,t))})}function So(e,t){return Wn(Pn.statSync(e),e,t)}});var _n=l((Qa,Tn)=>{Tn.exports=Fn;Fn.sync=xo;var Rn=require("fs");function Fn(e,t,n){Rn.stat(e,function(r,i){n(r,r?!1:Nn(i,t))})}function xo(e,t){return Nn(Rn.statSync(e),t)}function Nn(e,t){return e.isFile()&&Co(e,t)}function Co(e,t){var n=e.mode,r=e.uid,i=e.gid,s=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),o=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),c=parseInt("100",8),u=parseInt("010",8),d=parseInt("001",8),a=c|u,m=n&d||n&u&&i===o||n&c&&r===s||n&a&&s===0;return m}});var Ln=l((Ya,On)=>{var Ja=require("fs"),Se;process.platform==="win32"||global.TESTING_WINDOWS?Se=An():Se=_n();On.exports=Me;Me.sync=Eo;function Me(e,t,n){if(typeof t=="function"&&(n=t,t={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,i){Me(e,t||{},function(s,o){s?i(s):r(o)})})}Se(e,t||{},function(r,i){r&&(r.code==="EACCES"||t&&t.ignoreErrors)&&(r=null,i=!1),n(r,i)})}function Eo(e,t){try{return Se.sync(e,t||{})}catch(n){if(t&&t.ignoreErrors||n.code==="EACCES")return!1;throw n}}});var Un=l((eu,Bn)=>{var X=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",kn=require("path"),Io=X?";":":",Gn=Ln(),Dn=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),Mn=(e,t)=>{let n=t.colon||Io,r=e.match(/\//)||X&&e.match(/\\/)?[""]:[...X?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],i=X?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=X?i.split(n):[""];return X&&e.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:r,pathExt:s,pathExtExe:i}},$n=(e,t,n)=>{typeof t=="function"&&(n=t,t={}),t||(t={});let{pathEnv:r,pathExt:i,pathExtExe:s}=Mn(e,t),o=[],c=d=>new Promise((a,m)=>{if(d===r.length)return t.all&&o.length?a(o):m(Dn(e));let p=r[d],g=/^".*"$/.test(p)?p.slice(1,-1):p,S=kn.join(g,e),W=!g&&/^\.[\\\/]/.test(e)?e.slice(0,2)+S:S;a(u(W,d,0))}),u=(d,a,m)=>new Promise((p,g)=>{if(m===i.length)return p(c(a+1));let S=i[m];Gn(d+S,{pathExt:s},(W,F)=>{if(!W&&F)if(t.all)o.push(d+S);else return p(d+S);return p(u(d,a,m+1))})});return n?c(0).then(d=>n(null,d),n):c(0)},bo=(e,t)=>{t=t||{};let{pathEnv:n,pathExt:r,pathExtExe:i}=Mn(e,t),s=[];for(let o=0;o<n.length;o++){let c=n[o],u=/^".*"$/.test(c)?c.slice(1,-1):c,d=kn.join(u,e),a=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+d:d;for(let m=0;m<r.length;m++){let p=a+r[m];try{if(Gn.sync(p,{pathExt:i}))if(t.all)s.push(p);else return p}catch{}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw Dn(e)};Bn.exports=$n;$n.sync=bo});var Be=l((tu,$e)=>{"use strict";var jn=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};$e.exports=jn;$e.exports.default=jn});var zn=l((nu,Kn)=>{"use strict";var Hn=require("path"),Po=Un(),Wo=Be();function Xn(e,t){let n=e.options.env||process.env,r=process.cwd(),i=e.options.cwd!=null,s=i&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(e.options.cwd)}catch{}let o;try{o=Po.sync(e.command,{path:n[Wo({env:n})],pathExt:t?Hn.delimiter:void 0})}catch{}finally{s&&process.chdir(r)}return o&&(o=Hn.resolve(i?e.options.cwd:"",o)),o}function qo(e){return Xn(e)||Xn(e,!0)}Kn.exports=qo});var Vn=l((ru,je)=>{"use strict";var Ue=/([()\][%!^"`<>&|;, *?])/g;function vo(e){return e=e.replace(Ue,"^$1"),e}function Ao(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(Ue,"^$1"),t&&(e=e.replace(Ue,"^$1")),e}je.exports.command=vo;je.exports.argument=Ao});var Qn=l((iu,Zn)=>{"use strict";Zn.exports=/^#!(.*)/});var Yn=l((su,Jn)=>{"use strict";var Ro=Qn();Jn.exports=(e="")=>{let t=e.match(Ro);if(!t)return null;let[n,r]=t[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return i==="env"?r:r?`${i} ${r}`:i}});var tr=l((ou,er)=>{"use strict";var He=require("fs"),Fo=Yn();function No(e){let n=Buffer.alloc(150),r;try{r=He.openSync(e,"r"),He.readSync(r,n,0,150,0),He.closeSync(r)}catch{}return Fo(n.toString())}er.exports=No});var sr=l((cu,ir)=>{"use strict";var To=require("path"),nr=zn(),rr=Vn(),_o=tr(),Oo=process.platform==="win32",Lo=/\.(?:com|exe)$/i,ko=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Go(e){e.file=nr(e);let t=e.file&&_o(e.file);return t?(e.args.unshift(e.file),e.command=t,nr(e)):e.file}function Do(e){if(!Oo)return e;let t=Go(e),n=!Lo.test(t);if(e.options.forceShell||n){let r=ko.test(t);e.command=To.normalize(e.command),e.command=rr.command(e.command),e.args=e.args.map(s=>rr.argument(s,r));let i=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${i}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function Mo(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null),t=t?t.slice(0):[],n=Object.assign({},n);let r={command:e,args:t,options:n,file:void 0,original:{command:e,args:t}};return n.shell?r:Do(r)}ir.exports=Mo});var ar=l((au,cr)=>{"use strict";var Xe=process.platform==="win32";function Ke(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function $o(e,t){if(!Xe)return;let n=e.emit;e.emit=function(r,i){if(r==="exit"){let s=or(i,t,"spawn");if(s)return n.call(e,"error",s)}return n.apply(e,arguments)}}function or(e,t){return Xe&&e===1&&!t.file?Ke(t.original,"spawn"):null}function Bo(e,t){return Xe&&e===1&&!t.file?Ke(t.original,"spawnSync"):null}cr.exports={hookChildProcess:$o,verifyENOENT:or,verifyENOENTSync:Bo,notFoundError:Ke}});var fr=l((uu,K)=>{"use strict";var ur=require("child_process"),ze=sr(),Ve=ar();function lr(e,t,n){let r=ze(e,t,n),i=ur.spawn(r.command,r.args,r.options);return Ve.hookChildProcess(i,r),i}function Uo(e,t,n){let r=ze(e,t,n),i=ur.spawnSync(r.command,r.args,r.options);return i.error=i.error||Ve.verifyENOENTSync(i.status,r),i}K.exports=lr;K.exports.spawn=lr;K.exports.sync=Uo;K.exports._parse=ze;K.exports._enoent=Ve});var pr=l((lu,dr)=>{"use strict";dr.exports=e=>{let t=typeof e=="string"?`
`:`
`.charCodeAt(),n=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e}});var wr=l((fu,se)=>{"use strict";var ie=require("path"),mr=Be(),hr=e=>{e={cwd:process.cwd(),path:process.env[mr()],execPath:process.execPath,...e};let t,n=ie.resolve(e.cwd),r=[];for(;t!==n;)r.push(ie.join(n,"node_modules/.bin")),t=n,n=ie.resolve(n,"..");let i=ie.resolve(e.cwd,e.execPath,"..");return r.push(i),r.concat(e.path).join(ie.delimiter)};se.exports=hr;se.exports.default=hr;se.exports.env=e=>{e={env:process.env,...e};let t={...e.env},n=mr({env:t});return e.path=t[n],t[n]=se.exports(e),t}});var gr=l((du,Ze)=>{"use strict";var yr=(e,t)=>{for(let n of Reflect.ownKeys(t))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e};Ze.exports=yr;Ze.exports.default=yr});var xr=l((pu,Ce)=>{"use strict";var jo=gr(),xe=new WeakMap,Sr=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let n,r=0,i=e.displayName||e.name||"<anonymous>",s=function(...o){if(xe.set(s,++r),r===1)n=e.apply(this,o),e=null;else if(t.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return n};return jo(s,e),xe.set(s,r),s};Ce.exports=Sr;Ce.exports.default=Sr;Ce.exports.callCount=e=>{if(!xe.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return xe.get(e)}});var Cr=l(Ee=>{"use strict";Object.defineProperty(Ee,"__esModule",{value:!0});Ee.SIGNALS=void 0;var Ho=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Ee.SIGNALS=Ho});var Qe=l(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.SIGRTMAX=z.getRealtimeSignals=void 0;var Xo=function(){let e=Ir-Er+1;return Array.from({length:e},Ko)};z.getRealtimeSignals=Xo;var Ko=function(e,t){return{name:`SIGRT${t+1}`,number:Er+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Er=34,Ir=64;z.SIGRTMAX=Ir});var br=l(Ie=>{"use strict";Object.defineProperty(Ie,"__esModule",{value:!0});Ie.getSignals=void 0;var zo=require("os"),Vo=Cr(),Zo=Qe(),Qo=function(){let e=(0,Zo.getRealtimeSignals)();return[...Vo.SIGNALS,...e].map(Jo)};Ie.getSignals=Qo;var Jo=function({name:e,number:t,description:n,action:r,forced:i=!1,standard:s}){let{signals:{[e]:o}}=zo.constants,c=o!==void 0;return{name:e,number:c?o:t,description:n,supported:c,action:r,forced:i,standard:s}}});var Wr=l(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});V.signalsByNumber=V.signalsByName=void 0;var Yo=require("os"),Pr=br(),ec=Qe(),tc=function(){return(0,Pr.getSignals)().reduce(nc,{})},nc=function(e,{name:t,number:n,description:r,supported:i,action:s,forced:o,standard:c}){return{...e,[t]:{name:t,number:n,description:r,supported:i,action:s,forced:o,standard:c}}},rc=tc();V.signalsByName=rc;var ic=function(){let e=(0,Pr.getSignals)(),t=ec.SIGRTMAX+1,n=Array.from({length:t},(r,i)=>sc(i,e));return Object.assign({},...n)},sc=function(e,t){let n=oc(e,t);if(n===void 0)return{};let{name:r,description:i,supported:s,action:o,forced:c,standard:u}=n;return{[e]:{name:r,number:e,description:i,supported:s,action:o,forced:c,standard:u}}},oc=function(e,t){let n=t.find(({name:r})=>Yo.constants.signals[r]===e);return n!==void 0?n:t.find(r=>r.number===e)},cc=ic();V.signalsByNumber=cc});var vr=l((gu,qr)=>{"use strict";var{signalsByName:ac}=Wr(),uc=({timedOut:e,timeout:t,errorCode:n,signal:r,signalDescription:i,exitCode:s,isCanceled:o})=>e?`timed out after ${t} milliseconds`:o?"was canceled":n!==void 0?`failed with ${n}`:r!==void 0?`was killed with ${r} (${i})`:s!==void 0?`failed with exit code ${s}`:"failed",lc=({stdout:e,stderr:t,all:n,error:r,signal:i,exitCode:s,command:o,escapedCommand:c,timedOut:u,isCanceled:d,killed:a,parsed:{options:{timeout:m}}})=>{s=s===null?void 0:s,i=i===null?void 0:i;let p=i===void 0?void 0:ac[i].description,g=r&&r.code,W=`Command ${uc({timedOut:u,timeout:m,errorCode:g,signal:i,signalDescription:p,exitCode:s,isCanceled:d})}: ${o}`,F=Object.prototype.toString.call(r)==="[object Error]",_=F?`${W}
${r.message}`:W,R=[_,t,e].filter(Boolean).join(`
`);return F?(r.originalMessage=r.message,r.message=R):r=new Error(R),r.shortMessage=_,r.command=o,r.escapedCommand=c,r.exitCode=s,r.signal=i,r.signalDescription=p,r.stdout=e,r.stderr=t,n!==void 0&&(r.all=n),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=!!u,r.isCanceled=d,r.killed=a&&!u,r};qr.exports=lc});var Rr=l((Su,Je)=>{"use strict";var be=["stdin","stdout","stderr"],fc=e=>be.some(t=>e[t]!==void 0),Ar=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return be.map(r=>e[r]);if(fc(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${be.map(r=>`\`${r}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let n=Math.max(t.length,be.length);return Array.from({length:n},(r,i)=>t[i])};Je.exports=Ar;Je.exports.node=e=>{let t=Ar(e);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var Fr=l((xu,Pe)=>{Pe.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Pe.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Pe.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Lr=l((Cu,J)=>{var y=global.process,G=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};G(y)?(Nr=require("assert"),Z=Fr(),Tr=/^win/i.test(y.platform),oe=require("events"),typeof oe!="function"&&(oe=oe.EventEmitter),y.__signal_exit_emitter__?E=y.__signal_exit_emitter__:(E=y.__signal_exit_emitter__=new oe,E.count=0,E.emitted={}),E.infinite||(E.setMaxListeners(1/0),E.infinite=!0),J.exports=function(e,t){if(!G(global.process))return function(){};Nr.equal(typeof e,"function","a callback must be provided for exit handler"),Q===!1&&Ye();var n="exit";t&&t.alwaysLast&&(n="afterexit");var r=function(){E.removeListener(n,e),E.listeners("exit").length===0&&E.listeners("afterexit").length===0&&We()};return E.on(n,e),r},We=function(){!Q||!G(global.process)||(Q=!1,Z.forEach(function(t){try{y.removeListener(t,qe[t])}catch{}}),y.emit=ve,y.reallyExit=et,E.count-=1)},J.exports.unload=We,D=function(t,n,r){E.emitted[t]||(E.emitted[t]=!0,E.emit(t,n,r))},qe={},Z.forEach(function(e){qe[e]=function(){if(G(global.process)){var n=y.listeners(e);n.length===E.count&&(We(),D("exit",null,e),D("afterexit",null,e),Tr&&e==="SIGHUP"&&(e="SIGINT"),y.kill(y.pid,e))}}}),J.exports.signals=function(){return Z},Q=!1,Ye=function(){Q||!G(global.process)||(Q=!0,E.count+=1,Z=Z.filter(function(t){try{return y.on(t,qe[t]),!0}catch{return!1}}),y.emit=Or,y.reallyExit=_r)},J.exports.load=Ye,et=y.reallyExit,_r=function(t){G(global.process)&&(y.exitCode=t||0,D("exit",y.exitCode,null),D("afterexit",y.exitCode,null),et.call(y,y.exitCode))},ve=y.emit,Or=function(t,n){if(t==="exit"&&G(global.process)){n!==void 0&&(y.exitCode=n);var r=ve.apply(this,arguments);return D("exit",y.exitCode,null),D("afterexit",y.exitCode,null),r}else return ve.apply(this,arguments)}):J.exports=function(){return function(){}};var Nr,Z,Tr,oe,E,We,D,qe,Q,Ye,et,_r,ve,Or});var Gr=l((Eu,kr)=>{"use strict";var dc=require("os"),pc=Lr(),mc=1e3*5,hc=(e,t="SIGTERM",n={})=>{let r=e(t);return wc(e,t,n,r),r},wc=(e,t,n,r)=>{if(!yc(t,n,r))return;let i=Sc(n),s=setTimeout(()=>{e("SIGKILL")},i);s.unref&&s.unref()},yc=(e,{forceKillAfterTimeout:t},n)=>gc(e)&&t!==!1&&n,gc=e=>e===dc.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Sc=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return mc;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},xc=(e,t)=>{e.kill()&&(t.isCanceled=!0)},Cc=(e,t,n)=>{e.kill(t),n(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Ec=(e,{timeout:t,killSignal:n="SIGTERM"},r)=>{if(t===0||t===void 0)return r;let i,s=new Promise((c,u)=>{i=setTimeout(()=>{Cc(e,n,u)},t)}),o=r.finally(()=>{clearTimeout(i)});return Promise.race([s,o])},Ic=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},bc=async(e,{cleanup:t,detached:n},r)=>{if(!t||n)return r;let i=pc(()=>{e.kill()});return r.finally(()=>{i()})};kr.exports={spawnedKill:hc,spawnedCancel:xc,setupTimeout:Ec,validateTimeout:Ic,setExitHandler:bc}});var Mr=l((Iu,Dr)=>{"use strict";var T=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";T.writable=e=>T(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";T.readable=e=>T(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";T.duplex=e=>T.writable(e)&&T.readable(e);T.transform=e=>T.duplex(e)&&typeof e._transform=="function";Dr.exports=T});var Br=l((bu,$r)=>{"use strict";var{PassThrough:Pc}=require("stream");$r.exports=e=>{e={...e};let{array:t}=e,{encoding:n}=e,r=n==="buffer",i=!1;t?i=!(n||r):n=n||"utf8",r&&(n=null);let s=new Pc({objectMode:i});n&&s.setEncoding(n);let o=0,c=[];return s.on("data",u=>{c.push(u),i?o=c.length:o+=u.length}),s.getBufferedValue=()=>t?c:r?Buffer.concat(c,o):c.join(""),s.getBufferedLength=()=>o,s}});var Ur=l((Pu,ce)=>{"use strict";var{constants:Wc}=require("buffer"),qc=require("stream"),{promisify:vc}=require("util"),Ac=Br(),Rc=vc(qc.pipeline),Ae=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function tt(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:n}=t,r=Ac(t);return await new Promise((i,s)=>{let o=c=>{c&&r.getBufferedLength()<=Wc.MAX_LENGTH&&(c.bufferedData=r.getBufferedValue()),s(c)};(async()=>{try{await Rc(e,r),i()}catch(c){o(c)}})(),r.on("data",()=>{r.getBufferedLength()>n&&o(new Ae)})}),r.getBufferedValue()}ce.exports=tt;ce.exports.buffer=(e,t)=>tt(e,{...t,encoding:"buffer"});ce.exports.array=(e,t)=>tt(e,{...t,array:!0});ce.exports.MaxBufferError=Ae});var Hr=l((Wu,jr)=>{"use strict";var{PassThrough:Fc}=require("stream");jr.exports=function(){var e=[],t=new Fc({objectMode:!0});return t.setMaxListeners(0),t.add=n,t.isEmpty=r,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(n),t;function n(s){return Array.isArray(s)?(s.forEach(n),this):(e.push(s),s.once("end",i.bind(null,s)),s.once("error",t.emit.bind(t,"error")),s.pipe(t,{end:!1}),this)}function r(){return e.length==0}function i(s){e=e.filter(function(o){return o!==s}),!e.length&&t.readable&&t.end()}}});var Vr=l((qu,zr)=>{"use strict";var Kr=Mr(),Xr=Ur(),Nc=Hr(),Tc=(e,t)=>{t===void 0||e.stdin===void 0||(Kr(t)?t.pipe(e.stdin):e.stdin.end(t))},_c=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let n=Nc();return e.stdout&&n.add(e.stdout),e.stderr&&n.add(e.stderr),n},nt=async(e,t)=>{if(e){e.destroy();try{return await t}catch(n){return n.bufferedData}}},rt=(e,{encoding:t,buffer:n,maxBuffer:r})=>{if(!(!e||!n))return t?Xr(e,{encoding:t,maxBuffer:r}):Xr.buffer(e,{maxBuffer:r})},Oc=async({stdout:e,stderr:t,all:n},{encoding:r,buffer:i,maxBuffer:s},o)=>{let c=rt(e,{encoding:r,buffer:i,maxBuffer:s}),u=rt(t,{encoding:r,buffer:i,maxBuffer:s}),d=rt(n,{encoding:r,buffer:i,maxBuffer:s*2});try{return await Promise.all([o,c,u,d])}catch(a){return Promise.all([{error:a,signal:a.signal,timedOut:a.timedOut},nt(e,c),nt(t,u),nt(n,d)])}},Lc=({input:e})=>{if(Kr(e))throw new TypeError("The `input` option cannot be a stream in sync mode")};zr.exports={handleInput:Tc,makeAllStream:_c,getSpawnedResult:Oc,validateInputSync:Lc}});var Qr=l((vu,Zr)=>{"use strict";var kc=(async()=>{})().constructor.prototype,Gc=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(kc,e)]),Dc=(e,t)=>{for(let[n,r]of Gc){let i=typeof t=="function"?(...s)=>Reflect.apply(r.value,t(),s):r.value.bind(t);Reflect.defineProperty(e,n,{...r,value:i})}return e},Mc=e=>new Promise((t,n)=>{e.on("exit",(r,i)=>{t({exitCode:r,signal:i})}),e.on("error",r=>{n(r)}),e.stdin&&e.stdin.on("error",r=>{n(r)})});Zr.exports={mergePromise:Dc,getSpawnedPromise:Mc}});var ei=l((Au,Yr)=>{"use strict";var Jr=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],$c=/^[\w.-]+$/,Bc=/"/g,Uc=e=>typeof e!="string"||$c.test(e)?e:`"${e.replace(Bc,'\\"')}"`,jc=(e,t)=>Jr(e,t).join(" "),Hc=(e,t)=>Jr(e,t).map(n=>Uc(n)).join(" "),Xc=/ +/g,Kc=e=>{let t=[];for(let n of e.trim().split(Xc)){let r=t[t.length-1];r&&r.endsWith("\\")?t[t.length-1]=`${r.slice(0,-1)} ${n}`:t.push(n)}return t};Yr.exports={joinCommand:jc,getEscapedCommand:Hc,parseCommand:Kc}});var ci=l((Ru,Y)=>{"use strict";var zc=require("path"),it=require("child_process"),Vc=fr(),Zc=pr(),Qc=wr(),Jc=xr(),Re=vr(),ni=Rr(),{spawnedKill:Yc,spawnedCancel:ea,setupTimeout:ta,validateTimeout:na,setExitHandler:ra}=Gr(),{handleInput:ia,getSpawnedResult:sa,makeAllStream:oa,validateInputSync:ca}=Vr(),{mergePromise:ti,getSpawnedPromise:aa}=Qr(),{joinCommand:ri,parseCommand:ii,getEscapedCommand:si}=ei(),ua=1e3*1e3*100,la=({env:e,extendEnv:t,preferLocal:n,localDir:r,execPath:i})=>{let s=t?{...process.env,...e}:e;return n?Qc.env({env:s,cwd:r,execPath:i}):s},oi=(e,t,n={})=>{let r=Vc._parse(e,t,n);return e=r.command,t=r.args,n=r.options,n={maxBuffer:ua,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:n.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...n},n.env=la(n),n.stdio=ni(n),process.platform==="win32"&&zc.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:n,parsed:r}},ae=(e,t,n)=>typeof t!="string"&&!Buffer.isBuffer(t)?n===void 0?void 0:"":e.stripFinalNewline?Zc(t):t,Fe=(e,t,n)=>{let r=oi(e,t,n),i=ri(e,t),s=si(e,t);na(r.options);let o;try{o=it.spawn(r.file,r.args,r.options)}catch(g){let S=new it.ChildProcess,W=Promise.reject(Re({error:g,stdout:"",stderr:"",all:"",command:i,escapedCommand:s,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return ti(S,W)}let c=aa(o),u=ta(o,r.options,c),d=ra(o,r.options,u),a={isCanceled:!1};o.kill=Yc.bind(null,o.kill.bind(o)),o.cancel=ea.bind(null,o,a);let p=Jc(async()=>{let[{error:g,exitCode:S,signal:W,timedOut:F},_,R,de]=await sa(o,r.options,d),te=ae(r.options,_),pe=ae(r.options,R),k=ae(r.options,de);if(g||S!==0||W!==null){let ne=Re({error:g,exitCode:S,signal:W,stdout:te,stderr:pe,all:k,command:i,escapedCommand:s,parsed:r,timedOut:F,isCanceled:a.isCanceled,killed:o.killed});if(!r.options.reject)return ne;throw ne}return{command:i,escapedCommand:s,exitCode:0,stdout:te,stderr:pe,all:k,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return ia(o,r.options.input),o.all=oa(o,r.options),ti(o,p)};Y.exports=Fe;Y.exports.sync=(e,t,n)=>{let r=oi(e,t,n),i=ri(e,t),s=si(e,t);ca(r.options);let o;try{o=it.spawnSync(r.file,r.args,r.options)}catch(d){throw Re({error:d,stdout:"",stderr:"",all:"",command:i,escapedCommand:s,parsed:r,timedOut:!1,isCanceled:!1,killed:!1})}let c=ae(r.options,o.stdout,o.error),u=ae(r.options,o.stderr,o.error);if(o.error||o.status!==0||o.signal!==null){let d=Re({stdout:c,stderr:u,error:o.error,signal:o.signal,exitCode:o.status,command:i,escapedCommand:s,parsed:r,timedOut:o.error&&o.error.code==="ETIMEDOUT",isCanceled:!1,killed:o.signal!==null});if(!r.options.reject)return d;throw d}return{command:i,escapedCommand:s,exitCode:0,stdout:c,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};Y.exports.command=(e,t)=>{let[n,...r]=ii(e);return Fe(n,r,t)};Y.exports.commandSync=(e,t)=>{let[n,...r]=ii(e);return Fe.sync(n,r,t)};Y.exports.node=(e,t,n={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(n=t,t=[]);let r=ni.node(n),i=process.execArgv.filter(c=>!c.startsWith("--inspect")),{nodePath:s=process.execPath,nodeOptions:o=i}=n;return Fe(s,[...o,e,...Array.isArray(t)?t:[]],{...n,stdin:void 0,stdout:void 0,stderr:void 0,stdio:r,shell:!1})}});var ga={};Ni(ga,{default:()=>Wi});module.exports=Ti(ga);var f=require("@raycast/api"),Pi=require("react");var q=require("react"),le=$(ge());var C=require("@raycast/api"),ct=$(ge());var Te=$(require("node:process"),1),li=$(ci(),1);function st({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}function ot(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(st(),"")}var Ne=$(require("node:process"),1),ai=require("node:os"),fa=()=>{let{env:e}=Ne.default;if(Ne.default.platform==="win32")return e.COMSPEC||"cmd.exe";try{let{shell:t}=(0,ai.userInfo)();if(t)return t}catch{}return Ne.default.platform==="darwin"?e.SHELL||"/bin/zsh":e.SHELL||"/bin/sh"},da=fa(),ui=da;var pa=["-ilc",'echo -n "_SHELL_ENV_DELIMITER_"; env; echo -n "_SHELL_ENV_DELIMITER_"; exit'],ma={DISABLE_AUTO_UPDATE:"true"},ha=e=>{e=e.split("_SHELL_ENV_DELIMITER_")[1];let t={};for(let n of ot(e).split(`
`).filter(r=>!!r)){let[r,...i]=n.split("=");t[r]=i.join("=")}return t};async function fi(e){if(Te.default.platform==="win32")return Te.default.env;try{let{stdout:t}=await(0,li.default)(e||ui,pa,{env:ma});return ha(t)}catch(t){if(e)throw t;return Te.default.env}}var _e=null,di=async()=>{if(_e)return _e;let e=await fi();return _e={env:e,cwd:e.HOME||`/Users/${process.env.USER}`,shell:e.SHELL},_e};var at=require("child_process");var pi=require("@raycast/api"),{showQualityNumber:wa,showWifiName:ya,showColorfulSignal:Mu}=(0,pi.getPreferenceValues)();var mi=C.Toast.Style,hi=async(e,t,n)=>{let r=await(0,C.showToast)(mi.Animated,"Connecting...");ct.default.connect({ssid:e,password:t},async()=>{n(Date.now()),(await ct.default.getCurrentConnections())[0].ssid===e?(await(0,C.showHUD)(`\u{1F6DC} Connected to ${e} successfully`),await r.hide(),await(0,C.popToRoot)()):await(0,C.showToast)(mi.Failure,"Failure to connect")})},wi=async()=>{try{let e=await di(),t=(0,at.execSync)("networksetup -listnetworkserviceorder | sed -n '/Wi-Fi/s|.*Device: \\(.*\\)).*|\\1|p'",e),n=String(t).trim(),r=(0,at.execSync)(`networksetup -getairportnetwork ${n}`,e);return!String(r).trim().includes("off")}catch{return!0}};var ut=e=>{if(e.length<=1)return e;let t=new Map;return e.filter(n=>!t.has(n.ssid)&&t.set(n.ssid,1))},ue=e=>e===void 0?C.Icon.WifiDisabled:e<40?C.Icon.Signal1:e<70?C.Icon.Signal2:e<90?C.Icon.Signal3:C.Icon.FullSignal,yi=e=>{if(e!==void 0)return e<40?C.Color.Red:e<70?C.Color.Orange:C.Color.Green};var ee=require("@raycast/api");le.default.init({iface:null});var Si=e=>{let[t,n]=(0,q.useState)([]),[r,i]=(0,q.useState)([]),[s,o]=(0,q.useState)([]),[c,u]=(0,q.useState)([]),[d,a]=(0,q.useState)([]),[m,p]=(0,q.useState)(!0),g=(0,q.useCallback)(async()=>{p(!0);let S=await le.default.getCurrentConnections();a(S);let W=await ee.LocalStorage.getItem("Wifi Password"),F=typeof W=="string"?JSON.parse(W):[];n(F);let _=await ee.LocalStorage.getItem("Wifi Cache"),R;if(typeof _=="string"&&JSON.parse(_),typeof _=="string")R=JSON.parse(_);else{let h=(await le.default.scan()).sort((O,re)=>re.quality-O.quality);R=ut(h),R.length>0&&await ee.LocalStorage.setItem("Wifi Cache",JSON.stringify(R))}let de=[],te=[];R.filter(h=>h.security!=="NONE").filter(h=>S[0].ssid!==h.ssid).forEach(h=>{let O=F.filter(re=>h.ssid===re.ssid);O.length>0?te.push({...h,password:O[0].password}):de.push(h)}),o(te),u(de),i(R.filter(h=>h.security==="NONE").filter(h=>S[0].ssid!==h.ssid));let pe=(await le.default.scan()).sort((h,O)=>O.quality-h.quality),k=ut(pe),ne=[],ht=[];k.filter(h=>h.security!=="NONE").filter(h=>S[0].ssid!==h.ssid).forEach(h=>{let O=F.filter(re=>h.ssid===re.ssid);O.length>0?ht.push({...h,password:O[0].password}):ne.push(h)}),o(ht),u(ne),i(k.filter(h=>h.security==="NONE").filter(h=>S[0].ssid!==h.ssid)),p(!1),k.length>0&&await ee.LocalStorage.setItem("Wifi Cache",JSON.stringify(k))},[e]);return(0,q.useEffect)(()=>{g()},[g]),{wifiPasswordCaches:t,publicWifi:r,wifiWithPasswordList:s,wifiList:c,curWifi:d,loading:m}};var xi=()=>{let[e,t]=(0,q.useState)(!0),n=(0,q.useCallback)(async()=>{let r=await wi();t(r)},[]);return(0,q.useEffect)(()=>{n()},[n]),{wifiStatus:e}};var Ci=require("@raycast/api"),Ii=require("react/jsx-runtime");function Ei(e){let{title:t,description:n}=e;return(0,Ii.jsx)(Ci.List.EmptyView,{title:t,description:n,icon:"empty-icon.svg"})}var x=require("@raycast/api"),lt=require("react"),ft=$(ge());var M=require("react/jsx-runtime"),bi=x.Toast.Style;function dt(e){let{wifiPasswordCaches:t,wifiNetWork:n,setRefresh:r}=e,[i,s]=(0,lt.useState)(),[o,c]=(0,lt.useState)("");return(0,M.jsxs)(x.Form,{navigationTitle:"Enter Password",actions:(0,M.jsx)(x.ActionPanel,{children:(0,M.jsx)(x.Action,{icon:{source:x.Icon.Wifi,tintColor:x.Color.PrimaryText},title:"Connect Wi-Fi",onAction:async()=>{if(o.length==0){s("The field can't be empty!");return}let u=await(0,x.showToast)(bi.Animated,"Connecting...");ft.default.connect({ssid:n.ssid,password:o},async()=>{if(r(Date.now()),(await ft.default.getCurrentConnections())[0].ssid===n.ssid){let a=!1,m=t.map(p=>(p.ssid===n.ssid&&(a=!0,p.password=o),p));a||m.push({ssid:n.ssid,password:o}),await x.LocalStorage.setItem("Wifi Password",JSON.stringify(m)),await(0,x.showHUD)(`\u{1F6DC} Connected to ${n.ssid} successfully`),await u.hide(),await(0,x.popToRoot)()}else await(0,x.showToast)(bi.Failure,"Failure to connect")})}})}),children:[(0,M.jsx)(x.Form.Description,{title:"Wi-FI",text:n.ssid}),(0,M.jsx)(x.Form.TextField,{id:"password",title:"Password",value:o,onChange:u=>{u.length>0&&s(void 0),c(u)},error:i})]})}var v=require("@raycast/api");var fe=require("react/jsx-runtime");function pt(e){let{wifiNetwork:t,curWifi:n,setRefresh:r}=e;return(0,fe.jsxs)(v.ActionPanel.Section,{children:[(0,fe.jsx)(v.Action,{icon:{source:v.Icon.Wifi,tintColor:v.Color.PrimaryText},title:"Connect Wi-Fi",onAction:async()=>{if(n.length>0){if(n[0].ssid===t.ssid)return;await hi(t.ssid,t.password,r)}}}),(0,fe.jsx)(v.Action,{icon:v.Icon.Clipboard,title:"Copy Wi-FI",onAction:async()=>{await v.Clipboard.copy(t.ssid),await(0,v.showHUD)("\u{1F6DC} Wi-FI Copied")}})]})}var L=require("@raycast/api"),mt=require("react/jsx-runtime");function Oe(e){let{setRefresh:t}=e;return(0,mt.jsx)(L.ActionPanel.Section,{children:(0,mt.jsx)(L.Action,{icon:{source:L.Icon.ArrowClockwise,tintColor:L.Color.PrimaryText},title:"Refresh Wi-Fi",shortcut:{modifiers:["cmd"],key:"r"},onAction:()=>{t(Date.now)}})})}var w=require("react/jsx-runtime");function Wi(){let{push:e}=(0,f.useNavigation)(),[t,n]=(0,Pi.useState)(0),{wifiPasswordCaches:r,publicWifi:i,wifiWithPasswordList:s,wifiList:o,curWifi:c,loading:u}=Si(t),{wifiStatus:d}=xi();return(0,w.jsxs)(f.List,{isLoading:u,searchBarPlaceholder:"Search Wi-Fi",children:[(0,w.jsx)(Ei,{title:"No Wi-Fi",description:d?" ":"Wi-Fi is turned off"}),c.length>0&&c[0].ssid&&(0,w.jsx)(f.List.Section,{title:"Connected",children:(0,w.jsx)(f.List.Item,{icon:{source:f.Icon.Wifi,tintColor:f.Color.Green},title:c[0].ssid,subtitle:{value:c[0].security,tooltip:c[0].security_flags.join(", ")},accessories:[{icon:{source:ue(c[0].quality),tintColor:yi(c[0].quality)},tooltip:c[0].quality+"%"}]})}),(0,w.jsx)(f.List.Section,{title:"Preferred",children:s.map((a,m)=>(0,w.jsx)(f.List.Item,{icon:{source:f.Icon.Wifi,tintColor:c.length>0&&c[0].ssid===a.ssid?f.Color.Green:f.Color.SecondaryText},title:a.ssid,subtitle:{value:a.security,tooltip:a.security_flags.join(", ")},accessories:[{icon:{source:f.Icon.Lock,tintColor:a.quality<40?f.Color.Red:a.quality<70?f.Color.Orange:f.Color.Green},tooltip:a.password},{icon:{source:ue(a.quality),tintColor:a.quality<40?f.Color.Red:a.quality<70?f.Color.Orange:f.Color.Green},tooltip:a.quality+"%"}],actions:(0,w.jsxs)(f.ActionPanel,{children:[(0,w.jsx)(pt,{wifiNetwork:a,curWifi:c,setRefresh:n}),(0,w.jsx)(f.ActionPanel.Section,{children:(0,w.jsx)(f.Action.CopyToClipboard,{title:"Copy Password",shortcut:{modifiers:["cmd"],key:"."},content:a.password})}),(0,w.jsx)(f.ActionPanel.Section,{children:(0,w.jsx)(f.Action,{icon:f.Icon.Trash,title:"Remove Wi-Fi",shortcut:{modifiers:["ctrl"],key:"x"},onAction:async()=>{let p={icon:f.Icon.Trash,title:"Remove Wi-Fi",message:`Are you sure you want to remove ${a.ssid}?`,primaryAction:{title:"Remove",onAction:()=>{let g=[];s.forEach(S=>{S.ssid!==a.ssid&&g.push(S)}),f.LocalStorage.setItem("Wifi Password",JSON.stringify(g)),n(Date.now())}}};await(0,f.confirmAlert)(p)}})}),(0,w.jsx)(Oe,{setRefresh:n})]})},m))}),(0,w.jsx)(f.List.Section,{title:s.length===0?"Wi-Fi":"Other",children:o.map((a,m)=>(0,w.jsx)(f.List.Item,{icon:{source:f.Icon.Wifi,tintColor:c.length>0&&c[0].ssid===a.ssid?f.Color.Green:f.Color.SecondaryText},title:a.ssid,subtitle:{value:a.security,tooltip:a.security_flags.join(", ")},accessories:[{icon:{source:ue(a.quality),tintColor:a.quality<40?f.Color.Red:a.quality<70?f.Color.Orange:f.Color.Green},tooltip:a.quality+"%"}],actions:(0,w.jsxs)(f.ActionPanel,{children:[(0,w.jsx)(f.Action,{icon:{source:f.Icon.Wifi,tintColor:f.Color.PrimaryText},title:"Connect Wi-Fi",onAction:()=>{if(c.length>0){if(c[0].ssid===a.ssid)return;e((0,w.jsx)(dt,{wifiPasswordCaches:r,wifiNetWork:a,setRefresh:n}))}}}),(0,w.jsx)(f.Action,{icon:f.Icon.Clipboard,title:"Copy Wi-FI",onAction:async()=>{await f.Clipboard.copy(a.ssid),await(0,f.showHUD)("\u{1F6DC} Wi-FI Copied")}}),(0,w.jsx)(Oe,{setRefresh:n})]})},m))}),(0,w.jsx)(f.List.Section,{title:"Public",children:i.map((a,m)=>(0,w.jsx)(f.List.Item,{icon:{source:f.Icon.Wifi,tintColor:c.length>0&&c[0].ssid===a.ssid?f.Color.Green:f.Color.SecondaryText},title:a.ssid,subtitle:{value:a.security,tooltip:a.security_flags.join(", ")},accessories:[{icon:{source:ue(a.quality),tintColor:a.quality<40?f.Color.Red:a.quality<70?f.Color.Orange:f.Color.Green},tooltip:a.quality+"%"}],actions:(0,w.jsxs)(f.ActionPanel,{children:[(0,w.jsx)(pt,{wifiNetwork:{...a,password:""},curWifi:c,setRefresh:n}),(0,w.jsx)(Oe,{setRefresh:n})]})},m))})]})}
