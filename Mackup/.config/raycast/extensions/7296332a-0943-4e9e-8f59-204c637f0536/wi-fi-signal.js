"use strict";var si=Object.create;var Y=Object.defineProperty;var oi=Object.getOwnPropertyDescriptor;var ci=Object.getOwnPropertyNames;var ai=Object.getPrototypeOf,ui=Object.prototype.hasOwnProperty;var a=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),li=(e,t)=>{for(var n in t)Y(e,n,{get:t[n],enumerable:!0})},Qe=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ci(t))!ui.call(e,i)&&i!==n&&Y(e,i,{get:()=>t[i],enumerable:!(r=oi(t,i))||r.enumerable});return e};var j=(e,t,n)=>(n=e!=null?si(ai(e)):{},Qe(t||!e||!e.__esModule?Y(n,"default",{value:e,enumerable:!0}):n,e)),fi=e=>Qe(Y({},"__esModule",{value:!0}),e);var q=a((Qc,Je)=>{Je.exports=Object.assign(process.env,{LANG:"en_US.UTF-8",LC_ALL:"en_US.UTF-8",LC_MESSAGES:"en_US.UTF-8"})});var te=a(ee=>{var T={},S=2412;for(let e=1;e<15;e++)T[e]=S.toString(),S=S+5;S=5180;for(let e=36;e<=64;e+=2)T[e]=S.toString(),S+=10;S=5500;for(let e=100;e<=144;e+=2)T[e]=S.toString(),S+=10;S=5745;for(let e=149;e<=161;e+=2)T[e]=S.toString(),S+=10;S=5825;for(let e=165;e<=173;e+=4)T[e]=S.toString(),S+=20;function di(e){return T[parseInt(e)]}function pi(e){return parseFloat(e)/2-100}function mi(e){return 2*(parseFloat(e)+100)}ee.frequencyFromChannel=di;ee.dBFromQuality=pi;ee.qualityFromDB=mi});var Se=a((Yc,tt)=>{var hi=require("child_process").execFile,Ye=te(),yi=q();function et(e,t){try{hi("netsh",["wlan","show","networks","mode=Bssid"],{env:yi},(n,r)=>{if(n){t&&t(n);return}r=r.toString("utf8").split("\r").join("").split(`
`).slice(4,r.length);let i=-1,s=0,o,c=[],u,l=[],f;for(f=0;f<r.length;f++)r[f]===""&&(i++,o=r.slice(s,f),c.push(o),s=f+1);for(f=0;f<i;f++)c[f]&&c[f].length>0&&(u=wi(c[f]),l.push(u));t&&t(null,l)})}catch(n){t&&t(n)}}function wi(e){let t={};return t.mac=e[4]?e[4].match(/.*?:\s(.*)/)[1]:"",t.bssid=t.mac,t.ssid=e[0]?e[0].match(/.*?:\s(.*)/)[1]:"",t.channel=e[7]?parseInt(e[7].match(/.*?:\s(.*)/)[1]):-1,t.frequency=t.channel?parseInt(Ye.frequencyFromChannel(t.channel)):0,t.signal_level=e[5]?Ye.dBFromQuality(e[5].match(/.*?:\s(.*)/)[1]):Number.MIN_VALUE,t.quality=e[5]?parseFloat(e[5].match(/.*?:\s(.*)/)[1]):0,t.security=e[2]?e[2].match(/.*?:\s(.*)/)[1]:"",t.security_flags=e[3]?e[3].match(/.*?:\s(.*)/)[1]:"",t.mode="Unknown",t}tt.exports=e=>t=>{if(t)et(e,t);else return new Promise((n,r)=>{et(e,(i,s)=>{i?r(i):n(s)})})}});var ot=a((ea,st)=>{var gi=require("fs"),rt=require("child_process").execFile,it=q(),Si=Se(),xi=require("path"),Ei=require("os"),xe=xi.join(Ei.tmpdir(),"nodeWifiConnect.xml");function Ee(e,t){return new Promise((n,r)=>{rt(e,t,{env:it,shell:!0},(i,s,o)=>{i?(i.stdout=s,i.stderr=o,r(i)):n(s)})})}function nt(e,t,n){Si(e)().then(r=>{let i=r.find(s=>s.ssid===t.ssid);if(i===void 0)throw"SSID not found";gi.writeFileSync(xe,Ci(i,t.password))}).then(()=>Ee("netsh",["wlan","add","profile",`filename=${xe}`])).then(()=>{let r="netsh",i=["wlan","connect",`ssid="${t.ssid}"`,`name="${t.ssid}"`];return e.iface&&i.push(`interface="${e.iface}"`),Ee(r,i)}).then(()=>Ee(`del ${xe}`)).then(()=>{n&&n()}).catch(r=>{rt("netsh",["wlan","delete",`profile "${t.ssid}"`],{env:it},()=>{n&&n(r)})})}function Ii(e){let t,n,r,i;for(i="",t=n=0,r=e.length-1;r>=0?n<=r:n>=r;t=r>=0?++n:--n)i+=e.charCodeAt(t).toString(16);return i}function Ci(e,t){let n=`<?xml version="1.0"?> <WLANProfile xmlns="http://www.microsoft.com/networking/WLAN/profile/v1"> <name>${e.ssid}</name> <SSIDConfig> <SSID> <hex>${Ii(e.ssid)}</hex> <name>${e.ssid}</name> </SSID> </SSIDConfig>`;return e.security.includes("WPA2")?n+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>WPA2PSK</authentication> <encryption>AES</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>passPhrase</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:e.security.includes("WPA")?n+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>WPAPSK</authentication> <encryption>TKIP</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>passPhrase</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:e.security_flags.includes("WEP")?n+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>open</authentication> <encryption>WEP</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>networkKey</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:n+="<connectionType>ESS</connectionType> <connectionMode>manual</connectionMode> <MSM> <security> <authEncryption> <authentication>open</authentication> <encryption>none</encryption> <useOneX>false</useOneX> </authEncryption> </security> </MSM>",n+="</WLANProfile>",n}st.exports=e=>(t,n)=>{if(n)nt(e,t,n);else return new Promise((r,i)=>{nt(e,t,s=>{s?i(s):r()})})}});var ut=a((ta,at)=>{var vi=require("child_process").execFile,bi=q();function ct(e,t){let n="netsh",r=["wlan","disconnect"];e.iface&&r.push(`interface="${e.iface}"`),vi(n,r,{env:bi},i=>{t&&t(i)})}at.exports=e=>t=>{if(t)ct(e,t);else return new Promise((n,r)=>{ct(e,i=>{i?r(i):n()})})}});var pt=a((na,dt)=>{var qi=require("child_process").execFile,Pi=q(),lt=te();function Wi(e){let t=e.split(`\r
`),n=[],r=3;for(;t.length>r+18;){let i={},s=["name","description","guid","mac","state","ssid","bssid","mode","radio","authentication","encryption","connection","channel","reception","transmission","signal","profil"];for(let o=0;o<s.length;o++){let c=t[r+o];i[s[o]]=c.match(/.*: (.*)/)[1]}n.push({iface:i.name,ssid:i.ssid,bssid:i.bssid,mac:i.bssid,mode:i.mode,channel:parseInt(i.channel),frequency:parseInt(lt.frequencyFromChannel(parseInt(i.channel))),signal_level:lt.dBFromQuality(i.signal),quality:parseFloat(i.signal),security:i.authentication,security_flags:i.encryption}),r=r+18}return n}function ft(e,t){qi("netsh",["wlan","show","interfaces"],{env:Pi},(r,i)=>{if(r)t&&t(r);else try{let s=Wi(i,e);t&&t(null,s)}catch(s){t&&t(s)}})}dt.exports=e=>t=>{if(t)ft(e,t);else return new Promise((n,r)=>{ft(e,(i,s)=>{i?r(i):n(s)})})}});var yt=a((ra,ht)=>{var Fi=require("child_process").execFile,Ai=q();function mt(e,t,n){let r=[];r.push("-w"),r.push("10"),r.push("device"),r.push("wifi"),r.push("connect"),r.push(t.ssid),r.push("password"),r.push(t.password),e.iface&&(r.push("ifname"),r.push(e.iface)),Fi("nmcli",r,{env:Ai},(i,s)=>{s.includes("Error: ")&&(i=new Error(s.replace("Error: ",""))),n&&n(i)})}ht.exports=e=>(t,n)=>{if(n)mt(e,t,n);else return new Promise((r,i)=>{mt(e,t,s=>{s?i(s):r()})})}});var St=a((ia,gt)=>{var Ri=require("child_process").execFile,Ti=q();function wt(e,t){let n=[];n.push("device"),n.push("disconnect"),e.iface&&n.push(e.iface),Ri("nmcli",n,{env:Ti},r=>{t&&t(r)})}gt.exports=e=>t=>{if(t)wt(e,t);else return new Promise((n,r)=>{wt(e,i=>{i?r(i):n()})})}});var It=a((sa,Et)=>{var Ni=require("child_process").execFile,_i=q();function xt(e,t,n){let r=[];r.push("connection"),r.push("delete"),r.push("id"),r.push(t.ssid),Ni("nmcli",r,_i,i=>{n&&n(i)})}Et.exports=e=>(t,n)=>{if(n)xt(e,t,n);else return new Promise((r,i)=>{xt(e,t,s=>{s?i(s):r()})})}});var bt=a((oa,vt)=>{var Oi=require("child_process").execFile,Li=te(),Gi=q();function Ct(e,t){let n=[];n.push("--terse"),n.push("--fields"),n.push("active,ssid,bssid,mode,chan,freq,signal,security,wpa-flags,rsn-flags,device"),n.push("device"),n.push("wifi"),e.iface&&(n.push("list"),n.push("ifname"),n.push(e.iface)),Oi("nmcli",n,{env:Gi},(r,i)=>{if(r){t&&t(r);return}let s=i.split(`
`),o=[];for(let c=0;c<s.length;c++)if(s[c]!=""){let u=s[c].replace(/\\:/g,"&&").split(":");u[0]=="yes"&&o.push({iface:u[10].replace(/&&/g,":"),ssid:u[1].replace(/&&/g,":"),bssid:u[2].replace(/&&/g,":"),mac:u[2].replace(/&&/g,":"),mode:u[3].replace(/&&/g,":"),channel:parseInt(u[4].replace(/&&/g,":")),frequency:parseInt(u[5].replace(/&&/g,":")),signal_level:Li.dBFromQuality(u[6].replace(/&&/g,":")),quality:parseFloat(u[6].replace(/&&/g,":")),security:u[7].replace(/&&/g,":"),security_flags:{wpa:u[8].replace(/&&/g,":"),rsn:u[9].replace(/&&/g,":")}})}t&&t(null,o)})}vt.exports=e=>t=>{if(t)Ct(e,t);else return new Promise((n,r)=>{Ct(e,(i,s)=>{i?r(i):n(s)})})}});var N=a((ca,qt)=>{var{execFile:ki}=require("child_process"),Mi=q();qt.exports=({cmd:e,args:t})=>new Promise((n,r)=>{ki(e,t,{env:Mi},(i,s)=>{i?r(i):n(s)})})});var _=a((aa,Pt)=>{var Bi=e=>{let t=e.length-1;return t>=0&&typeof e[t]=="function"?{callback:e[t],args:e.slice(0,t)}:{callback:null,args:e}};Pt.exports=e=>t=>(...n)=>{let{args:r,callback:i}=Bi(n);if(typeof i=="function")e(t,...r).then(s=>{i(null,s)}).catch(s=>{i(s)});else return e(t,...r)}});var Ft=a((ua,Wt)=>{var $i=e=>{let t=["--terse","--fields","active,ssid,bssid,mode,chan,freq,signal,security,wpa-flags,rsn-flags","device","wifi","list"];return e.iface&&(t.push("ifname"),t.push(e.iface)),{cmd:"nmcli",args:t}};Wt.exports=$i});var ne=a((la,At)=>{var Di=e=>2*(parseFloat(e)+100),Ui=e=>parseFloat(e)/2-100;At.exports={percentageFromDB:Di,dBFromPercentage:Ui}});var Nt=a((fa,Tt)=>{var{dBFromPercentage:ji}=ne(),Rt=e=>e.match(/[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}/),Hi=e=>e.split(`
`).filter(t=>t!==""&&t.includes(":")).filter(t=>Rt(t)).map(t=>{let n=Rt(t),r=n[0].replace(/\\:/g,":"),i=t.replace(n[0]).split(":"),[s,o,c,u,l,f,h,m,w,I]=i;return{ssid:o,bssid:r,mac:r,mode:u,channel:parseInt(l),frequency:parseInt(f),signal_level:ji(h),quality:parseInt(h),security:m!=="(none)"?m:"none",security_flags:{wpa:w,rsn:I}}});Tt.exports=Hi});var Ot=a((da,_t)=>{var Xi=N(),Ki=_(),zi=Ft(),Zi=Nt(),Vi=e=>Xi(zi(e)).then(t=>Zi(t));_t.exports=Ki(Vi)});var Gt=a((pa,Lt)=>{var Qi=(e,t)=>{let n=["-setairportnetwork"];return n.push(e.iface||"en0"),n.push(t.ssid),n.push(t.password),{cmd:"/usr/sbin/networksetup",args:n}};Lt.exports=Qi});var Mt=a((ma,kt)=>{var Ji=N(),Yi=_(),es=Gt(),ts=(e,t)=>Ji(es(e,t));kt.exports=Yi(ts)});var $t=a((ha,Bt)=>{var ns=()=>({cmd:"/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport",args:["--scan"]});Bt.exports=ns});var Ie=a((ya,Dt)=>{var O={},x=2412;for(let e=1;e<15;e++)O[e]=x,x=x+5;x=5180;for(let e=36;e<=64;e+=2)O[e]=x,x+=10;x=5500;for(let e=100;e<=144;e+=2)O[e]=x,x+=10;x=5745;for(let e=149;e<=161;e+=2)O[e]=x,x+=10;x=5825;for(let e=165;e<=173;e+=4)O[e]=x,x+=20;Dt.exports=e=>O[parseInt(e)]});var jt=a((wa,Ut)=>{var{percentageFromDB:rs}=ne(),is=Ie(),ss=e=>e.trim()!=="",os=e=>{let t=e==="NONE"?[{protocole:"NONE",flag:""}]:e.split(" ").map(n=>n.match(/(.*)\((.*)\)/)).filter(Boolean).map(([,n,r])=>({protocole:n,flag:r}));return{security:t.map(n=>n.protocole).join(" "),security_flags:t.filter(n=>n.flag).map(n=>`(${n.flag})`)}},cs=e=>{let t=e.split(`
`),[,...n]=t;return n.filter(ss).map(i=>i.trim()).map(i=>{let s=i.match(/(.*)\s+([a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}|)\s+(-[0-9]+)\s+([0-9]+).*\s+([A-Z]+)\s+([a-zA-Z-]+)\s+([A-Z0-9(,)\s/]+)/);if(s){let[,o,c,u,l,f,h,m]=s,w=parseInt(l);return{mac:c,bssid:c,ssid:o.trim(),channel:w,frequency:is(w),signal_level:u,quality:rs(u),...os(m)}}return!1}).filter(Boolean)};Ut.exports=cs});var Xt=a((ga,Ht)=>{var as=N(),us=_(),ls=$t(),fs=jt(),ds=e=>as(ls(e)).then(t=>fs(t));Ht.exports=us(ds)});var zt=a((Sa,Kt)=>{var ps=(e,t)=>{let n=["-removepreferredwirelessnetwork"];return n.push(e.iface||"en0"),n.push(t.ssid),{cmd:"/usr/sbin/networksetup",args:n}};Kt.exports=ps});var Vt=a((xa,Zt)=>{var ms=e=>{if(e&&e.includes("was not found in the preferred networks list"))throw new Error(e.trim())};Zt.exports=ms});var Jt=a((Ea,Qt)=>{var hs=N(),ys=_(),ws=zt(),gs=Vt(),Ss=(e,t)=>hs(ws(e,t)).then(n=>gs(n));Qt.exports=ys(Ss)});var en=a((Ia,Yt)=>{var xs=()=>({cmd:"/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport",args:["--getinfo"]});Yt.exports=xs});var nn=a((Ca,tn)=>{var{percentageFromDB:Es}=ne(),Is=Ie(),Cs=/[ ]*agrCtlRSSI: (.*)/,vs=/[ ]*BSSID: ([0-9A-Fa-f:]*)/,bs=/[ ]*SSID: (.*)/,qs=/[ ]*link auth: (.*)/,Ps=/[ ]*channel: (.*)/,Ws=e=>e.split(":").map(t=>t.length===1?`0${t}`:t).join(":"),Fs=e=>{let t=e.split(`
`),n=[],r={};return t.forEach(i=>{let s=i.match(Cs);if(s){r.signal_level=parseInt(s[1]),r.quality=Es(r.signal_level);return}let o=i.match(vs);if(o){r.bssid=Ws(o[1]),r.mac=r.bssid;return}let c=i.match(bs);if(c){r.ssid=c[1];return}let u=i.match(qs);if(u){r.security=u[1],r.security_flags=[];return}let l=i.match(Ps);l&&(r.channel=l[1],r.frequency=Is(r.channel),n.push(r),r={})}),n};tn.exports=Fs});var sn=a((va,rn)=>{var As=N(),Rs=_(),Ts=en(),Ns=nn(),_s=e=>As(Ts(e)).then(t=>Ns(t));rn.exports=Rs(_s)});var Ce=a(C=>{var Os=ot(),Ls=Se(),Gs=ut(),ks=pt(),Ms=yt(),Bs=St(),$s=It(),Ds=bt(),Us=Ot(),js=Mt(),Hs=Xt(),Xs=Jt(),Ks=sn(),E={debug:!1,iface:null};function zs(e){e&&e.debug&&(E.debug=e.debug),e&&e.iface&&(E.iface=e.iface);let t=()=>{throw new Error("ERROR : not available for this OS")},n=()=>{throw new Error("ERROR : not available for this OS")},r=()=>{throw new Error("ERROR : not available for this OS")},i=()=>{throw new Error("ERROR : not available for this OS")},s=()=>{throw new Error("ERROR : not available for this OS")};switch(process.platform){case"linux":n=Ms(E),t=Us(E),r=Bs(E),i=$s(E),s=Ds(E);break;case"darwin":n=js(E),t=Hs(E),i=Xs(E),s=Ks(E);break;case"win32":n=Os(E),t=Ls(E),r=Gs(E),s=ks(E);break;default:throw new Error("ERROR : UNRECOGNIZED OS")}C.scan=t,C.connect=n,C.disconnect=r,C.deleteConnection=i,C.getCurrentConnections=s}C.init=zs;C.scan=()=>{throw new Error("ERROR : use init before")};C.connect=()=>{throw new Error("ERROR : use init before")};C.disconnect=()=>{throw new Error("ERROR : use init before")};C.getCurrentConnections=()=>{throw new Error("ERROR : use init before")};C.deleteConnection=()=>{throw new Error("ERROR : use init before")}});var ln=a((Pa,un)=>{un.exports=an;an.sync=Vs;var on=require("fs");function Zs(e,t){var n=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}function cn(e,t,n){return!e.isSymbolicLink()&&!e.isFile()?!1:Zs(t,n)}function an(e,t,n){on.stat(e,function(r,i){n(r,r?!1:cn(i,e,t))})}function Vs(e,t){return cn(on.statSync(e),e,t)}});var hn=a((Wa,mn)=>{mn.exports=dn;dn.sync=Qs;var fn=require("fs");function dn(e,t,n){fn.stat(e,function(r,i){n(r,r?!1:pn(i,t))})}function Qs(e,t){return pn(fn.statSync(e),t)}function pn(e,t){return e.isFile()&&Js(e,t)}function Js(e,t){var n=e.mode,r=e.uid,i=e.gid,s=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),o=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),c=parseInt("100",8),u=parseInt("010",8),l=parseInt("001",8),f=c|u,h=n&l||n&u&&i===o||n&c&&r===s||n&f&&s===0;return h}});var wn=a((Aa,yn)=>{var Fa=require("fs"),re;process.platform==="win32"||global.TESTING_WINDOWS?re=ln():re=hn();yn.exports=ve;ve.sync=Ys;function ve(e,t,n){if(typeof t=="function"&&(n=t,t={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,i){ve(e,t||{},function(s,o){s?i(s):r(o)})})}re(e,t||{},function(r,i){r&&(r.code==="EACCES"||t&&t.ignoreErrors)&&(r=null,i=!1),n(r,i)})}function Ys(e,t){try{return re.sync(e,t||{})}catch(n){if(t&&t.ignoreErrors||n.code==="EACCES")return!1;throw n}}});var vn=a((Ra,Cn)=>{var L=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",gn=require("path"),eo=L?";":":",Sn=wn(),xn=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),En=(e,t)=>{let n=t.colon||eo,r=e.match(/\//)||L&&e.match(/\\/)?[""]:[...L?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],i=L?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=L?i.split(n):[""];return L&&e.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:r,pathExt:s,pathExtExe:i}},In=(e,t,n)=>{typeof t=="function"&&(n=t,t={}),t||(t={});let{pathEnv:r,pathExt:i,pathExtExe:s}=En(e,t),o=[],c=l=>new Promise((f,h)=>{if(l===r.length)return t.all&&o.length?f(o):h(xn(e));let m=r[l],w=/^".*"$/.test(m)?m.slice(1,-1):m,I=gn.join(w,e),b=!w&&/^\.[\\\/]/.test(e)?e.slice(0,2)+I:I;f(u(b,l,0))}),u=(l,f,h)=>new Promise((m,w)=>{if(h===i.length)return m(c(f+1));let I=i[h];Sn(l+I,{pathExt:s},(b,R)=>{if(!b&&R)if(t.all)o.push(l+I);else return m(l+I);return m(u(l,f,h+1))})});return n?c(0).then(l=>n(null,l),n):c(0)},to=(e,t)=>{t=t||{};let{pathEnv:n,pathExt:r,pathExtExe:i}=En(e,t),s=[];for(let o=0;o<n.length;o++){let c=n[o],u=/^".*"$/.test(c)?c.slice(1,-1):c,l=gn.join(u,e),f=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let h=0;h<r.length;h++){let m=f+r[h];try{if(Sn.sync(m,{pathExt:i}))if(t.all)s.push(m);else return m}catch{}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw xn(e)};Cn.exports=In;In.sync=to});var qe=a((Ta,be)=>{"use strict";var bn=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};be.exports=bn;be.exports.default=bn});var Fn=a((Na,Wn)=>{"use strict";var qn=require("path"),no=vn(),ro=qe();function Pn(e,t){let n=e.options.env||process.env,r=process.cwd(),i=e.options.cwd!=null,s=i&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(e.options.cwd)}catch{}let o;try{o=no.sync(e.command,{path:n[ro({env:n})],pathExt:t?qn.delimiter:void 0})}catch{}finally{s&&process.chdir(r)}return o&&(o=qn.resolve(i?e.options.cwd:"",o)),o}function io(e){return Pn(e)||Pn(e,!0)}Wn.exports=io});var An=a((_a,We)=>{"use strict";var Pe=/([()\][%!^"`<>&|;, *?])/g;function so(e){return e=e.replace(Pe,"^$1"),e}function oo(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(Pe,"^$1"),t&&(e=e.replace(Pe,"^$1")),e}We.exports.command=so;We.exports.argument=oo});var Tn=a((Oa,Rn)=>{"use strict";Rn.exports=/^#!(.*)/});var _n=a((La,Nn)=>{"use strict";var co=Tn();Nn.exports=(e="")=>{let t=e.match(co);if(!t)return null;let[n,r]=t[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return i==="env"?r:r?`${i} ${r}`:i}});var Ln=a((Ga,On)=>{"use strict";var Fe=require("fs"),ao=_n();function uo(e){let n=Buffer.alloc(150),r;try{r=Fe.openSync(e,"r"),Fe.readSync(r,n,0,150,0),Fe.closeSync(r)}catch{}return ao(n.toString())}On.exports=uo});var Bn=a((ka,Mn)=>{"use strict";var lo=require("path"),Gn=Fn(),kn=An(),fo=Ln(),po=process.platform==="win32",mo=/\.(?:com|exe)$/i,ho=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function yo(e){e.file=Gn(e);let t=e.file&&fo(e.file);return t?(e.args.unshift(e.file),e.command=t,Gn(e)):e.file}function wo(e){if(!po)return e;let t=yo(e),n=!mo.test(t);if(e.options.forceShell||n){let r=ho.test(t);e.command=lo.normalize(e.command),e.command=kn.command(e.command),e.args=e.args.map(s=>kn.argument(s,r));let i=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${i}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function go(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null),t=t?t.slice(0):[],n=Object.assign({},n);let r={command:e,args:t,options:n,file:void 0,original:{command:e,args:t}};return n.shell?r:wo(r)}Mn.exports=go});var Un=a((Ma,Dn)=>{"use strict";var Ae=process.platform==="win32";function Re(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function So(e,t){if(!Ae)return;let n=e.emit;e.emit=function(r,i){if(r==="exit"){let s=$n(i,t,"spawn");if(s)return n.call(e,"error",s)}return n.apply(e,arguments)}}function $n(e,t){return Ae&&e===1&&!t.file?Re(t.original,"spawn"):null}function xo(e,t){return Ae&&e===1&&!t.file?Re(t.original,"spawnSync"):null}Dn.exports={hookChildProcess:So,verifyENOENT:$n,verifyENOENTSync:xo,notFoundError:Re}});var Xn=a((Ba,G)=>{"use strict";var jn=require("child_process"),Te=Bn(),Ne=Un();function Hn(e,t,n){let r=Te(e,t,n),i=jn.spawn(r.command,r.args,r.options);return Ne.hookChildProcess(i,r),i}function Eo(e,t,n){let r=Te(e,t,n),i=jn.spawnSync(r.command,r.args,r.options);return i.error=i.error||Ne.verifyENOENTSync(i.status,r),i}G.exports=Hn;G.exports.spawn=Hn;G.exports.sync=Eo;G.exports._parse=Te;G.exports._enoent=Ne});var zn=a(($a,Kn)=>{"use strict";Kn.exports=e=>{let t=typeof e=="string"?`
`:`
`.charCodeAt(),n=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e}});var Qn=a((Da,X)=>{"use strict";var H=require("path"),Zn=qe(),Vn=e=>{e={cwd:process.cwd(),path:process.env[Zn()],execPath:process.execPath,...e};let t,n=H.resolve(e.cwd),r=[];for(;t!==n;)r.push(H.join(n,"node_modules/.bin")),t=n,n=H.resolve(n,"..");let i=H.resolve(e.cwd,e.execPath,"..");return r.push(i),r.concat(e.path).join(H.delimiter)};X.exports=Vn;X.exports.default=Vn;X.exports.env=e=>{e={env:process.env,...e};let t={...e.env},n=Zn({env:t});return e.path=t[n],t[n]=X.exports(e),t}});var Yn=a((Ua,_e)=>{"use strict";var Jn=(e,t)=>{for(let n of Reflect.ownKeys(t))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e};_e.exports=Jn;_e.exports.default=Jn});var tr=a((ja,se)=>{"use strict";var Io=Yn(),ie=new WeakMap,er=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let n,r=0,i=e.displayName||e.name||"<anonymous>",s=function(...o){if(ie.set(s,++r),r===1)n=e.apply(this,o),e=null;else if(t.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return n};return Io(s,e),ie.set(s,r),s};se.exports=er;se.exports.default=er;se.exports.callCount=e=>{if(!ie.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return ie.get(e)}});var nr=a(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.SIGNALS=void 0;var Co=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];oe.SIGNALS=Co});var Oe=a(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.SIGRTMAX=k.getRealtimeSignals=void 0;var vo=function(){let e=ir-rr+1;return Array.from({length:e},bo)};k.getRealtimeSignals=vo;var bo=function(e,t){return{name:`SIGRT${t+1}`,number:rr+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},rr=34,ir=64;k.SIGRTMAX=ir});var sr=a(ce=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});ce.getSignals=void 0;var qo=require("os"),Po=nr(),Wo=Oe(),Fo=function(){let e=(0,Wo.getRealtimeSignals)();return[...Po.SIGNALS,...e].map(Ao)};ce.getSignals=Fo;var Ao=function({name:e,number:t,description:n,action:r,forced:i=!1,standard:s}){let{signals:{[e]:o}}=qo.constants,c=o!==void 0;return{name:e,number:c?o:t,description:n,supported:c,action:r,forced:i,standard:s}}});var cr=a(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.signalsByNumber=M.signalsByName=void 0;var Ro=require("os"),or=sr(),To=Oe(),No=function(){return(0,or.getSignals)().reduce(_o,{})},_o=function(e,{name:t,number:n,description:r,supported:i,action:s,forced:o,standard:c}){return{...e,[t]:{name:t,number:n,description:r,supported:i,action:s,forced:o,standard:c}}},Oo=No();M.signalsByName=Oo;var Lo=function(){let e=(0,or.getSignals)(),t=To.SIGRTMAX+1,n=Array.from({length:t},(r,i)=>Go(i,e));return Object.assign({},...n)},Go=function(e,t){let n=ko(e,t);if(n===void 0)return{};let{name:r,description:i,supported:s,action:o,forced:c,standard:u}=n;return{[e]:{name:r,number:e,description:i,supported:s,action:o,forced:c,standard:u}}},ko=function(e,t){let n=t.find(({name:r})=>Ro.constants.signals[r]===e);return n!==void 0?n:t.find(r=>r.number===e)},Mo=Lo();M.signalsByNumber=Mo});var ur=a((Za,ar)=>{"use strict";var{signalsByName:Bo}=cr(),$o=({timedOut:e,timeout:t,errorCode:n,signal:r,signalDescription:i,exitCode:s,isCanceled:o})=>e?`timed out after ${t} milliseconds`:o?"was canceled":n!==void 0?`failed with ${n}`:r!==void 0?`was killed with ${r} (${i})`:s!==void 0?`failed with exit code ${s}`:"failed",Do=({stdout:e,stderr:t,all:n,error:r,signal:i,exitCode:s,command:o,escapedCommand:c,timedOut:u,isCanceled:l,killed:f,parsed:{options:{timeout:h}}})=>{s=s===null?void 0:s,i=i===null?void 0:i;let m=i===void 0?void 0:Bo[i].description,w=r&&r.code,b=`Command ${$o({timedOut:u,timeout:h,errorCode:w,signal:i,signalDescription:m,exitCode:s,isCanceled:l})}: ${o}`,R=Object.prototype.toString.call(r)==="[object Error]",Q=R?`${b}
${r.message}`:b,J=[Q,t,e].filter(Boolean).join(`
`);return R?(r.originalMessage=r.message,r.message=J):r=new Error(J),r.shortMessage=Q,r.command=o,r.escapedCommand=c,r.exitCode=s,r.signal=i,r.signalDescription=m,r.stdout=e,r.stderr=t,n!==void 0&&(r.all=n),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=!!u,r.isCanceled=l,r.killed=f&&!u,r};ar.exports=Do});var fr=a((Va,Le)=>{"use strict";var ae=["stdin","stdout","stderr"],Uo=e=>ae.some(t=>e[t]!==void 0),lr=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return ae.map(r=>e[r]);if(Uo(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${ae.map(r=>`\`${r}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let n=Math.max(t.length,ae.length);return Array.from({length:n},(r,i)=>t[i])};Le.exports=lr;Le.exports.node=e=>{let t=lr(e);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var dr=a((Qa,ue)=>{ue.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&ue.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&ue.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var wr=a((Ja,D)=>{var p=global.process,W=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};W(p)?(pr=require("assert"),B=dr(),mr=/^win/i.test(p.platform),K=require("events"),typeof K!="function"&&(K=K.EventEmitter),p.__signal_exit_emitter__?y=p.__signal_exit_emitter__:(y=p.__signal_exit_emitter__=new K,y.count=0,y.emitted={}),y.infinite||(y.setMaxListeners(1/0),y.infinite=!0),D.exports=function(e,t){if(!W(global.process))return function(){};pr.equal(typeof e,"function","a callback must be provided for exit handler"),$===!1&&Ge();var n="exit";t&&t.alwaysLast&&(n="afterexit");var r=function(){y.removeListener(n,e),y.listeners("exit").length===0&&y.listeners("afterexit").length===0&&le()};return y.on(n,e),r},le=function(){!$||!W(global.process)||($=!1,B.forEach(function(t){try{p.removeListener(t,fe[t])}catch{}}),p.emit=de,p.reallyExit=ke,y.count-=1)},D.exports.unload=le,F=function(t,n,r){y.emitted[t]||(y.emitted[t]=!0,y.emit(t,n,r))},fe={},B.forEach(function(e){fe[e]=function(){if(W(global.process)){var n=p.listeners(e);n.length===y.count&&(le(),F("exit",null,e),F("afterexit",null,e),mr&&e==="SIGHUP"&&(e="SIGINT"),p.kill(p.pid,e))}}}),D.exports.signals=function(){return B},$=!1,Ge=function(){$||!W(global.process)||($=!0,y.count+=1,B=B.filter(function(t){try{return p.on(t,fe[t]),!0}catch{return!1}}),p.emit=yr,p.reallyExit=hr)},D.exports.load=Ge,ke=p.reallyExit,hr=function(t){W(global.process)&&(p.exitCode=t||0,F("exit",p.exitCode,null),F("afterexit",p.exitCode,null),ke.call(p,p.exitCode))},de=p.emit,yr=function(t,n){if(t==="exit"&&W(global.process)){n!==void 0&&(p.exitCode=n);var r=de.apply(this,arguments);return F("exit",p.exitCode,null),F("afterexit",p.exitCode,null),r}else return de.apply(this,arguments)}):D.exports=function(){return function(){}};var pr,B,mr,K,y,le,F,fe,$,Ge,ke,hr,de,yr});var Sr=a((Ya,gr)=>{"use strict";var jo=require("os"),Ho=wr(),Xo=1e3*5,Ko=(e,t="SIGTERM",n={})=>{let r=e(t);return zo(e,t,n,r),r},zo=(e,t,n,r)=>{if(!Zo(t,n,r))return;let i=Qo(n),s=setTimeout(()=>{e("SIGKILL")},i);s.unref&&s.unref()},Zo=(e,{forceKillAfterTimeout:t},n)=>Vo(e)&&t!==!1&&n,Vo=e=>e===jo.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Qo=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Xo;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},Jo=(e,t)=>{e.kill()&&(t.isCanceled=!0)},Yo=(e,t,n)=>{e.kill(t),n(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},ec=(e,{timeout:t,killSignal:n="SIGTERM"},r)=>{if(t===0||t===void 0)return r;let i,s=new Promise((c,u)=>{i=setTimeout(()=>{Yo(e,n,u)},t)}),o=r.finally(()=>{clearTimeout(i)});return Promise.race([s,o])},tc=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},nc=async(e,{cleanup:t,detached:n},r)=>{if(!t||n)return r;let i=Ho(()=>{e.kill()});return r.finally(()=>{i()})};gr.exports={spawnedKill:Ko,spawnedCancel:Jo,setupTimeout:ec,validateTimeout:tc,setExitHandler:nc}});var Er=a((eu,xr)=>{"use strict";var P=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";P.writable=e=>P(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";P.readable=e=>P(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";P.duplex=e=>P.writable(e)&&P.readable(e);P.transform=e=>P.duplex(e)&&typeof e._transform=="function";xr.exports=P});var Cr=a((tu,Ir)=>{"use strict";var{PassThrough:rc}=require("stream");Ir.exports=e=>{e={...e};let{array:t}=e,{encoding:n}=e,r=n==="buffer",i=!1;t?i=!(n||r):n=n||"utf8",r&&(n=null);let s=new rc({objectMode:i});n&&s.setEncoding(n);let o=0,c=[];return s.on("data",u=>{c.push(u),i?o=c.length:o+=u.length}),s.getBufferedValue=()=>t?c:r?Buffer.concat(c,o):c.join(""),s.getBufferedLength=()=>o,s}});var vr=a((nu,z)=>{"use strict";var{constants:ic}=require("buffer"),sc=require("stream"),{promisify:oc}=require("util"),cc=Cr(),ac=oc(sc.pipeline),pe=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Me(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:n}=t,r=cc(t);return await new Promise((i,s)=>{let o=c=>{c&&r.getBufferedLength()<=ic.MAX_LENGTH&&(c.bufferedData=r.getBufferedValue()),s(c)};(async()=>{try{await ac(e,r),i()}catch(c){o(c)}})(),r.on("data",()=>{r.getBufferedLength()>n&&o(new pe)})}),r.getBufferedValue()}z.exports=Me;z.exports.buffer=(e,t)=>Me(e,{...t,encoding:"buffer"});z.exports.array=(e,t)=>Me(e,{...t,array:!0});z.exports.MaxBufferError=pe});var qr=a((ru,br)=>{"use strict";var{PassThrough:uc}=require("stream");br.exports=function(){var e=[],t=new uc({objectMode:!0});return t.setMaxListeners(0),t.add=n,t.isEmpty=r,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(n),t;function n(s){return Array.isArray(s)?(s.forEach(n),this):(e.push(s),s.once("end",i.bind(null,s)),s.once("error",t.emit.bind(t,"error")),s.pipe(t,{end:!1}),this)}function r(){return e.length==0}function i(s){e=e.filter(function(o){return o!==s}),!e.length&&t.readable&&t.end()}}});var Ar=a((iu,Fr)=>{"use strict";var Wr=Er(),Pr=vr(),lc=qr(),fc=(e,t)=>{t===void 0||e.stdin===void 0||(Wr(t)?t.pipe(e.stdin):e.stdin.end(t))},dc=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let n=lc();return e.stdout&&n.add(e.stdout),e.stderr&&n.add(e.stderr),n},Be=async(e,t)=>{if(e){e.destroy();try{return await t}catch(n){return n.bufferedData}}},$e=(e,{encoding:t,buffer:n,maxBuffer:r})=>{if(!(!e||!n))return t?Pr(e,{encoding:t,maxBuffer:r}):Pr.buffer(e,{maxBuffer:r})},pc=async({stdout:e,stderr:t,all:n},{encoding:r,buffer:i,maxBuffer:s},o)=>{let c=$e(e,{encoding:r,buffer:i,maxBuffer:s}),u=$e(t,{encoding:r,buffer:i,maxBuffer:s}),l=$e(n,{encoding:r,buffer:i,maxBuffer:s*2});try{return await Promise.all([o,c,u,l])}catch(f){return Promise.all([{error:f,signal:f.signal,timedOut:f.timedOut},Be(e,c),Be(t,u),Be(n,l)])}},mc=({input:e})=>{if(Wr(e))throw new TypeError("The `input` option cannot be a stream in sync mode")};Fr.exports={handleInput:fc,makeAllStream:dc,getSpawnedResult:pc,validateInputSync:mc}});var Tr=a((su,Rr)=>{"use strict";var hc=(async()=>{})().constructor.prototype,yc=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(hc,e)]),wc=(e,t)=>{for(let[n,r]of yc){let i=typeof t=="function"?(...s)=>Reflect.apply(r.value,t(),s):r.value.bind(t);Reflect.defineProperty(e,n,{...r,value:i})}return e},gc=e=>new Promise((t,n)=>{e.on("exit",(r,i)=>{t({exitCode:r,signal:i})}),e.on("error",r=>{n(r)}),e.stdin&&e.stdin.on("error",r=>{n(r)})});Rr.exports={mergePromise:wc,getSpawnedPromise:gc}});var Or=a((ou,_r)=>{"use strict";var Nr=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Sc=/^[\w.-]+$/,xc=/"/g,Ec=e=>typeof e!="string"||Sc.test(e)?e:`"${e.replace(xc,'\\"')}"`,Ic=(e,t)=>Nr(e,t).join(" "),Cc=(e,t)=>Nr(e,t).map(n=>Ec(n)).join(" "),vc=/ +/g,bc=e=>{let t=[];for(let n of e.trim().split(vc)){let r=t[t.length-1];r&&r.endsWith("\\")?t[t.length-1]=`${r.slice(0,-1)} ${n}`:t.push(n)}return t};_r.exports={joinCommand:Ic,getEscapedCommand:Cc,parseCommand:bc}});var Dr=a((cu,U)=>{"use strict";var qc=require("path"),De=require("child_process"),Pc=Xn(),Wc=zn(),Fc=Qn(),Ac=tr(),me=ur(),Gr=fr(),{spawnedKill:Rc,spawnedCancel:Tc,setupTimeout:Nc,validateTimeout:_c,setExitHandler:Oc}=Sr(),{handleInput:Lc,getSpawnedResult:Gc,makeAllStream:kc,validateInputSync:Mc}=Ar(),{mergePromise:Lr,getSpawnedPromise:Bc}=Tr(),{joinCommand:kr,parseCommand:Mr,getEscapedCommand:Br}=Or(),$c=1e3*1e3*100,Dc=({env:e,extendEnv:t,preferLocal:n,localDir:r,execPath:i})=>{let s=t?{...process.env,...e}:e;return n?Fc.env({env:s,cwd:r,execPath:i}):s},$r=(e,t,n={})=>{let r=Pc._parse(e,t,n);return e=r.command,t=r.args,n=r.options,n={maxBuffer:$c,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:n.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...n},n.env=Dc(n),n.stdio=Gr(n),process.platform==="win32"&&qc.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:n,parsed:r}},Z=(e,t,n)=>typeof t!="string"&&!Buffer.isBuffer(t)?n===void 0?void 0:"":e.stripFinalNewline?Wc(t):t,he=(e,t,n)=>{let r=$r(e,t,n),i=kr(e,t),s=Br(e,t);_c(r.options);let o;try{o=De.spawn(r.file,r.args,r.options)}catch(w){let I=new De.ChildProcess,b=Promise.reject(me({error:w,stdout:"",stderr:"",all:"",command:i,escapedCommand:s,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return Lr(I,b)}let c=Bc(o),u=Nc(o,r.options,c),l=Oc(o,r.options,u),f={isCanceled:!1};o.kill=Rc.bind(null,o.kill.bind(o)),o.cancel=Tc.bind(null,o,f);let m=Ac(async()=>{let[{error:w,exitCode:I,signal:b,timedOut:R},Q,J,ii]=await Gc(o,r.options,l),Ke=Z(r.options,Q),ze=Z(r.options,J),Ze=Z(r.options,ii);if(w||I!==0||b!==null){let Ve=me({error:w,exitCode:I,signal:b,stdout:Ke,stderr:ze,all:Ze,command:i,escapedCommand:s,parsed:r,timedOut:R,isCanceled:f.isCanceled,killed:o.killed});if(!r.options.reject)return Ve;throw Ve}return{command:i,escapedCommand:s,exitCode:0,stdout:Ke,stderr:ze,all:Ze,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return Lc(o,r.options.input),o.all=kc(o,r.options),Lr(o,m)};U.exports=he;U.exports.sync=(e,t,n)=>{let r=$r(e,t,n),i=kr(e,t),s=Br(e,t);Mc(r.options);let o;try{o=De.spawnSync(r.file,r.args,r.options)}catch(l){throw me({error:l,stdout:"",stderr:"",all:"",command:i,escapedCommand:s,parsed:r,timedOut:!1,isCanceled:!1,killed:!1})}let c=Z(r.options,o.stdout,o.error),u=Z(r.options,o.stderr,o.error);if(o.error||o.status!==0||o.signal!==null){let l=me({stdout:c,stderr:u,error:o.error,signal:o.signal,exitCode:o.status,command:i,escapedCommand:s,parsed:r,timedOut:o.error&&o.error.code==="ETIMEDOUT",isCanceled:!1,killed:o.signal!==null});if(!r.options.reject)return l;throw l}return{command:i,escapedCommand:s,exitCode:0,stdout:c,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};U.exports.command=(e,t)=>{let[n,...r]=Mr(e);return he(n,r,t)};U.exports.commandSync=(e,t)=>{let[n,...r]=Mr(e);return he.sync(n,r,t)};U.exports.node=(e,t,n={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(n=t,t=[]);let r=Gr.node(n),i=process.execArgv.filter(c=>!c.startsWith("--inspect")),{nodePath:s=process.execPath,nodeOptions:o=i}=n;return he(s,[...o,e,...Array.isArray(t)?t:[]],{...n,stdin:void 0,stdout:void 0,stderr:void 0,stdio:r,shell:!1})}});var Zc={};li(Zc,{default:()=>ri});module.exports=fi(Zc);var d=require("@raycast/api");var A=require("react"),He=j(Ce());var g=require("@raycast/api"),zc=j(Ce());var we=j(require("node:process"),1),Hr=j(Dr(),1);function Ue({onlyFirst:e=!1}={}){let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}function je(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(Ue(),"")}var ye=j(require("node:process"),1),Ur=require("node:os"),Uc=()=>{let{env:e}=ye.default;if(ye.default.platform==="win32")return e.COMSPEC||"cmd.exe";try{let{shell:t}=(0,Ur.userInfo)();if(t)return t}catch{}return ye.default.platform==="darwin"?e.SHELL||"/bin/zsh":e.SHELL||"/bin/sh"},jc=Uc(),jr=jc;var Hc=["-ilc",'echo -n "_SHELL_ENV_DELIMITER_"; env; echo -n "_SHELL_ENV_DELIMITER_"; exit'],Xc={DISABLE_AUTO_UPDATE:"true"},Kc=e=>{e=e.split("_SHELL_ENV_DELIMITER_")[1];let t={};for(let n of je(e).split(`
`).filter(r=>!!r)){let[r,...i]=n.split("=");t[r]=i.join("=")}return t};async function Xr(e){if(we.default.platform==="win32")return we.default.env;try{let{stdout:t}=await(0,Hr.default)(e||jr,Hc,{env:Xc});return Kc(t)}catch(t){if(e)throw t;return we.default.env}}var ge=null,Kr=async()=>{if(ge)return ge;let e=await Xr();return ge={env:e,cwd:e.HOME||`/Users/${process.env.USER}`,shell:e.SHELL},ge};var V=require("child_process");var zr=require("@raycast/api"),{showQualityNumber:Zr,showWifiName:Vr,showColorfulSignal:Qr}=(0,zr.getPreferenceValues)();var Jr=async()=>{try{let e=await Kr(),t=(0,V.execSync)("networksetup -listnetworkserviceorder | sed -n '/Wi-Fi/s|.*Device: \\(.*\\)).*|\\1|p'",e),n=String(t).trim(),r=(0,V.execSync)(`networksetup -getairportnetwork ${n}`,e);String(r).trim().includes("off")?(await(0,g.showHUD)("Wi-Fi turned on"),(0,V.execSync)(`networksetup -setairportpower ${n} on`,e)):(await(0,g.showHUD)("Wi-Fi turned off"),(0,V.execSync)(`networksetup -setairportpower ${n} off`,e))}catch(e){console.error(e),await(0,g.showHUD)(String(e))}};var Yr=e=>e===void 0?g.Icon.WifiDisabled:e<40?g.Icon.Signal1:e<70?g.Icon.Signal2:e<90?g.Icon.Signal3:g.Icon.FullSignal,ei=e=>{if(e!==void 0)return e<40?g.Color.Red:e<70?g.Color.Orange:g.Color.Green},ti=e=>{if(e===void 0)return"";let t=Vr?e?.ssid+"":"",n=Zr?e?.quality+"":"";return t+" "+n};var Xe=require("@raycast/api");He.default.init({iface:null});var ni=()=>{let e=new Xe.Cache,t=e.get("Cur Wifi"),n;typeof t=="string"&&t!=""&&(n=JSON.parse(t));let[r,i]=(0,A.useState)(n),[s,o]=(0,A.useState)(!0),c=(0,A.useCallback)(async()=>{o(!0);let u=await He.default.getCurrentConnections(),l=u.length!=0?u[0]:void 0;i(l),l===void 0?e.set("Cur Wifi",""):e.set("Cur Wifi",JSON.stringify(l)),o(!1)},[]);return(0,A.useEffect)(()=>{c()},[c]),{curWifi:r,loading:s}};var v=require("react/jsx-runtime");function ri(){let{curWifi:e,loading:t}=ni(),n=ti(e),r={source:Yr(e?.quality),tintColor:Qr?ei(e?.quality):void 0};return(0,v.jsxs)(d.MenuBarExtra,{title:n,icon:r,isLoading:t,children:[e!==void 0&&(0,v.jsxs)(d.MenuBarExtra.Section,{children:[(0,v.jsx)(d.MenuBarExtra.Item,{title:"Wi-Fi",subtitle:e?.ssid,icon:d.Icon.Wifi,onAction:()=>{d.Clipboard.copy(e?.ssid+"").then(()=>(0,d.showHUD)("Wi-Fi Copied"))}}),(0,v.jsx)(d.MenuBarExtra.Item,{title:"Quality",subtitle:e?.quality.toString(),icon:d.Icon.LevelMeter,onAction:()=>{d.Clipboard.copy(e?.quality+"").then(()=>(0,d.showHUD)("Quality Copied"))}}),(0,v.jsx)(d.MenuBarExtra.Item,{title:"Security",subtitle:e?.security,icon:d.Icon.Lock,onAction:()=>{d.Clipboard.copy(e?.security+"").then(()=>(0,d.showHUD)("Security Copied"))}}),(0,v.jsx)(d.MenuBarExtra.Item,{title:"Channel",subtitle:e?.channel.toString(),icon:d.Icon.Livestream,onAction:()=>{d.Clipboard.copy(e?.channel+"").then(()=>(0,d.showHUD)("Channel Copied"))}}),(0,v.jsx)(d.MenuBarExtra.Item,{title:"Frequency",subtitle:e?.frequency.toString(),icon:d.Icon.Heartbeat,onAction:()=>{d.Clipboard.copy(e?.frequency+"").then(()=>(0,d.showHUD)("Frequency Copied"))}})]}),(0,v.jsxs)(d.MenuBarExtra.Section,{children:[(0,v.jsx)(d.MenuBarExtra.Item,{title:"Toggle Wi-Fi",icon:e===void 0?d.Icon.Wifi:d.Icon.WifiDisabled,shortcut:{modifiers:["cmd"],key:"t"},onAction:async()=>{await Jr()}}),(0,v.jsx)(d.MenuBarExtra.Item,{title:"Preferences",icon:d.Icon.Gear,shortcut:{modifiers:["cmd"],key:","},onAction:()=>{(0,d.openCommandPreferences)().then(()=>null)}})]})]})}
