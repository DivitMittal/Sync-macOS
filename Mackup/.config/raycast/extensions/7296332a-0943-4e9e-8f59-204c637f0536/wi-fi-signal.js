"use strict";var Zr=Object.create;var Q=Object.defineProperty;var Vr=Object.getOwnPropertyDescriptor;var Qr=Object.getOwnPropertyNames;var Jr=Object.getPrototypeOf,Yr=Object.prototype.hasOwnProperty;var a=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ei=(e,t)=>{for(var n in t)Q(e,n,{get:t[n],enumerable:!0})},Xe=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Qr(t))!Yr.call(e,i)&&i!==n&&Q(e,i,{get:()=>t[i],enumerable:!(r=Vr(t,i))||r.enumerable});return e};var J=(e,t,n)=>(n=e!=null?Zr(Jr(e)):{},Xe(t||!e||!e.__esModule?Q(n,"default",{value:e,enumerable:!0}):n,e)),ti=e=>Xe(Q({},"__esModule",{value:!0}),e);var q=a((Gc,ze)=>{ze.exports=Object.assign(process.env,{LANG:"en_US.UTF-8",LC_ALL:"en_US.UTF-8",LC_MESSAGES:"en_US.UTF-8"})});var ee=a(Y=>{var T={},g=2412;for(let e=1;e<15;e++)T[e]=g.toString(),g=g+5;g=5180;for(let e=36;e<=64;e+=2)T[e]=g.toString(),g+=10;g=5500;for(let e=100;e<=144;e+=2)T[e]=g.toString(),g+=10;g=5745;for(let e=149;e<=161;e+=2)T[e]=g.toString(),g+=10;g=5825;for(let e=165;e<=173;e+=4)T[e]=g.toString(),g+=20;function ni(e){return T[parseInt(e)]}function ri(e){return parseFloat(e)/2-100}function ii(e){return 2*(parseFloat(e)+100)}Y.frequencyFromChannel=ni;Y.dBFromQuality=ri;Y.qualityFromDB=ii});var ye=a((Bc,Ve)=>{var si=require("child_process").execFile,Ke=ee(),oi=q();function Ze(e,t){try{si("netsh",["wlan","show","networks","mode=Bssid"],{env:oi},(n,r)=>{if(n){t&&t(n);return}r=r.toString("utf8").split("\r").join("").split(`
`).slice(4,r.length);let i=-1,s=0,o,c=[],u,l=[],d;for(d=0;d<r.length;d++)r[d]===""&&(i++,o=r.slice(s,d),c.push(o),s=d+1);for(d=0;d<i;d++)c[d]&&c[d].length>0&&(u=ci(c[d]),l.push(u));t&&t(null,l)})}catch(n){t&&t(n)}}function ci(e){let t={};return t.mac=e[4]?e[4].match(/.*?:\s(.*)/)[1]:"",t.bssid=t.mac,t.ssid=e[0]?e[0].match(/.*?:\s(.*)/)[1]:"",t.channel=e[7]?parseInt(e[7].match(/.*?:\s(.*)/)[1]):-1,t.frequency=t.channel?parseInt(Ke.frequencyFromChannel(t.channel)):0,t.signal_level=e[5]?Ke.dBFromQuality(e[5].match(/.*?:\s(.*)/)[1]):Number.MIN_VALUE,t.quality=e[5]?parseFloat(e[5].match(/.*?:\s(.*)/)[1]):0,t.security=e[2]?e[2].match(/.*?:\s(.*)/)[1]:"",t.security_flags=e[3]?e[3].match(/.*?:\s(.*)/)[1]:"",t.mode="Unknown",t}Ve.exports=e=>t=>{if(t)Ze(e,t);else return new Promise((n,r)=>{Ze(e,(i,s)=>{i?r(i):n(s)})})}});var tt=a(($c,et)=>{var ai=require("fs"),Je=require("child_process").execFile,Ye=q(),ui=ye(),li=require("path"),fi=require("os"),we=li.join(fi.tmpdir(),"nodeWifiConnect.xml");function ge(e,t){return new Promise((n,r)=>{Je(e,t,{env:Ye,shell:!0},(i,s,o)=>{i?(i.stdout=s,i.stderr=o,r(i)):n(s)})})}function Qe(e,t,n){ui(e)().then(r=>{let i=r.find(s=>s.ssid===t.ssid);if(i===void 0)throw"SSID not found";ai.writeFileSync(we,pi(i,t.password))}).then(()=>ge("netsh",["wlan","add","profile",`filename=${we}`])).then(()=>{let r="netsh",i=["wlan","connect",`ssid="${t.ssid}"`,`name="${t.ssid}"`];return e.iface&&i.push(`interface="${e.iface}"`),ge(r,i)}).then(()=>ge(`del ${we}`)).then(()=>{n&&n()}).catch(r=>{Je("netsh",["wlan","delete",`profile "${t.ssid}"`],{env:Ye},()=>{n&&n(r)})})}function di(e){let t,n,r,i;for(i="",t=n=0,r=e.length-1;r>=0?n<=r:n>=r;t=r>=0?++n:--n)i+=e.charCodeAt(t).toString(16);return i}function pi(e,t){let n=`<?xml version="1.0"?> <WLANProfile xmlns="http://www.microsoft.com/networking/WLAN/profile/v1"> <name>${e.ssid}</name> <SSIDConfig> <SSID> <hex>${di(e.ssid)}</hex> <name>${e.ssid}</name> </SSID> </SSIDConfig>`;return e.security.includes("WPA2")?n+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>WPA2PSK</authentication> <encryption>AES</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>passPhrase</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:e.security.includes("WPA")?n+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>WPAPSK</authentication> <encryption>TKIP</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>passPhrase</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:e.security_flags.includes("WEP")?n+=`<connectionType>ESS</connectionType> <connectionMode>auto</connectionMode> <autoSwitch>true</autoSwitch> <MSM> <security> <authEncryption> <authentication>open</authentication> <encryption>WEP</encryption> <useOneX>false</useOneX> </authEncryption> <sharedKey> <keyType>networkKey</keyType> <protected>false</protected> <keyMaterial>${t}</keyMaterial> </sharedKey> </security> </MSM>`:n+="<connectionType>ESS</connectionType> <connectionMode>manual</connectionMode> <MSM> <security> <authEncryption> <authentication>open</authentication> <encryption>none</encryption> <useOneX>false</useOneX> </authEncryption> </security> </MSM>",n+="</WLANProfile>",n}et.exports=e=>(t,n)=>{if(n)Qe(e,t,n);else return new Promise((r,i)=>{Qe(e,t,s=>{s?i(s):r()})})}});var it=a((Dc,rt)=>{var mi=require("child_process").execFile,hi=q();function nt(e,t){let n="netsh",r=["wlan","disconnect"];e.iface&&r.push(`interface="${e.iface}"`),mi(n,r,{env:hi},i=>{t&&t(i)})}rt.exports=e=>t=>{if(t)nt(e,t);else return new Promise((n,r)=>{nt(e,i=>{i?r(i):n()})})}});var at=a((Uc,ct)=>{var yi=require("child_process").execFile,wi=q(),st=ee();function gi(e){let t=e.split(`\r
`),n=[],r=3;for(;t.length>r+18;){let i={},s=["name","description","guid","mac","state","ssid","bssid","mode","radio","authentication","encryption","connection","channel","reception","transmission","signal","profil"];for(let o=0;o<s.length;o++){let c=t[r+o];i[s[o]]=c.match(/.*: (.*)/)[1]}n.push({iface:i.name,ssid:i.ssid,bssid:i.bssid,mac:i.bssid,mode:i.mode,channel:parseInt(i.channel),frequency:parseInt(st.frequencyFromChannel(parseInt(i.channel))),signal_level:st.dBFromQuality(i.signal),quality:parseFloat(i.signal),security:i.authentication,security_flags:i.encryption}),r=r+18}return n}function ot(e,t){yi("netsh",["wlan","show","interfaces"],{env:wi},(r,i)=>{if(r)t&&t(r);else try{let s=gi(i,e);t&&t(null,s)}catch(s){t&&t(s)}})}ct.exports=e=>t=>{if(t)ot(e,t);else return new Promise((n,r)=>{ot(e,(i,s)=>{i?r(i):n(s)})})}});var ft=a((jc,lt)=>{var Si=require("child_process").execFile,xi=q();function ut(e,t,n){let r=[];r.push("-w"),r.push("10"),r.push("device"),r.push("wifi"),r.push("connect"),r.push(t.ssid),r.push("password"),r.push(t.password),e.iface&&(r.push("ifname"),r.push(e.iface)),Si("nmcli",r,{env:xi},(i,s)=>{s.includes("Error: ")&&(i=new Error(s.replace("Error: ",""))),n&&n(i)})}lt.exports=e=>(t,n)=>{if(n)ut(e,t,n);else return new Promise((r,i)=>{ut(e,t,s=>{s?i(s):r()})})}});var mt=a((Hc,pt)=>{var Ei=require("child_process").execFile,Ii=q();function dt(e,t){let n=[];n.push("device"),n.push("disconnect"),e.iface&&n.push(e.iface),Ei("nmcli",n,{env:Ii},r=>{t&&t(r)})}pt.exports=e=>t=>{if(t)dt(e,t);else return new Promise((n,r)=>{dt(e,i=>{i?r(i):n()})})}});var wt=a((Xc,yt)=>{var Ci=require("child_process").execFile,vi=q();function ht(e,t,n){let r=[];r.push("connection"),r.push("delete"),r.push("id"),r.push(t.ssid),Ci("nmcli",r,vi,i=>{n&&n(i)})}yt.exports=e=>(t,n)=>{if(n)ht(e,t,n);else return new Promise((r,i)=>{ht(e,t,s=>{s?i(s):r()})})}});var xt=a((zc,St)=>{var bi=require("child_process").execFile,qi=ee(),Pi=q();function gt(e,t){let n=[];n.push("--terse"),n.push("--fields"),n.push("active,ssid,bssid,mode,chan,freq,signal,security,wpa-flags,rsn-flags,device"),n.push("device"),n.push("wifi"),e.iface&&(n.push("list"),n.push("ifname"),n.push(e.iface)),bi("nmcli",n,{env:Pi},(r,i)=>{if(r){t&&t(r);return}let s=i.split(`
`),o=[];for(let c=0;c<s.length;c++)if(s[c]!=""){let u=s[c].replace(/\\:/g,"&&").split(":");u[0]=="yes"&&o.push({iface:u[10].replace(/&&/g,":"),ssid:u[1].replace(/&&/g,":"),bssid:u[2].replace(/&&/g,":"),mac:u[2].replace(/&&/g,":"),mode:u[3].replace(/&&/g,":"),channel:parseInt(u[4].replace(/&&/g,":")),frequency:parseInt(u[5].replace(/&&/g,":")),signal_level:qi.dBFromQuality(u[6].replace(/&&/g,":")),quality:parseFloat(u[6].replace(/&&/g,":")),security:u[7].replace(/&&/g,":"),security_flags:{wpa:u[8].replace(/&&/g,":"),rsn:u[9].replace(/&&/g,":")}})}t&&t(null,o)})}St.exports=e=>t=>{if(t)gt(e,t);else return new Promise((n,r)=>{gt(e,(i,s)=>{i?r(i):n(s)})})}});var N=a((Kc,Et)=>{var{execFile:Wi}=require("child_process"),Fi=q();Et.exports=({cmd:e,args:t})=>new Promise((n,r)=>{Wi(e,t,{env:Fi},(i,s)=>{i?r(i):n(s)})})});var _=a((Zc,It)=>{var Ai=e=>{let t=e.length-1;return t>=0&&typeof e[t]=="function"?{callback:e[t],args:e.slice(0,t)}:{callback:null,args:e}};It.exports=e=>t=>(...n)=>{let{args:r,callback:i}=Ai(n);if(typeof i=="function")e(t,...r).then(s=>{i(null,s)}).catch(s=>{i(s)});else return e(t,...r)}});var vt=a((Vc,Ct)=>{var Ri=e=>{let t=["--terse","--fields","active,ssid,bssid,mode,chan,freq,signal,security,wpa-flags,rsn-flags","device","wifi","list"];return e.iface&&(t.push("ifname"),t.push(e.iface)),{cmd:"nmcli",args:t}};Ct.exports=Ri});var te=a((Qc,bt)=>{var Ti=e=>2*(parseFloat(e)+100),Ni=e=>parseFloat(e)/2-100;bt.exports={percentageFromDB:Ti,dBFromPercentage:Ni}});var Wt=a((Jc,Pt)=>{var{dBFromPercentage:_i}=te(),qt=e=>e.match(/[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}\\:[A-F0-9]{2}/),Oi=e=>e.split(`
`).filter(t=>t!==""&&t.includes(":")).filter(t=>qt(t)).map(t=>{let n=qt(t),r=n[0].replace(/\\:/g,":"),i=t.replace(n[0]).split(":"),[s,o,c,u,l,d,h,m,w,E]=i;return{ssid:o,bssid:r,mac:r,mode:u,channel:parseInt(l),frequency:parseInt(d),signal_level:_i(h),quality:parseInt(h),security:m!=="(none)"?m:"none",security_flags:{wpa:w,rsn:E}}});Pt.exports=Oi});var At=a((Yc,Ft)=>{var Li=N(),ki=_(),Gi=vt(),Mi=Wt(),Bi=e=>Li(Gi(e)).then(t=>Mi(t));Ft.exports=ki(Bi)});var Tt=a((ea,Rt)=>{var $i=(e,t)=>{let n=["-setairportnetwork"];return n.push(e.iface||"en0"),n.push(t.ssid),n.push(t.password),{cmd:"/usr/sbin/networksetup",args:n}};Rt.exports=$i});var _t=a((ta,Nt)=>{var Di=N(),Ui=_(),ji=Tt(),Hi=(e,t)=>Di(ji(e,t));Nt.exports=Ui(Hi)});var Lt=a((na,Ot)=>{var Xi=()=>({cmd:"/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport",args:["--scan"]});Ot.exports=Xi});var Se=a((ra,kt)=>{var O={},S=2412;for(let e=1;e<15;e++)O[e]=S,S=S+5;S=5180;for(let e=36;e<=64;e+=2)O[e]=S,S+=10;S=5500;for(let e=100;e<=144;e+=2)O[e]=S,S+=10;S=5745;for(let e=149;e<=161;e+=2)O[e]=S,S+=10;S=5825;for(let e=165;e<=173;e+=4)O[e]=S,S+=20;kt.exports=e=>O[parseInt(e)]});var Mt=a((ia,Gt)=>{var{percentageFromDB:zi}=te(),Ki=Se(),Zi=e=>e.trim()!=="",Vi=e=>{let t=e==="NONE"?[{protocole:"NONE",flag:""}]:e.split(" ").map(n=>n.match(/(.*)\((.*)\)/)).filter(Boolean).map(([,n,r])=>({protocole:n,flag:r}));return{security:t.map(n=>n.protocole).join(" "),security_flags:t.filter(n=>n.flag).map(n=>`(${n.flag})`)}},Qi=e=>{let t=e.split(`
`),[,...n]=t;return n.filter(Zi).map(i=>i.trim()).map(i=>{let s=i.match(/(.*)\s+([a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}:[a-zA-Z0-9]{2}|)\s+(-[0-9]+)\s+([0-9]+).*\s+([A-Z]+)\s+([a-zA-Z-]+)\s+([A-Z0-9(,)\s/]+)/);if(s){let[,o,c,u,l,d,h,m]=s,w=parseInt(l);return{mac:c,bssid:c,ssid:o.trim(),channel:w,frequency:Ki(w),signal_level:u,quality:zi(u),...Vi(m)}}return!1}).filter(Boolean)};Gt.exports=Qi});var $t=a((sa,Bt)=>{var Ji=N(),Yi=_(),es=Lt(),ts=Mt(),ns=e=>Ji(es(e)).then(t=>ts(t));Bt.exports=Yi(ns)});var Ut=a((oa,Dt)=>{var rs=(e,t)=>{let n=["-removepreferredwirelessnetwork"];return n.push(e.iface||"en0"),n.push(t.ssid),{cmd:"/usr/sbin/networksetup",args:n}};Dt.exports=rs});var Ht=a((ca,jt)=>{var is=e=>{if(e&&e.includes("was not found in the preferred networks list"))throw new Error(e.trim())};jt.exports=is});var zt=a((aa,Xt)=>{var ss=N(),os=_(),cs=Ut(),as=Ht(),us=(e,t)=>ss(cs(e,t)).then(n=>as(n));Xt.exports=os(us)});var Zt=a((ua,Kt)=>{var ls=()=>({cmd:"/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport",args:["--getinfo"]});Kt.exports=ls});var Qt=a((la,Vt)=>{var{percentageFromDB:fs}=te(),ds=Se(),ps=/[ ]*agrCtlRSSI: (.*)/,ms=/[ ]*BSSID: ([0-9A-Fa-f:]*)/,hs=/[ ]*SSID: (.*)/,ys=/[ ]*link auth: (.*)/,ws=/[ ]*channel: (.*)/,gs=e=>e.split(":").map(t=>t.length===1?`0${t}`:t).join(":"),Ss=e=>{let t=e.split(`
`),n=[],r={};return t.forEach(i=>{let s=i.match(ps);if(s){r.signal_level=parseInt(s[1]),r.quality=fs(r.signal_level);return}let o=i.match(ms);if(o){r.bssid=gs(o[1]),r.mac=r.bssid;return}let c=i.match(hs);if(c){r.ssid=c[1];return}let u=i.match(ys);if(u){r.security=u[1],r.security_flags=[];return}let l=i.match(ws);l&&(r.channel=l[1],r.frequency=ds(r.channel),n.push(r),r={})}),n};Vt.exports=Ss});var Yt=a((fa,Jt)=>{var xs=N(),Es=_(),Is=Zt(),Cs=Qt(),vs=e=>xs(Is(e)).then(t=>Cs(t));Jt.exports=Es(vs)});var xe=a(C=>{var bs=tt(),qs=ye(),Ps=it(),Ws=at(),Fs=ft(),As=mt(),Rs=wt(),Ts=xt(),Ns=At(),_s=_t(),Os=$t(),Ls=zt(),ks=Yt(),x={debug:!1,iface:null};function Gs(e){e&&e.debug&&(x.debug=e.debug),e&&e.iface&&(x.iface=e.iface);let t=()=>{throw new Error("ERROR : not available for this OS")},n=()=>{throw new Error("ERROR : not available for this OS")},r=()=>{throw new Error("ERROR : not available for this OS")},i=()=>{throw new Error("ERROR : not available for this OS")},s=()=>{throw new Error("ERROR : not available for this OS")};switch(process.platform){case"linux":n=Fs(x),t=Ns(x),r=As(x),i=Rs(x),s=Ts(x);break;case"darwin":n=_s(x),t=Os(x),i=Ls(x),s=ks(x);break;case"win32":n=bs(x),t=qs(x),r=Ps(x),s=Ws(x);break;default:throw new Error("ERROR : UNRECOGNIZED OS")}C.scan=t,C.connect=n,C.disconnect=r,C.deleteConnection=i,C.getCurrentConnections=s}C.init=Gs;C.scan=()=>{throw new Error("ERROR : use init before")};C.connect=()=>{throw new Error("ERROR : use init before")};C.disconnect=()=>{throw new Error("ERROR : use init before")};C.getCurrentConnections=()=>{throw new Error("ERROR : use init before")};C.deleteConnection=()=>{throw new Error("ERROR : use init before")}});var sn=a((ma,rn)=>{rn.exports=nn;nn.sync=Bs;var en=require("fs");function Ms(e,t){var n=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&e.substr(-i.length).toLowerCase()===i)return!0}return!1}function tn(e,t,n){return!e.isSymbolicLink()&&!e.isFile()?!1:Ms(t,n)}function nn(e,t,n){en.stat(e,function(r,i){n(r,r?!1:tn(i,e,t))})}function Bs(e,t){return tn(en.statSync(e),e,t)}});var ln=a((ha,un)=>{un.exports=cn;cn.sync=$s;var on=require("fs");function cn(e,t,n){on.stat(e,function(r,i){n(r,r?!1:an(i,t))})}function $s(e,t){return an(on.statSync(e),t)}function an(e,t){return e.isFile()&&Ds(e,t)}function Ds(e,t){var n=e.mode,r=e.uid,i=e.gid,s=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),o=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),c=parseInt("100",8),u=parseInt("010",8),l=parseInt("001",8),d=c|u,h=n&l||n&u&&i===o||n&c&&r===s||n&d&&s===0;return h}});var dn=a((wa,fn)=>{var ya=require("fs"),ne;process.platform==="win32"||global.TESTING_WINDOWS?ne=sn():ne=ln();fn.exports=Ee;Ee.sync=Us;function Ee(e,t,n){if(typeof t=="function"&&(n=t,t={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,i){Ee(e,t||{},function(s,o){s?i(s):r(o)})})}ne(e,t||{},function(r,i){r&&(r.code==="EACCES"||t&&t.ignoreErrors)&&(r=null,i=!1),n(r,i)})}function Us(e,t){try{return ne.sync(e,t||{})}catch(n){if(t&&t.ignoreErrors||n.code==="EACCES")return!1;throw n}}});var Sn=a((ga,gn)=>{var L=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",pn=require("path"),js=L?";":":",mn=dn(),hn=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),yn=(e,t)=>{let n=t.colon||js,r=e.match(/\//)||L&&e.match(/\\/)?[""]:[...L?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],i=L?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=L?i.split(n):[""];return L&&e.indexOf(".")!==-1&&s[0]!==""&&s.unshift(""),{pathEnv:r,pathExt:s,pathExtExe:i}},wn=(e,t,n)=>{typeof t=="function"&&(n=t,t={}),t||(t={});let{pathEnv:r,pathExt:i,pathExtExe:s}=yn(e,t),o=[],c=l=>new Promise((d,h)=>{if(l===r.length)return t.all&&o.length?d(o):h(hn(e));let m=r[l],w=/^".*"$/.test(m)?m.slice(1,-1):m,E=pn.join(w,e),b=!w&&/^\.[\\\/]/.test(e)?e.slice(0,2)+E:E;d(u(b,l,0))}),u=(l,d,h)=>new Promise((m,w)=>{if(h===i.length)return m(c(d+1));let E=i[h];mn(l+E,{pathExt:s},(b,R)=>{if(!b&&R)if(t.all)o.push(l+E);else return m(l+E);return m(u(l,d,h+1))})});return n?c(0).then(l=>n(null,l),n):c(0)},Hs=(e,t)=>{t=t||{};let{pathEnv:n,pathExt:r,pathExtExe:i}=yn(e,t),s=[];for(let o=0;o<n.length;o++){let c=n[o],u=/^".*"$/.test(c)?c.slice(1,-1):c,l=pn.join(u,e),d=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+l:l;for(let h=0;h<r.length;h++){let m=d+r[h];try{if(mn.sync(m,{pathExt:i}))if(t.all)s.push(m);else return m}catch{}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw hn(e)};gn.exports=wn;wn.sync=Hs});var Ce=a((Sa,Ie)=>{"use strict";var xn=(e={})=>{let t=e.env||process.env;return(e.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"};Ie.exports=xn;Ie.exports.default=xn});var vn=a((xa,Cn)=>{"use strict";var En=require("path"),Xs=Sn(),zs=Ce();function In(e,t){let n=e.options.env||process.env,r=process.cwd(),i=e.options.cwd!=null,s=i&&process.chdir!==void 0&&!process.chdir.disabled;if(s)try{process.chdir(e.options.cwd)}catch{}let o;try{o=Xs.sync(e.command,{path:n[zs({env:n})],pathExt:t?En.delimiter:void 0})}catch{}finally{s&&process.chdir(r)}return o&&(o=En.resolve(i?e.options.cwd:"",o)),o}function Ks(e){return In(e)||In(e,!0)}Cn.exports=Ks});var bn=a((Ea,be)=>{"use strict";var ve=/([()\][%!^"`<>&|;, *?])/g;function Zs(e){return e=e.replace(ve,"^$1"),e}function Vs(e,t){return e=`${e}`,e=e.replace(/(\\*)"/g,'$1$1\\"'),e=e.replace(/(\\*)$/,"$1$1"),e=`"${e}"`,e=e.replace(ve,"^$1"),t&&(e=e.replace(ve,"^$1")),e}be.exports.command=Zs;be.exports.argument=Vs});var Pn=a((Ia,qn)=>{"use strict";qn.exports=/^#!(.*)/});var Fn=a((Ca,Wn)=>{"use strict";var Qs=Pn();Wn.exports=(e="")=>{let t=e.match(Qs);if(!t)return null;let[n,r]=t[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return i==="env"?r:r?`${i} ${r}`:i}});var Rn=a((va,An)=>{"use strict";var qe=require("fs"),Js=Fn();function Ys(e){let n=Buffer.alloc(150),r;try{r=qe.openSync(e,"r"),qe.readSync(r,n,0,150,0),qe.closeSync(r)}catch{}return Js(n.toString())}An.exports=Ys});var On=a((ba,_n)=>{"use strict";var eo=require("path"),Tn=vn(),Nn=bn(),to=Rn(),no=process.platform==="win32",ro=/\.(?:com|exe)$/i,io=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function so(e){e.file=Tn(e);let t=e.file&&to(e.file);return t?(e.args.unshift(e.file),e.command=t,Tn(e)):e.file}function oo(e){if(!no)return e;let t=so(e),n=!ro.test(t);if(e.options.forceShell||n){let r=io.test(t);e.command=eo.normalize(e.command),e.command=Nn.command(e.command),e.args=e.args.map(s=>Nn.argument(s,r));let i=[e.command].concat(e.args).join(" ");e.args=["/d","/s","/c",`"${i}"`],e.command=process.env.comspec||"cmd.exe",e.options.windowsVerbatimArguments=!0}return e}function co(e,t,n){t&&!Array.isArray(t)&&(n=t,t=null),t=t?t.slice(0):[],n=Object.assign({},n);let r={command:e,args:t,options:n,file:void 0,original:{command:e,args:t}};return n.shell?r:oo(r)}_n.exports=co});var Gn=a((qa,kn)=>{"use strict";var Pe=process.platform==="win32";function We(e,t){return Object.assign(new Error(`${t} ${e.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${e.command}`,path:e.command,spawnargs:e.args})}function ao(e,t){if(!Pe)return;let n=e.emit;e.emit=function(r,i){if(r==="exit"){let s=Ln(i,t,"spawn");if(s)return n.call(e,"error",s)}return n.apply(e,arguments)}}function Ln(e,t){return Pe&&e===1&&!t.file?We(t.original,"spawn"):null}function uo(e,t){return Pe&&e===1&&!t.file?We(t.original,"spawnSync"):null}kn.exports={hookChildProcess:ao,verifyENOENT:Ln,verifyENOENTSync:uo,notFoundError:We}});var $n=a((Pa,k)=>{"use strict";var Mn=require("child_process"),Fe=On(),Ae=Gn();function Bn(e,t,n){let r=Fe(e,t,n),i=Mn.spawn(r.command,r.args,r.options);return Ae.hookChildProcess(i,r),i}function lo(e,t,n){let r=Fe(e,t,n),i=Mn.spawnSync(r.command,r.args,r.options);return i.error=i.error||Ae.verifyENOENTSync(i.status,r),i}k.exports=Bn;k.exports.spawn=Bn;k.exports.sync=lo;k.exports._parse=Fe;k.exports._enoent=Ae});var Un=a((Wa,Dn)=>{"use strict";Dn.exports=e=>{let t=typeof e=="string"?`
`:`
`.charCodeAt(),n=typeof e=="string"?"\r":"\r".charCodeAt();return e[e.length-1]===t&&(e=e.slice(0,e.length-1)),e[e.length-1]===n&&(e=e.slice(0,e.length-1)),e}});var Xn=a((Fa,H)=>{"use strict";var j=require("path"),jn=Ce(),Hn=e=>{e={cwd:process.cwd(),path:process.env[jn()],execPath:process.execPath,...e};let t,n=j.resolve(e.cwd),r=[];for(;t!==n;)r.push(j.join(n,"node_modules/.bin")),t=n,n=j.resolve(n,"..");let i=j.resolve(e.cwd,e.execPath,"..");return r.push(i),r.concat(e.path).join(j.delimiter)};H.exports=Hn;H.exports.default=Hn;H.exports.env=e=>{e={env:process.env,...e};let t={...e.env},n=jn({env:t});return e.path=t[n],t[n]=H.exports(e),t}});var Kn=a((Aa,Re)=>{"use strict";var zn=(e,t)=>{for(let n of Reflect.ownKeys(t))Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n));return e};Re.exports=zn;Re.exports.default=zn});var Vn=a((Ra,ie)=>{"use strict";var fo=Kn(),re=new WeakMap,Zn=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let n,r=0,i=e.displayName||e.name||"<anonymous>",s=function(...o){if(re.set(s,++r),r===1)n=e.apply(this,o),e=null;else if(t.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return n};return fo(s,e),re.set(s,r),s};ie.exports=Zn;ie.exports.default=Zn;ie.exports.callCount=e=>{if(!re.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return re.get(e)}});var Qn=a(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.SIGNALS=void 0;var po=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];se.SIGNALS=po});var Te=a(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.SIGRTMAX=G.getRealtimeSignals=void 0;var mo=function(){let e=Yn-Jn+1;return Array.from({length:e},ho)};G.getRealtimeSignals=mo;var ho=function(e,t){return{name:`SIGRT${t+1}`,number:Jn+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Jn=34,Yn=64;G.SIGRTMAX=Yn});var er=a(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.getSignals=void 0;var yo=require("os"),wo=Qn(),go=Te(),So=function(){let e=(0,go.getRealtimeSignals)();return[...wo.SIGNALS,...e].map(xo)};oe.getSignals=So;var xo=function({name:e,number:t,description:n,action:r,forced:i=!1,standard:s}){let{signals:{[e]:o}}=yo.constants,c=o!==void 0;return{name:e,number:c?o:t,description:n,supported:c,action:r,forced:i,standard:s}}});var nr=a(M=>{"use strict";Object.defineProperty(M,"__esModule",{value:!0});M.signalsByNumber=M.signalsByName=void 0;var Eo=require("os"),tr=er(),Io=Te(),Co=function(){return(0,tr.getSignals)().reduce(vo,{})},vo=function(e,{name:t,number:n,description:r,supported:i,action:s,forced:o,standard:c}){return{...e,[t]:{name:t,number:n,description:r,supported:i,action:s,forced:o,standard:c}}},bo=Co();M.signalsByName=bo;var qo=function(){let e=(0,tr.getSignals)(),t=Io.SIGRTMAX+1,n=Array.from({length:t},(r,i)=>Po(i,e));return Object.assign({},...n)},Po=function(e,t){let n=Wo(e,t);if(n===void 0)return{};let{name:r,description:i,supported:s,action:o,forced:c,standard:u}=n;return{[e]:{name:r,number:e,description:i,supported:s,action:o,forced:c,standard:u}}},Wo=function(e,t){let n=t.find(({name:r})=>Eo.constants.signals[r]===e);return n!==void 0?n:t.find(r=>r.number===e)},Fo=qo();M.signalsByNumber=Fo});var ir=a((La,rr)=>{"use strict";var{signalsByName:Ao}=nr(),Ro=({timedOut:e,timeout:t,errorCode:n,signal:r,signalDescription:i,exitCode:s,isCanceled:o})=>e?`timed out after ${t} milliseconds`:o?"was canceled":n!==void 0?`failed with ${n}`:r!==void 0?`was killed with ${r} (${i})`:s!==void 0?`failed with exit code ${s}`:"failed",To=({stdout:e,stderr:t,all:n,error:r,signal:i,exitCode:s,command:o,escapedCommand:c,timedOut:u,isCanceled:l,killed:d,parsed:{options:{timeout:h}}})=>{s=s===null?void 0:s,i=i===null?void 0:i;let m=i===void 0?void 0:Ao[i].description,w=r&&r.code,b=`Command ${Ro({timedOut:u,timeout:h,errorCode:w,signal:i,signalDescription:m,exitCode:s,isCanceled:l})}: ${o}`,R=Object.prototype.toString.call(r)==="[object Error]",Z=R?`${b}
${r.message}`:b,V=[Z,t,e].filter(Boolean).join(`
`);return R?(r.originalMessage=r.message,r.message=V):r=new Error(V),r.shortMessage=Z,r.command=o,r.escapedCommand=c,r.exitCode=s,r.signal=i,r.signalDescription=m,r.stdout=e,r.stderr=t,n!==void 0&&(r.all=n),"bufferedData"in r&&delete r.bufferedData,r.failed=!0,r.timedOut=!!u,r.isCanceled=l,r.killed=d&&!u,r};rr.exports=To});var or=a((ka,Ne)=>{"use strict";var ce=["stdin","stdout","stderr"],No=e=>ce.some(t=>e[t]!==void 0),sr=e=>{if(!e)return;let{stdio:t}=e;if(t===void 0)return ce.map(r=>e[r]);if(No(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${ce.map(r=>`\`${r}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let n=Math.max(t.length,ce.length);return Array.from({length:n},(r,i)=>t[i])};Ne.exports=sr;Ne.exports.node=e=>{let t=sr(e);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var cr=a((Ga,ae)=>{ae.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&ae.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&ae.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var dr=a((Ma,D)=>{var p=global.process,W=function(e){return e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function"};W(p)?(ar=require("assert"),B=cr(),ur=/^win/i.test(p.platform),X=require("events"),typeof X!="function"&&(X=X.EventEmitter),p.__signal_exit_emitter__?y=p.__signal_exit_emitter__:(y=p.__signal_exit_emitter__=new X,y.count=0,y.emitted={}),y.infinite||(y.setMaxListeners(1/0),y.infinite=!0),D.exports=function(e,t){if(!W(global.process))return function(){};ar.equal(typeof e,"function","a callback must be provided for exit handler"),$===!1&&_e();var n="exit";t&&t.alwaysLast&&(n="afterexit");var r=function(){y.removeListener(n,e),y.listeners("exit").length===0&&y.listeners("afterexit").length===0&&ue()};return y.on(n,e),r},ue=function(){!$||!W(global.process)||($=!1,B.forEach(function(t){try{p.removeListener(t,le[t])}catch{}}),p.emit=fe,p.reallyExit=Oe,y.count-=1)},D.exports.unload=ue,F=function(t,n,r){y.emitted[t]||(y.emitted[t]=!0,y.emit(t,n,r))},le={},B.forEach(function(e){le[e]=function(){if(W(global.process)){var n=p.listeners(e);n.length===y.count&&(ue(),F("exit",null,e),F("afterexit",null,e),ur&&e==="SIGHUP"&&(e="SIGINT"),p.kill(p.pid,e))}}}),D.exports.signals=function(){return B},$=!1,_e=function(){$||!W(global.process)||($=!0,y.count+=1,B=B.filter(function(t){try{return p.on(t,le[t]),!0}catch{return!1}}),p.emit=fr,p.reallyExit=lr)},D.exports.load=_e,Oe=p.reallyExit,lr=function(t){W(global.process)&&(p.exitCode=t||0,F("exit",p.exitCode,null),F("afterexit",p.exitCode,null),Oe.call(p,p.exitCode))},fe=p.emit,fr=function(t,n){if(t==="exit"&&W(global.process)){n!==void 0&&(p.exitCode=n);var r=fe.apply(this,arguments);return F("exit",p.exitCode,null),F("afterexit",p.exitCode,null),r}else return fe.apply(this,arguments)}):D.exports=function(){return function(){}};var ar,B,ur,X,y,ue,F,le,$,_e,Oe,lr,fe,fr});var mr=a((Ba,pr)=>{"use strict";var _o=require("os"),Oo=dr(),Lo=1e3*5,ko=(e,t="SIGTERM",n={})=>{let r=e(t);return Go(e,t,n,r),r},Go=(e,t,n,r)=>{if(!Mo(t,n,r))return;let i=$o(n),s=setTimeout(()=>{e("SIGKILL")},i);s.unref&&s.unref()},Mo=(e,{forceKillAfterTimeout:t},n)=>Bo(e)&&t!==!1&&n,Bo=e=>e===_o.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",$o=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Lo;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},Do=(e,t)=>{e.kill()&&(t.isCanceled=!0)},Uo=(e,t,n)=>{e.kill(t),n(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},jo=(e,{timeout:t,killSignal:n="SIGTERM"},r)=>{if(t===0||t===void 0)return r;let i,s=new Promise((c,u)=>{i=setTimeout(()=>{Uo(e,n,u)},t)}),o=r.finally(()=>{clearTimeout(i)});return Promise.race([s,o])},Ho=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},Xo=async(e,{cleanup:t,detached:n},r)=>{if(!t||n)return r;let i=Oo(()=>{e.kill()});return r.finally(()=>{i()})};pr.exports={spawnedKill:ko,spawnedCancel:Do,setupTimeout:jo,validateTimeout:Ho,setExitHandler:Xo}});var yr=a(($a,hr)=>{"use strict";var P=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";P.writable=e=>P(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object";P.readable=e=>P(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object";P.duplex=e=>P.writable(e)&&P.readable(e);P.transform=e=>P.duplex(e)&&typeof e._transform=="function";hr.exports=P});var gr=a((Da,wr)=>{"use strict";var{PassThrough:zo}=require("stream");wr.exports=e=>{e={...e};let{array:t}=e,{encoding:n}=e,r=n==="buffer",i=!1;t?i=!(n||r):n=n||"utf8",r&&(n=null);let s=new zo({objectMode:i});n&&s.setEncoding(n);let o=0,c=[];return s.on("data",u=>{c.push(u),i?o=c.length:o+=u.length}),s.getBufferedValue=()=>t?c:r?Buffer.concat(c,o):c.join(""),s.getBufferedLength=()=>o,s}});var Sr=a((Ua,z)=>{"use strict";var{constants:Ko}=require("buffer"),Zo=require("stream"),{promisify:Vo}=require("util"),Qo=gr(),Jo=Vo(Zo.pipeline),de=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function Le(e,t){if(!e)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:n}=t,r=Qo(t);return await new Promise((i,s)=>{let o=c=>{c&&r.getBufferedLength()<=Ko.MAX_LENGTH&&(c.bufferedData=r.getBufferedValue()),s(c)};(async()=>{try{await Jo(e,r),i()}catch(c){o(c)}})(),r.on("data",()=>{r.getBufferedLength()>n&&o(new de)})}),r.getBufferedValue()}z.exports=Le;z.exports.buffer=(e,t)=>Le(e,{...t,encoding:"buffer"});z.exports.array=(e,t)=>Le(e,{...t,array:!0});z.exports.MaxBufferError=de});var Er=a((ja,xr)=>{"use strict";var{PassThrough:Yo}=require("stream");xr.exports=function(){var e=[],t=new Yo({objectMode:!0});return t.setMaxListeners(0),t.add=n,t.isEmpty=r,t.on("unpipe",i),Array.prototype.slice.call(arguments).forEach(n),t;function n(s){return Array.isArray(s)?(s.forEach(n),this):(e.push(s),s.once("end",i.bind(null,s)),s.once("error",t.emit.bind(t,"error")),s.pipe(t,{end:!1}),this)}function r(){return e.length==0}function i(s){e=e.filter(function(o){return o!==s}),!e.length&&t.readable&&t.end()}}});var br=a((Ha,vr)=>{"use strict";var Cr=yr(),Ir=Sr(),ec=Er(),tc=(e,t)=>{t===void 0||e.stdin===void 0||(Cr(t)?t.pipe(e.stdin):e.stdin.end(t))},nc=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;let n=ec();return e.stdout&&n.add(e.stdout),e.stderr&&n.add(e.stderr),n},ke=async(e,t)=>{if(e){e.destroy();try{return await t}catch(n){return n.bufferedData}}},Ge=(e,{encoding:t,buffer:n,maxBuffer:r})=>{if(!(!e||!n))return t?Ir(e,{encoding:t,maxBuffer:r}):Ir.buffer(e,{maxBuffer:r})},rc=async({stdout:e,stderr:t,all:n},{encoding:r,buffer:i,maxBuffer:s},o)=>{let c=Ge(e,{encoding:r,buffer:i,maxBuffer:s}),u=Ge(t,{encoding:r,buffer:i,maxBuffer:s}),l=Ge(n,{encoding:r,buffer:i,maxBuffer:s*2});try{return await Promise.all([o,c,u,l])}catch(d){return Promise.all([{error:d,signal:d.signal,timedOut:d.timedOut},ke(e,c),ke(t,u),ke(n,l)])}},ic=({input:e})=>{if(Cr(e))throw new TypeError("The `input` option cannot be a stream in sync mode")};vr.exports={handleInput:tc,makeAllStream:nc,getSpawnedResult:rc,validateInputSync:ic}});var Pr=a((Xa,qr)=>{"use strict";var sc=(async()=>{})().constructor.prototype,oc=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(sc,e)]),cc=(e,t)=>{for(let[n,r]of oc){let i=typeof t=="function"?(...s)=>Reflect.apply(r.value,t(),s):r.value.bind(t);Reflect.defineProperty(e,n,{...r,value:i})}return e},ac=e=>new Promise((t,n)=>{e.on("exit",(r,i)=>{t({exitCode:r,signal:i})}),e.on("error",r=>{n(r)}),e.stdin&&e.stdin.on("error",r=>{n(r)})});qr.exports={mergePromise:cc,getSpawnedPromise:ac}});var Ar=a((za,Fr)=>{"use strict";var Wr=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],uc=/^[\w.-]+$/,lc=/"/g,fc=e=>typeof e!="string"||uc.test(e)?e:`"${e.replace(lc,'\\"')}"`,dc=(e,t)=>Wr(e,t).join(" "),pc=(e,t)=>Wr(e,t).map(n=>fc(n)).join(" "),mc=/ +/g,hc=e=>{let t=[];for(let n of e.trim().split(mc)){let r=t[t.length-1];r&&r.endsWith("\\")?t[t.length-1]=`${r.slice(0,-1)} ${n}`:t.push(n)}return t};Fr.exports={joinCommand:dc,getEscapedCommand:pc,parseCommand:hc}});var kr=a((Ka,U)=>{"use strict";var yc=require("path"),Me=require("child_process"),wc=$n(),gc=Un(),Sc=Xn(),xc=Vn(),pe=ir(),Tr=or(),{spawnedKill:Ec,spawnedCancel:Ic,setupTimeout:Cc,validateTimeout:vc,setExitHandler:bc}=mr(),{handleInput:qc,getSpawnedResult:Pc,makeAllStream:Wc,validateInputSync:Fc}=br(),{mergePromise:Rr,getSpawnedPromise:Ac}=Pr(),{joinCommand:Nr,parseCommand:_r,getEscapedCommand:Or}=Ar(),Rc=1e3*1e3*100,Tc=({env:e,extendEnv:t,preferLocal:n,localDir:r,execPath:i})=>{let s=t?{...process.env,...e}:e;return n?Sc.env({env:s,cwd:r,execPath:i}):s},Lr=(e,t,n={})=>{let r=wc._parse(e,t,n);return e=r.command,t=r.args,n=r.options,n={maxBuffer:Rc,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:n.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...n},n.env=Tc(n),n.stdio=Tr(n),process.platform==="win32"&&yc.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:n,parsed:r}},K=(e,t,n)=>typeof t!="string"&&!Buffer.isBuffer(t)?n===void 0?void 0:"":e.stripFinalNewline?gc(t):t,me=(e,t,n)=>{let r=Lr(e,t,n),i=Nr(e,t),s=Or(e,t);vc(r.options);let o;try{o=Me.spawn(r.file,r.args,r.options)}catch(w){let E=new Me.ChildProcess,b=Promise.reject(pe({error:w,stdout:"",stderr:"",all:"",command:i,escapedCommand:s,parsed:r,timedOut:!1,isCanceled:!1,killed:!1}));return Rr(E,b)}let c=Ac(o),u=Cc(o,r.options,c),l=bc(o,r.options,u),d={isCanceled:!1};o.kill=Ec.bind(null,o.kill.bind(o)),o.cancel=Ic.bind(null,o,d);let m=xc(async()=>{let[{error:w,exitCode:E,signal:b,timedOut:R},Z,V,Kr]=await Pc(o,r.options,l),De=K(r.options,Z),Ue=K(r.options,V),je=K(r.options,Kr);if(w||E!==0||b!==null){let He=pe({error:w,exitCode:E,signal:b,stdout:De,stderr:Ue,all:je,command:i,escapedCommand:s,parsed:r,timedOut:R,isCanceled:d.isCanceled,killed:o.killed});if(!r.options.reject)return He;throw He}return{command:i,escapedCommand:s,exitCode:0,stdout:De,stderr:Ue,all:je,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return qc(o,r.options.input),o.all=Wc(o,r.options),Rr(o,m)};U.exports=me;U.exports.sync=(e,t,n)=>{let r=Lr(e,t,n),i=Nr(e,t),s=Or(e,t);Fc(r.options);let o;try{o=Me.spawnSync(r.file,r.args,r.options)}catch(l){throw pe({error:l,stdout:"",stderr:"",all:"",command:i,escapedCommand:s,parsed:r,timedOut:!1,isCanceled:!1,killed:!1})}let c=K(r.options,o.stdout,o.error),u=K(r.options,o.stderr,o.error);if(o.error||o.status!==0||o.signal!==null){let l=pe({stdout:c,stderr:u,error:o.error,signal:o.signal,exitCode:o.status,command:i,escapedCommand:s,parsed:r,timedOut:o.error&&o.error.code==="ETIMEDOUT",isCanceled:!1,killed:o.signal!==null});if(!r.options.reject)return l;throw l}return{command:i,escapedCommand:s,exitCode:0,stdout:c,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};U.exports.command=(e,t)=>{let[n,...r]=_r(e);return me(n,r,t)};U.exports.commandSync=(e,t)=>{let[n,...r]=_r(e);return me.sync(n,r,t)};U.exports.node=(e,t,n={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(n=t,t=[]);let r=Tr.node(n),i=process.execArgv.filter(c=>!c.startsWith("--inspect")),{nodePath:s=process.execPath,nodeOptions:o=i}=n;return me(s,[...o,e,...Array.isArray(t)?t:[]],{...n,stdin:void 0,stdout:void 0,stderr:void 0,stdio:r,shell:!1})}});var Lc={};ei(Lc,{default:()=>zr});module.exports=ti(Lc);var f=require("@raycast/api");var A=require("react"),Be=J(xe());var I=require("@raycast/api"),Oc=J(xe());var _c=J(kr(),1);var he=J(require("node:process"),1),Gr=require("node:os"),Nc=()=>{let{env:e}=he.default;if(he.default.platform==="win32")return e.COMSPEC||"cmd.exe";try{let{shell:t}=(0,Gr.userInfo)();if(t)return t}catch{}return he.default.platform==="darwin"?e.SHELL||"/bin/zsh":e.SHELL||"/bin/sh"},Ya=Nc();var Mr=require("@raycast/api"),{showQualityNumber:Br,showWifiName:$r,showColorfulSignal:Dr}=(0,Mr.getPreferenceValues)();var Ur=e=>e===void 0?I.Icon.WifiDisabled:e<40?I.Icon.Signal1:e<70?I.Icon.Signal2:e<90?I.Icon.Signal3:I.Icon.FullSignal,jr=e=>{if(e!==void 0)return e<40?I.Color.Red:e<70?I.Color.Orange:I.Color.Green},Hr=e=>{if(e===void 0)return"";let t=$r?e?.ssid+"":"",n=Br?e?.quality+"":"";return t+" "+n};var $e=require("@raycast/api");Be.default.init({iface:null});var Xr=()=>{let e=new $e.Cache,t=e.get("Cur Wifi"),n;try{typeof t=="string"&&t!=""&&(n=JSON.parse(t))}catch(u){console.error(u),n=void 0}let[r,i]=(0,A.useState)(n),[s,o]=(0,A.useState)(!0),c=(0,A.useCallback)(async()=>{o(!0);try{let u=await Be.default.getCurrentConnections(),l=u.length!=0?u[0]:void 0;i(l),l===void 0?e.set("Cur Wifi",""):e.set("Cur Wifi",JSON.stringify(l))}catch(u){console.error(u)}o(!1)},[]);return(0,A.useEffect)(()=>{c()},[c]),{curWifi:r,loading:s}};var v=require("react/jsx-runtime");function zr(){let{curWifi:e,loading:t}=Xr(),n=Hr(e),r={source:Ur(e?.quality),tintColor:Dr?jr(e?.quality):void 0};return(0,v.jsxs)(f.MenuBarExtra,{title:n,icon:r,isLoading:t,children:[e!==void 0&&(0,v.jsxs)(f.MenuBarExtra.Section,{children:[(0,v.jsx)(f.MenuBarExtra.Item,{title:"Wi-Fi",subtitle:e?.ssid,icon:f.Icon.Wifi,onAction:async()=>{await f.Clipboard.copy(e?.ssid+""),await(0,f.showHUD)("\u{1F6DC} Wi-Fi Copied")}}),(0,v.jsx)(f.MenuBarExtra.Item,{title:"Quality",subtitle:e?.quality.toString(),icon:f.Icon.LevelMeter,onAction:async()=>{await f.Clipboard.copy(e?.quality+""),await(0,f.showHUD)("\u{1F4F6} Quality Copied")}}),(0,v.jsx)(f.MenuBarExtra.Item,{title:"Security",subtitle:e?.security,icon:f.Icon.Lock,onAction:async()=>{await f.Clipboard.copy(e?.security+""),await(0,f.showHUD)("\u{1F510} Security Copied")}}),(0,v.jsx)(f.MenuBarExtra.Item,{title:"Channel",subtitle:e?.channel.toString(),icon:f.Icon.Livestream,onAction:async()=>{await f.Clipboard.copy(e?.channel+""),await(0,f.showHUD)("\u{1F503} Channel Copied")}}),(0,v.jsx)(f.MenuBarExtra.Item,{title:"Frequency",subtitle:e?.frequency.toString(),icon:f.Icon.Heartbeat,onAction:async()=>{await f.Clipboard.copy(e?.frequency+""),await(0,f.showHUD)("\u2733\uFE0F Frequency Copied")}})]}),(0,v.jsxs)(f.MenuBarExtra.Section,{children:[(0,v.jsx)(f.MenuBarExtra.Item,{title:"Toggle Wi-Fi",icon:e===void 0?f.Icon.Wifi:f.Icon.WifiDisabled,shortcut:{modifiers:["cmd"],key:"t"},onAction:async()=>{await(0,f.open)("raycast://extensions/koinzhang/wi-fi/toggle-wi-fi?launchType=background")}}),(0,v.jsx)(f.MenuBarExtra.Item,{title:"Preferences",icon:f.Icon.Gear,shortcut:{modifiers:["cmd"],key:","},onAction:()=>{(0,f.openCommandPreferences)().then(()=>null)}})]})]})}
